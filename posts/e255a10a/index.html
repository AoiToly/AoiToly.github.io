<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>计算机网络 | Aoi Toly</title><meta name="keywords" content="程序员, Unity, U3D, 游戏, 博客, blog, AoiToly"><meta name="author" content="Aoi Toly"><meta name="copyright" content="Aoi Toly"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="计算机网络"><meta name="application-name" content="计算机网络"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="default"><link rel="bookmark" href="/img/siteicon/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" sizes="180x180" href="/img/siteicon/apple-touch-icon.png"><link rel="apple-touch-icon" sizes="192x192" href="/img/siteicon/apple-touch-icon.png"><link rel="apple-touch-icon" sizes="512x512" href="/img/siteicon/apple-touch-icon.png"><link rel="apple-touch-startup-image" media="screen and (device-width:320px) and (device-height:568px) and (-webkit-device-pixel-ratio:2) and (orientation:landscape)" href="/img/siteicon/splashIcons/icon_1136x640.png"><link rel="apple-touch-startup-image" media="screen and (device-width:320px) and (device-height:568px) and (-webkit-device-pixel-ratio:2) and (orientation:portrait)" href="/img/siteicon/splashIcons/icon_640x1136.png"><link rel="apple-touch-startup-image" media="screen and (device-width:414px) and (device-height:896px) and (-webkit-device-pixel-ratio:3) and (orientation:landscape)" href="/img/siteicon/splashIcons/icon_2688x1242.png"><link rel="apple-touch-startup-image" media="screen and (device-width:414px) and (device-height:896px) and (-webkit-device-pixel-ratio:2) and (orientation:landscape)" href="/img/siteicon/splashIcons/icon_1792x828.png"><link rel="apple-touch-startup-image" media="screen and (device-width:375px) and (device-height:812px) and (-webkit-device-pixel-ratio:3) and (orientation:portrait)" href="/img/siteicon/splashIcons/icon_1125x2436.png"><link rel="apple-touch-startup-image" media="screen and (device-width:414px) and (device-height:896px) and (-webkit-device-pixel-ratio:2) and (orientation:portrait)" href="/img/siteicon/splashIcons/icon_828x1792.png"><link rel="apple-touch-startup-image" media="screen and (device-width:375px) and (device-height:812px) and (-webkit-device-pixel-ratio:3) and (orientation:landscape)" href="/img/siteicon/splashIcons/icon_2436x1125.png"><link rel="apple-touch-startup-image" media="screen and (device-width:414px) and (device-height:736px) and (-webkit-device-pixel-ratio:3) and (orientation:portrait)" href="/img/siteicon/splashIcons/icon_1242x2208.png"><link rel="apple-touch-startup-image" media="screen and (device-width:414px) and (device-height:736px) and (-webkit-device-pixel-ratio:3) and (orientation:landscape)" href="/img/siteicon/splashIcons/icon_2208x1242.png"><link rel="apple-touch-startup-image" media="screen and (device-width:375px) and (device-height:667px) and (-webkit-device-pixel-ratio:2) and (orientation:landscape)" href="/img/siteicon/splashIcons/icon_1334x750.png"><link rel="apple-touch-startup-image" media="screen and (device-width:375px) and (device-height:667px) and (-webkit-device-pixel-ratio:2) and (orientation:portrait)" href="/img/siteicon/splashIcons/icon_750x1334.png"><link rel="apple-touch-startup-image" media="screen and (device-width:1024px) and (device-height:1366px) and (-webkit-device-pixel-ratio:2) and (orientation:landscape)" href="/img/siteicon/splashIcons/icon_2732x2048.png"><meta name="description" content="第一章 概述1.1 计算机网络概述计算机网络定义：由一些通用的、可编程的硬件互连而成的。 “可编程的硬件”表明这种硬件一定包含有中央处理器 (CPU)   由若干结点(node)和连接这些结点的链路(link)组成 21世纪重要特征：数字化、网络化、信息化，它是一个以网络为核心的信息时代 三大类网络：电信网络、有线电视网络、计算机网络 随着技术发展，网络技术互相融合——三网融合 1.2 互联网概述">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络">
<meta property="og:url" content="http://aoitoly.github.io/posts/e255a10a/index.html">
<meta property="og:site_name" content="Aoi Toly">
<meta property="og:description" content="第一章 概述1.1 计算机网络概述计算机网络定义：由一些通用的、可编程的硬件互连而成的。 “可编程的硬件”表明这种硬件一定包含有中央处理器 (CPU)   由若干结点(node)和连接这些结点的链路(link)组成 21世纪重要特征：数字化、网络化、信息化，它是一个以网络为核心的信息时代 三大类网络：电信网络、有线电视网络、计算机网络 随着技术发展，网络技术互相融合——三网融合 1.2 互联网概述">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://aoitoly.github.io/img/default_cover.jpg">
<meta property="article:published_time" content="2023-03-22T15:00:05.128Z">
<meta property="article:modified_time" content="2023-03-25T06:25:52.928Z">
<meta property="article:author" content="Aoi Toly">
<meta property="article:tag" content="程序员, Unity, U3D, 游戏, 博客, blog, AoiToly">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://aoitoly.github.io/img/default_cover.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://aoitoly.github.io/posts/e255a10a/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@1.0.17/lib/assets/font-awesome-animation.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://npm.elemecdn.com/@fortawesome/fontawesome-free@6.3.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/@fancyapps/ui@4.0.31/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#3b70fc","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://npm.elemecdn.com/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://npm.elemecdn.com/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '计算机网络',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-03-25 14:25:52'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              // const now = new Date()
              // const hour = now.getHours()
              // const isNight = hour <= 6 || hour >= 18
              // isNight ? activateDarkMode() : activateLightMode()
              activateDarkMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Aoi Toly" type="application/atom+xml">
</head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/"><div class="title">Aoi Toly</div><i class="fa-solid fa-house"></i></a></span><div class="mask-name-container"><center id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></center></div><div id="menus"></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="fas fa-dice" style="font-size:1.2rem"></i></a></div><div class="nav-button" id="darkmode_navswitch"><a class="darkmode_switchbutton" type="button" href="javascript:void(0);" title="浅色和深色模式转换" onclick="rm.switchDarkMode()"><i class="fas fa-adjust"></i></a></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="fas fa-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">计算机网络</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-22T15:00:05.128Z" title="发表于 2023-03-22 23:00:05">2023-03-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-25T06:25:52.928Z" title="更新于 2023-03-25 14:25:52">2023-03-25</time></span></div><div class="meta-secondline"></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="/img/default_cover.jpg"></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="第一章-概述"><a href="#第一章-概述" class="headerlink" title="第一章 概述"></a>第一章 概述</h1><h2 id="1-1-计算机网络概述"><a href="#1-1-计算机网络概述" class="headerlink" title="1.1 计算机网络概述"></a>1.1 计算机网络概述</h2><p>计算机网络定义：由一些通用的、可编程的硬件互连而成的。</p>
<p>“可编程的硬件”表明这种硬件一定包含有中央处理器 (CPU)  </p>
<p>由若干结点(node)和连接这些结点的链路(link)组成</p>
<p>21世纪重要特征：数字化、网络化、信息化，它是一个以网络为核心的信息时代</p>
<p>三大类网络：电信网络、有线电视网络、计算机网络</p>
<p>随着技术发展，网络技术互相融合——三网融合</p>
<h2 id="1-2-互联网概述"><a href="#1-2-互联网概述" class="headerlink" title="1.2 互联网概述"></a>1.2 互联网概述</h2><p>互联网重要基本特点：连通性和共享</p>
<p>互联网+：把互联网的创新成果深度融合于经济社会各领域之中</p>
<p>网络把许多计算机连接在一起</p>
<p>互联网把许多网络通过路由器连接在一起</p>
<p>与网络相连的计算机常称为主机</p>
<h3 id="互联网基础结构发展的三个阶段"><a href="#互联网基础结构发展的三个阶段" class="headerlink" title="互联网基础结构发展的三个阶段"></a>互联网基础结构发展的三个阶段</h3><p>第一阶段：单个网络APRANET向互联网发展的过程</p>
<p>第二阶段：建成三级结构的互联网</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211112135352228.png" alt="image-20211112135352228" style="zoom:50%;" />

<p>第三阶段：形成多层次ISP结构的互联网，出现了互联网服务提供者ISP(Internet Service Provider)<br>    根据覆盖面积大小以及所拥有的IP地址数目的不同，ISP分为主干ISP、地区ISP、本地ISP</p>
<p>　<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211112135714388.png" alt="image-20211112135714388" style="zoom:50%;" /></p>
<h2 id="1-3-互联网的组成"><a href="#1-3-互联网的组成" class="headerlink" title="1.3 互联网的组成"></a>1.3 互联网的组成</h2><p>从工作方式可分为两大块：</p>
<p>1、边缘部分：由所有连接在互联网上的主机组成。这部分是用户直接使用的，用来进行通信（传送数据、音频或视频）和资源共享。  </p>
<p>2、核心部分：由所有连接在互联网上的主机组成。这部分是用户直接使用的，用来进行通信（传送数据、音频或视频）和资源共享。  </p>
<h3 id="1-3-1-边缘部分"><a href="#1-3-1-边缘部分" class="headerlink" title="1.3.1 边缘部分"></a>1.3.1 边缘部分</h3><p>互联网边缘的部分就是连接在互联网上的所有的主机，这些主机又被称为端系统。</p>
<p>端系统可以是PC、智能手机、网络摄像头、大型计算机等等</p>
<p>计算机之间的通信：主机A的某个进程（程序）和主机B上的另一个进程（程序）进行通信</p>
<h4 id="端系统之间通信方式"><a href="#端系统之间通信方式" class="headerlink" title="端系统之间通信方式"></a>端系统之间通信方式</h4><h5 id="客户-服务器方式（C-x2F-S-方式）"><a href="#客户-服务器方式（C-x2F-S-方式）" class="headerlink" title="客户-服务器方式（C&#x2F;S 方式）"></a>客户-服务器方式（C&#x2F;S 方式）</h5><p>客户 (client) 和 服务器 (server) 都是指通信中所涉及的两个应用进程。  </p>
<p>客户是服务的请求方，服务器是服务的提供方。服务请求方和服务提供方都要使用网络核心部分所提供的服务。</p>
<p>客户软件的特点：</p>
<p>​	被用户调用后运行， 在打算通信时主动向远地服务器发起通信（请求服务）。 因此，客户程序必须知道服务器程序的地址。<br>​	不需要特殊的硬件和很复杂的操作系统。  </p>
<p>服务器软件的特点：</p>
<p>​	一种专门用来提供某种服务的程序， 可同时处理多个远地或本地客户的请求。<br>​	系统启动后动调即自用并一直不断地运行着，被动地等待并接受来自各地的客户的通信请求。因此，服务器程序不需要知道客户程序的地址。<br>​	一般需要强大的硬件和高级的操作系统支持。</p>
<p>​	客户与服务器的通信关系建立后， 通信可以是双向的， 客户和服务器都可发送和接收数据。  </p>
<h5 id="对等方式（P2P-方式）"><a href="#对等方式（P2P-方式）" class="headerlink" title="对等方式（P2P 方式）"></a>对等方式（P2P 方式）</h5><p>只要两个主机都运行了对等连接软件 (P2P 软件) ，它们就可以进行平等的、对等连接通信。<br>双方都可以下载对方已经存储在硬盘中的共享文档。</p>
<p>对等连接方式从本质上看仍然是使用客户服务器方式，只是对等连接中的每一个主机既是客户又是服务器。 </p>
<h3 id="1-3-2-核心部分"><a href="#1-3-2-核心部分" class="headerlink" title="1.3.2 核心部分"></a>1.3.2 核心部分</h3><p>提供连通性</p>
<p>路由器在核心部分中起特殊作用</p>
<p>路由器是实现分组交换 (packet switching) 的关键构件，其任务是转发收到的分组，这是网络核心部分最重要的功能。  </p>
<h4 id="电路交换"><a href="#电路交换" class="headerlink" title="电路交换"></a>电路交换</h4><p>两部电话机之间需要1对电线直接连接</p>
<p>N 部电话机两两直接相连，需 N(N – 1)&#x2F;2 对电线。 这种直接连接方法所需要的电线对的数量与电话机数量的平方 成正比。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211025083428059.png" alt="image-20211025083428059" style="zoom:33%;" />

<p>使用交换机：</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211025083458097.png" alt="image-20211025083458097" style="zoom:33%;" />

<p>每一部电话都直接连接到交换机上，而交换机使用交换的方法，让电话用户彼此之间可以很方便地通信。所采用的交换方式就是电路交换 (circuit switching)。  </p>
<p>交换：转接，把一条电话线转接到另一条电话线。照某种方式动态分配传输线路的资源</p>
<p>电路交换必定是面向连接的</p>
<p>过程：</p>
<p>​	建立连接：建立一条专用的物理通路，保证通话时资源不被占用</p>
<p>​	通话：占用通信资源</p>
<p>​	释放连接：释放占用的所有通信资源</p>
<p>缺点：突发性、线路利用率低</p>
<h4 id="分组交换"><a href="#分组交换" class="headerlink" title="分组交换"></a>分组交换</h4><p>采用存储转发技术</p>
<p>步骤：</p>
<p>1、在发送端，先把较长的报文划分成较短的固定长度的数据段</p>
<p>2、每一个数据段前面添加上首部（包头）构成分组（包）</p>
<p>3、以”分组“作为数据传输单元，依次把各分组发送到接收端</p>
<p>分组首部：含有地址等控制信息</p>
<p>每个分组独立选择传输路径</p>
<p>核心部分中的路由器之间一般由高速链路连接</p>
<p>边缘部分的主机接入到核心部分以相对较低速率的链路连接</p>
<p>主机的用途：为用户处理信息</p>
<p>路由器的用途：分组交换</p>
<p>路由器处理分组的过程：<br>    把收到的分组先放入缓存（暂时存储）；<br>    查找转发表， 找出到某个目的地址应从哪个端口转发；<br>    把分组送到适当的端口转发出去。  </p>
<table>
<thead>
<tr>
<th align="center">优点</th>
<th align="center">所采用的手段</th>
</tr>
</thead>
<tbody><tr>
<td align="center">高效</td>
<td align="center">在分组传输的过程中动态分配传输带宽，对通信链路逐段占用</td>
</tr>
<tr>
<td align="center">灵活</td>
<td align="center">为每一个分组独立选择最合适的转发路由</td>
</tr>
<tr>
<td align="center">迅速</td>
<td align="center">以分组作为传送单位，可以不先建立连接就能向其他主机发送分组</td>
</tr>
<tr>
<td align="center">可靠</td>
<td align="center">保证可靠性的网络协议</td>
</tr>
</tbody></table>
<p>问题：</p>
<p>​	分组在个结点存储转发时需要排队，造成一定时延</p>
<p>​	分组必须携带首部，造成一定开销</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211025092409600.png" alt="image-20211025092409600" style="zoom:67%;" />

<p>若要连续传送大量的数据，且其传送时间远大于连接建立时间，则电路交换的传输速率较快。<br>报文交换和分组交换不需要预先分配传输带宽，在传送突发数据时可提高整个网络的信道利用率。<br>由于一个分组的长度往往远小于整个报文的长度，因此分组交换比报文交换的时延小，同时也具有更好的灵活性  </p>
<h2 id="1-4-计算机网络的类别"><a href="#1-4-计算机网络的类别" class="headerlink" title="1.4 计算机网络的类别"></a>1.4 计算机网络的类别</h2><h2 id="1-5-计算机网络的类别"><a href="#1-5-计算机网络的类别" class="headerlink" title="1.5 计算机网络的类别"></a>1.5 计算机网络的类别</h2><h3 id="按照网络作用范围分类"><a href="#按照网络作用范围分类" class="headerlink" title="按照网络作用范围分类"></a>按照网络作用范围分类</h3><p>广域网 WAN (Wide Area Network)： 作用范围通常为几十到几千公里（跨越国家），是互联网的核心部分。<br>城域网 MAN (Metropolitan Area Network)： 作用距离约为 5 ~ 50 公里（几个街区甚至整个城市）。<br>局域网 LAN (Local Area Network) ： 局限在较小的范围（如 1 公里左右） ，校园网或企业网。<br>个人区域网 PAN (Personal Area Network) ： 范围很小，大约在 10 米左右，通过无线技术连接。<br>若中央处理机之间的距离非常近（如仅1米的数量级甚至更小些），则一般就称之为多处理机系统， 而不称它为计算机网络。  </p>
<h3 id="按照网络的使用者分类"><a href="#按照网络的使用者分类" class="headerlink" title="按照网络的使用者分类"></a>按照网络的使用者分类</h3><p>公用网 (public network)<br>    电信公司建造的大型网络。按规定交纳费用的人都可以使用的网络。因此也可称为公众网。<br>专用网 (private network)<br>    某个单位为特殊业务工作的需要而建造的网络，例如军队、铁路、银行、电力等系统。<br>公用网和专用网都可以提供多种服务。如传送的是计算机数据，则分别是公用计算机网络和专用计算机网络。  </p>
<h3 id="用来把用户接入到互联网的网络"><a href="#用来把用户接入到互联网的网络" class="headerlink" title="用来把用户接入到互联网的网络"></a>用来把用户接入到互联网的网络</h3><p>接入网AN(Access Network)，它又称为本地接入网或居民接入网  </p>
<p>起到让用户能够与互联网连接的“桥梁”作用  </p>
<p>接入网技术：电话线拨号、宽带</p>
<p>不属于互联网的核心和边缘部分</p>
<p>接入网是从某个用户端系统到互联网中的第一个路由器（也称为边缘路由器）之间的一种网络。</p>
<p>从覆盖的范围看，很多接入网还是属于局域网。  </p>
<h2 id="1-6-计算机网络的性能"><a href="#1-6-计算机网络的性能" class="headerlink" title="1.6 计算机网络的性能"></a>1.6 计算机网络的性能</h2><h3 id="1-6-1-计算机网络的性能指标"><a href="#1-6-1-计算机网络的性能指标" class="headerlink" title="1.6.1 计算机网络的性能指标"></a>1.6.1 计算机网络的性能指标</h3><p>主要包括：速率、带宽、吞吐率、时延、时延带宽积、往返时间RTT、利用率</p>
<h4 id="速率"><a href="#速率" class="headerlink" title="速率"></a>速率</h4><p>数据的传送速率，也成为数据率、比特率</p>
<p>单位：bit&#x2F;s, kbit&#x2F;s, Mbit&#x2F;s, Gbit&#x2F;s</p>
<p>速率往往是指指定速率或标称速率，非实际运行速率</p>
<h4 id="带宽"><a href="#带宽" class="headerlink" title="带宽"></a>带宽</h4><p>本来指信号具有的频带宽度，单位赫(Hz)</p>
<p>计算机网络中，带宽表示网络中某通道传送数据的能力，即单位时间内网络中的某信道所能通过的”最高数据率”，单位bit&#x2F;s</p>
<p>在带宽的上述两种表示中，前者为频域称谓，后者为时域称谓，本质相同。</p>
<p>一条通信链路的带宽越宽，最高数据率越高。</p>
<h4 id="吞吐量"><a href="#吞吐量" class="headerlink" title="吞吐量"></a>吞吐量</h4><p>在单位时间内通过某个网络(或信道、接口)的数据量</p>
<p>吞吐量受网络的带宽或网络的额定速率的限制</p>
<p>表示单位时间实际传输数据量</p>
<h4 id="时延"><a href="#时延" class="headerlink" title="时延"></a>时延</h4><p>数据(一个报文或分组，甚至比特)从网络(或链路)的一端传送到另一端所需的时间，单位s</p>
<p>别称：延迟、迟延</p>
<p>网络中时延由以下几个不同部分组成：1、发送时延，2、传播时延，3、处理时延，4、排队时延</p>
<h5 id="发送时延"><a href="#发送时延" class="headerlink" title="发送时延"></a>发送时延</h5><p>别称：传输时延</p>
<p>发送数据时，数据帧从结点进入到传输媒体所需要的时间</p>
<p>即从发送数据帧的第一个比特算起，到该帧的最后一个比特发送完毕的时间</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211027082407899.png" alt="image-20211027082407899" style="zoom:50%;" />

<h5 id="传播时延"><a href="#传播时延" class="headerlink" title="传播时延"></a>传播时延</h5><p>电磁波在信道中需要传播一定的距离而花费的时间</p>
<p>电磁波在自由空间的传播速率是光速</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211027082713501.png" alt="image-20211027082713501" style="zoom:50%;" />

<h5 id="处理时延"><a href="#处理时延" class="headerlink" title="处理时延"></a>处理时延</h5><p>主机或路由器在收到分组时，为处理分组所花费的时间</p>
<h5 id="排队时延"><a href="#排队时延" class="headerlink" title="排队时延"></a>排队时延</h5><p>分组在路由器输入、输出队列中排队等待处理所经过的时间</p>
<p>排队时延的长短往往取决于网络中当时的通信量</p>
<p>队列溢出时，相当于排队时延无限大</p>
<h5 id="总时延"><a href="#总时延" class="headerlink" title="总时延"></a>总时延</h5><p>总时延 &#x3D; 发送时延 + 传播时延 + 处理时延 + 排队时延</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211027083752130.png" alt="image-20211027083752130" style="zoom:50%;" />

<p>对于告诉网络链路，我们提高的仅仅是发送速率而不是传输速率</p>
<h4 id="时延带宽积"><a href="#时延带宽积" class="headerlink" title="时延带宽积"></a>时延带宽积</h4><p>别称：以比特为单位的链路长度</p>
<p>时延带宽积 &#x3D; 传播时延 * 带宽</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211027085754531.png" alt="image-20211027085754531" style="zoom:33%;" />

<h4 id="往返时间-RTT-Round-Trip-Time"><a href="#往返时间-RTT-Round-Trip-Time" class="headerlink" title="往返时间 RTT(Round-Trip Time)"></a>往返时间 RTT(Round-Trip Time)</h4><p>从发送方发送数据开始，到发送方收到来自接收方的确认，总共经历的时间</p>
<p>互联网中，RTT还包括各中间结点的处理时延、排队时延以及转发数据时的发送时延</p>
<p>使用卫星通信时，RTT相对较长，是很重要的一个性能指标</p>
<p>　<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211027090258944.png" alt="image-20211027090258944" style="zoom:33%;" /></p>
<h4 id="利用率"><a href="#利用率" class="headerlink" title="利用率"></a>利用率</h4><p>分为信道利用率和网络利用率</p>
<p>信道利用率：某信道有百分之几的时间是被利用的(有数据通过)，完全空闲的信道的利用率是零。</p>
<p>网络利用率：全网络的信道利用率的加权平均值</p>
<p>信道利用率并非越高越好，某信道的利用率增大，该信道引起的时延增加</p>
<h5 id="时延与网络利用率的关系"><a href="#时延与网络利用率的关系" class="headerlink" title="时延与网络利用率的关系"></a>时延与网络利用率的关系</h5> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211027090652813.png" alt="image-20211027090652813" style="zoom:33%;" />

 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211027090718809.png" alt="image-20211027090718809" style="zoom:33%;" />

<h3 id="1-6-2-计算机网络的非性能特征"><a href="#1-6-2-计算机网络的非性能特征" class="headerlink" title="1.6.2 计算机网络的非性能特征"></a>1.6.2 计算机网络的非性能特征</h3><p>费用、质量、标准化、可靠性、可扩展性和可升级性、易于管理和维护</p>
<h2 id="1-7-计算机网络的体系结构"><a href="#1-7-计算机网络的体系结构" class="headerlink" title="1.7 计算机网络的体系结构"></a>1.7 计算机网络的体系结构</h2><h3 id="国际标准"><a href="#国际标准" class="headerlink" title="国际标准"></a>国际标准</h3><p>开放系统互联参考模型 OSI&#x2F;RM  (Open Systems Interconnection Reference Model)</p>
<p>TCP&#x2F;IP</p>
<h3 id="协议与划分层次"><a href="#协议与划分层次" class="headerlink" title="协议与划分层次"></a>协议与划分层次</h3><p>计算机网络中的数据交换必须遵守事先约定好的规则。<br>这些规则明确规定了所交换的数据的格式以及有关的同步问题（同步含有时序的意思）。<br>网络协议 (network protocol)，简称为协议，是为进行网络中的数据交换而建立的规则、标准或约定。</p>
<h4 id="网络协议的三个组成要素"><a href="#网络协议的三个组成要素" class="headerlink" title="网络协议的三个组成要素"></a>网络协议的三个组成要素</h4><p>语法：数据与控制信息的结构或格式</p>
<p>语义：需要发出何种控制信息，完成何种动作以及做出何种响应</p>
<p>同步：时间实现顺序的详细说明</p>
<h4 id="协议的两种形式"><a href="#协议的两种形式" class="headerlink" title="协议的两种形式"></a>协议的两种形式</h4><p>for people：文字描述</p>
<p>for computers：程序代码</p>
<p>目的：对网络上信息交换过程做出精确的解释</p>
<h4 id="网络协议各层主要功能"><a href="#网络协议各层主要功能" class="headerlink" title="网络协议各层主要功能"></a>网络协议各层主要功能</h4><p>① 差错控制： 使相应层次对等方的通信更加可靠。<br>② 流量控制： 发送端的发送速率必须使接收端来得及接收，不要太快。<br>③ 分段和重装 ： 发送端将要发送的数据块划分为更小的单位，在接收端将其还原。<br>④ 复用和分用： 发送端几个高层会话复用一条低层的连接，在接收端再进行分用。<br>⑤ 连接建立和释放： 交换数据前先建立一条逻辑连接，数据传送结束后释放连接。  </p>
<h4 id="计算机网络的体系结构"><a href="#计算机网络的体系结构" class="headerlink" title="计算机网络的体系结构"></a>计算机网络的体系结构</h4><p>计算机网络的体系结构 (architecture) 是计算机网络的各层及其协议的集合。<br>体系结构就是这个计算机网络及其部件所应完成的功能的精确定义。<br>实现 (implementation) 是遵循这种体系结构的前提下用何种硬件或软件完成这些功能的问题。<br>体系结构是抽象的，而实现则是具体的，是真正在运行的计算机硬件和软件。  </p>
<h3 id="1-7-3-具有五层协议的体系结构"><a href="#1-7-3-具有五层协议的体系结构" class="headerlink" title="1.7.3 具有五层协议的体系结构"></a>1.7.3 具有五层协议的体系结构</h3><p>OSI 的七层协议体系结构的概念清楚，理论也较完整，但它既复杂又不实用。<br>TCP&#x2F;IP 是四层体系结构：应用层、运输层、网际层和网络接口层。但最下面的网络接口层并没有具体内容。<br>因此往往采取折中的办法，即综合 OSI 和TCP&#x2F;IP 的优点，采用一种只有五层协议的体系结构。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211027092726945.png" alt="image-20211027092726945" style="zoom:33%;" />

<h4 id="五层协议的体系结构"><a href="#五层协议的体系结构" class="headerlink" title="五层协议的体系结构"></a>五层协议的体系结构</h4><p>应用层 (application layer)<br>    通过应用进程间的交互来完成特定网络应用<br>    如 域名系统DNS，万维网HTTP协议，电子邮件SMTP协议<br>运输层 (transport layer)<br>    向两台主机中进程之间的通信提供通用的数据传输服务<br>    传输控制协议TCP、用户数据报协议UDP<br>网络层 (network layer)<br>    为分组交换网上的不同主机提供通信服务；选择合适的路由<br>    网际协议IP和路由选择协议<br>数据链路层 (data link layer)<br>    两个相邻节点之间传送数据<br>物理层 (physical layer)<br>    传输数据单位为比特，要考虑多大的电压代表1或0<br>    不包含物理媒介  </p>
<h4 id="OSI七层协议的体系结构"><a href="#OSI七层协议的体系结构" class="headerlink" title="OSI七层协议的体系结构"></a>OSI七层协议的体系结构</h4><p>应用层<br>    网络服务与最终用户的一个借口<br>    如域名系统DNS，万维网HTTP，电子邮件SMTP<br>表示层<br>    数据的表示、安全、压缩<br>    把应用层提供的信息变换为能够共同理解的形式，提供字符代码、数据格式、控制信息格式、加密等的统一表示。表示层仅对应用层信息内容的形式进行变换，而不改变其内容本身。<br>会话层<br>    建立、管理、终止会话<br>    对应主机进程，指本地主机与远程主机正在进行的会话<br>    依靠传输层以下的通信功能使数据传送功能在开放系统间有效地进行  </p>
<h4 id="主机1向主机2发送数据"><a href="#主机1向主机2发送数据" class="headerlink" title="主机1向主机2发送数据"></a>主机1向主机2发送数据</h4><p>主机1：</p>
<p>应用进程数据先传送到应用层<br>    加上应用层首部，成为 应用层 PDU<br>        PDU (Protocol Data Unit)：协议数据单元。<br>        OSI 参考模型把对等层次之间传送的数据单位称为该层的协议数据单元 PDU。  </p>
<p>应用层 PDU 再传送到运输层<br>    加上运输层首部，成为运输层报文  </p>
<p>运输层报文再传送到网络层<br>    加上网络层首部，成为 IP 数据报（或分组）  </p>
<p>IP 数据报再传送到数据链路层<br>    加上链路层首部和尾部，成为数据链路层帧  </p>
<p>数据链路层帧再传送到物理层<br>    最下面的物理层把比特流传送到物理媒体  </p>
<p>电信号（或光信号）在物理媒体中传播<br>    从发送端物理层传送到接收端物理层  </p>
<p>主机2：</p>
<p>物理层接收到比特流，上交给数据链路层  </p>
<p>数据链路层剥去帧首部和帧尾部，取出数据部分，上交给网络层  </p>
<p>网络层剥去首部，取出数据部分，上交给运输层  </p>
<p>运输层剥去首部，取出数据部分，上交给应用层  </p>
<p>应用层剥去首部，取出应用程序数据，上交给应用进程  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211027093552000.png" alt="image-20211027093552000" style="zoom:33%;" />

<p>OSI 参考模型把对等层次之间传送的数据单位称为该层的协议数据单元 PDU (Protocol Data Unit)。这个名词现已被许多非 OSI 标准采用。<br>任何两个同样的层次把数据（即数据单元加上控制信息）通过水平虚线直接传递给对方。这就是所谓的“对等层” (peer layers)之间的通信。<br>各层协议实际上就是在各个对等层之间传递数据时的各项规定。</p>
<h3 id="1-7-4-实体、协议、服务和服务访问点"><a href="#1-7-4-实体、协议、服务和服务访问点" class="headerlink" title="1.7.4 实体、协议、服务和服务访问点"></a>1.7.4 实体、协议、服务和服务访问点</h3><h4 id="实体-entity-表示任何可发送或接受信息的硬件或软件进程"><a href="#实体-entity-表示任何可发送或接受信息的硬件或软件进程" class="headerlink" title="实体(entity)表示任何可发送或接受信息的硬件或软件进程"></a>实体(entity)表示任何可发送或接受信息的硬件或软件进程</h4><h4 id="协议是控制两个对等实体进行通信的规则的集合"><a href="#协议是控制两个对等实体进行通信的规则的集合" class="headerlink" title="协议是控制两个对等实体进行通信的规则的集合"></a>协议是控制两个对等实体进行通信的规则的集合</h4><p>​	语法规则定义了信息的格式，语义规则定义了发送者或接收者所要完成的操作<br>在协议的控制下，两个对等实体间的通信使得本层能够向上一层提供服务。</p>
<h4 id="要实现本层协议，还需要使用下层所提供的服务。"><a href="#要实现本层协议，还需要使用下层所提供的服务。" class="headerlink" title="要实现本层协议，还需要使用下层所提供的服务。"></a>要实现本层协议，还需要使用下层所提供的服务。</h4><p>协议的实现保证了能够向上一层提供服务</p>
<p>本层的服务用户只能看见服务而无法看见下层的协议，下面的协议对上面的服务用户是透明的</p>
<p>协议：水平的，控制对等实体之间通信的规则</p>
<p>服务：垂直的，服务是由下层向上层通过层间接口提供</p>
<p>上层使用下层提供的服务必须通过服务原语</p>
<h4 id="服务访问点"><a href="#服务访问点" class="headerlink" title="服务访问点"></a>服务访问点</h4><p>同一系统相邻两层的实体进行交互的地方，成为服务访问点SAP(Service Access Point)</p>
<p>服务访问点SAP是一个抽象的概念，实际是一个逻辑接口</p>
<p>OSI把层与层之间交换数据的单位称为服务数据单元SDU(Service Data Unit)</p>
<p>SDU可以与PDU不一样，例如：可以是多个SDU合成为一个PDU，也可以是一个SDU划分成为几个PDU</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211101091158907.png" alt="image-20211101091158907" style="zoom:50%;" />

<h1 id="第二章-物理层"><a href="#第二章-物理层" class="headerlink" title="第二章 物理层"></a>第二章 物理层</h1><h2 id="2-1-物理层的基本概念"><a href="#2-1-物理层的基本概念" class="headerlink" title="2.1 物理层的基本概念"></a>2.1 物理层的基本概念</h2><p>物理层考虑的是怎样才能在连接计算机的各种传输媒体上传输数据比特流，而不是指具体的传输媒体</p>
<p>物理层的作用是要尽可能地屏蔽掉不同传输媒体和通信手段的差异，使数据链路层感觉不到这些差异</p>
<p>用于物理层的协议也常称为物理层规程(procedure)</p>
<h2 id="2-2-数据通信的基础知识"><a href="#2-2-数据通信的基础知识" class="headerlink" title="2.2 数据通信的基础知识"></a>2.2 数据通信的基础知识</h2><h3 id="2-2-1-数据通信的基本概念"><a href="#2-2-1-数据通信的基本概念" class="headerlink" title="2.2.1 数据通信的基本概念"></a>2.2.1 数据通信的基本概念</h3><p>通信的目的就是传递信息。</p>
<p><strong>信源</strong>：一次通信中产生和发送信息的一端</p>
<p><strong>信宿</strong>：一次通信中接收信息的一端</p>
<p>信源和信宿之间要有通信线路才能互相通信</p>
<p><strong>信道</strong>：信源和信宿之间的通信线路</p>
<h4 id="信道"><a href="#信道" class="headerlink" title="信道"></a>信道</h4><p>**信道(channel)**——一般用来表示向一个方向传送信息的媒体。</p>
<p>​	一条通信电路往往包含发送信道和接收信道。</p>
<p>**单向通信(单工通信)**——只能有一个方向的通信而没有反方向的交互。<br>    例：无线电广播</p>
<p>**双向交替通信(半双工通信)**——通信的双方都可以发送信息，但不能双方同时发送(当然也就不能同时接收)</p>
<p>**双向同时通信(全双工通信)**——通信的双方可以同时发送和接收信息</p>
<h4 id="数据通信系统"><a href="#数据通信系统" class="headerlink" title="数据通信系统"></a>数据通信系统</h4><h5 id="源系统"><a href="#源系统" class="headerlink" title="源系统"></a>源系统</h5><p>**源点(信源)**：源点设备产生要传输的数据，例如计算机键盘输入汉字通过计算机产生输出的数字比特流。</p>
<p><strong>发送器</strong>：数字比特流要经过发送器编码后才能在传输系统中传输，例如：调制器</p>
<h5 id="传输系统"><a href="#传输系统" class="headerlink" title="传输系统"></a>传输系统</h5><p>传输系统可以是传输线，也可以是复杂的网络系统</p>
<h5 id="目的系统"><a href="#目的系统" class="headerlink" title="目的系统"></a>目的系统</h5><p>**终点(信宿)**：终点设备将数字比特流转换成信息输出，例如把汉字显示在屏幕上</p>
<p><strong>接收器</strong>：接收器把来自传输线路上的模拟信号进行解调，还原出数字比特流。例如：解调器</p>
<h4 id="数据通信系统的模型"><a href="#数据通信系统的模型" class="headerlink" title="数据通信系统的模型"></a>数据通信系统的模型</h4> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211101110329013.png" alt="image-20211101110329013" style="zoom:50%;" />

<h4 id="常用术语"><a href="#常用术语" class="headerlink" title="常用术语"></a>常用术语</h4><p>数据在信道中以电信号的形式传送，电信号分为：模拟信号和数字信号</p>
<p>​	模拟信号(analogous signal)：代表信息的参数的取值是连续的</p>
<p>​	数字信号(digital signal)：代表信息的参数的取值是离散的</p>
<p>​	码元(code)：在使用时间域(或简称为时域)的波形表示数字信号时，代表不同离散数值的基本波形</p>
<p>​	使用二进制编码时，只有两种不同的码元(代表0和1)</p>
<p>数据(data)：运送信息(话音、文字、图像等)的实体</p>
<p>信号(signal)：数据的电气的或电磁的表现</p>
<p>调制：把数字信号转换为模拟信号的过程</p>
<p>解调：把模拟信号转换为数字信号的过程</p>
<h4 id="模拟的和数字的数据、信号"><a href="#模拟的和数字的数据、信号" class="headerlink" title="模拟的和数字的数据、信号"></a>模拟的和数字的数据、信号</h4> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211101111321866.png" alt="image-20211101111321866" style="zoom:50%;" />

 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211101111752727.png" alt="image-20211101111752727" style="zoom:50%;" />

<h4 id="有关信道的几个基本概念"><a href="#有关信道的几个基本概念" class="headerlink" title="有关信道的几个基本概念"></a>有关信道的几个基本概念</h4><p>调制&#x2F;解调技术：在计算机提供的二进制数字信号与电话网提供的模拟信号之间进行转换，这类的技术统称为调制&#x2F;解调技术</p>
<p>基带信号(即基本频带信号)：来自信源的信号，就是将数字信号1或0直接用两种不同的电压来表示，然后送到线路上去传输基带信号</p>
<p>包含较多低频成分，无法直接在电话网中传输，因为电话网只能提供300~3400Hz的带宽，在发送端将基带信号转换成适合传输的音频信号为调制，在接收端再将音频信号转换成基带信号为解调</p>
<p><strong>调制分为几大类：</strong></p>
<p>基带调制：仅对基带信号的波形进行变换，使它能够与信道特性相适应，变换后的信号仍然是基带信号，把这种过程称为编码(coding)</p>
<p>带通调制：使用载波(carrier)进行调制，把基带信号的频率范围搬移到较高的频段，并转移为模拟信号，这样就能够更好地在模拟信道中传输，经过载波调制后的信号称为带通信号。</p>
<h3 id="2-2-2-数字信号编码"><a href="#2-2-2-数字信号编码" class="headerlink" title="2.2.2 数字信号编码"></a>2.2.2 数字信号编码</h3><h4 id="常用编码方式"><a href="#常用编码方式" class="headerlink" title="常用编码方式"></a>常用编码方式</h4><h5 id="不归零码"><a href="#不归零码" class="headerlink" title="不归零码"></a>不归零码</h5><p>正电平代表1，负电平代表0</p>
<p>在一个码元的全部时间内，电压保持恒定</p>
<p>连续发送多个1码和0码时，码元之间没有间隙，不容易区分</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211101130630891.png" alt="image-20211101130630891" style="zoom:50%;" />

<h5 id="归零码"><a href="#归零码" class="headerlink" title="归零码"></a>归零码</h5><p>正脉冲代表1，负脉冲代表0</p>
<p>在一个码元的全部时间内，非零电压的持续时间小于一个码元的时间</p>
<p>在一个码元的后半部分时间内，电压总是归于零的</p>
<p>好处：解决了不归零码在连续发送“码”或“0”码不容易区分的问题</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211101130815200.png" alt="image-20211101130815200" style="zoom:50%;" />

<h5 id="曼彻斯特编码"><a href="#曼彻斯特编码" class="headerlink" title="曼彻斯特编码"></a>曼彻斯特编码</h5><p>位周期中心的向上跳变代表0，位周期中心的向下跳变代表1，但也可以反过来定义</p>
<h5 id="差分曼彻斯特编码"><a href="#差分曼彻斯特编码" class="headerlink" title="差分曼彻斯特编码"></a>差分曼彻斯特编码</h5><p>在每一位的中心处始终都有跳变</p>
<p>利用每个码元的开始时有无跳变来表示0或1</p>
<p>位开始边界有跳变代表0，没有跳变代表1</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211101131102286.png" alt="image-20211101131102286" style="zoom:50%;" />

 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211101131642620.png" alt="image-20211101131642620" style="zoom:50%;" />

<p>从信号波形中可以看出，曼彻斯特编码和差分曼彻斯特编码产生的信号频率比不归零制高</p>
<p>从自同步能力来看，不归零制不能从信号波形本身中提取信号时钟频率(这叫做没有自同步能力)，而曼彻斯特编码和差分曼彻斯特编码具有自同步能力</p>
<h3 id="2-2-3-数字调制技术"><a href="#2-2-3-数字调制技术" class="headerlink" title="2.2.3 数字调制技术"></a>2.2.3 数字调制技术</h3><p>选取一个适合于在线路上传输的正弦波作为载波，让载波的某些特性(幅度、频率、相位)随基带信号的变化而变化（即波形变换）。</p>
<h4 id="基本的三种二元制调制方法："><a href="#基本的三种二元制调制方法：" class="headerlink" title="基本的三种二元制调制方法："></a>基本的三种二元制调制方法：</h4><p>​	调幅(AM)：载波的振幅随基带数字信号而变化。<br>​	调频(FM)： 载波的频率随基带数字信号而变化。<br>​	调相(PM)： 载波的初始相位随基带数字信号而变化。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211103161753091.png" alt="image-20211103161753091" style="zoom:50%;" />

<p>调幅(AM)：实现起来简单, 但抗干扰性能差<br>调频(FM)：抗干扰性能好, 但占用带宽较大<br>调相(PM)：抗干扰性能最好，且相位的变化也可以同步发送器和接收器的时钟  </p>
<p>上述三种调制方式，一个码元仅包含2个状态，即1个码元携带1bit信息<br>想要让1个码元携带多位信息，必须采用多元制混合调制方法</p>
<h4 id="正交振幅调制QAM-Quadrature-Amplitude-Modulation"><a href="#正交振幅调制QAM-Quadrature-Amplitude-Modulation" class="headerlink" title="正交振幅调制QAM(Quadrature Amplitude Modulation)"></a>正交振幅调制QAM(Quadrature Amplitude Modulation)</h4> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211103164839814.png" alt="image-20211103164839814" style="zoom:50%;" />

<h4 id="脉冲编码调制PCM-Pulse-Code-Modulation"><a href="#脉冲编码调制PCM-Pulse-Code-Modulation" class="headerlink" title="脉冲编码调制PCM(Pulse Code Modulation)"></a>脉冲编码调制PCM(Pulse Code Modulation)</h4><p>话音、图像等模拟信号在时间上和取值上都是连续的，对其进行数字信号编码，是将其转换成一系列在时间和取值上都是离散的二进制数码脉冲，最常用的编码方法就是脉冲编码调制 PCM (Pulse Code Modulation)</p>
<p>现在的数字传输系统均采用脉码调制 PCM 体制。  </p>
<p>PCM包括三个步骤：采样、量化、编码</p>
<h5 id="采样"><a href="#采样" class="headerlink" title="采样"></a>采样</h5><p>采样：实现时间上的离散化<br>    方法：每隔一定时间间隔，取模拟信号的当前值作为样本，该样本代表了模拟信号在某一时刻的瞬时值</p>
<p>采样的依据：奈奎斯特(Nyquist)采样定理<br>    若对连续变化的模拟信号进行周期性的采样，如果采样速率大于模拟信号最高频率的二倍，则可以用得到的样本空间恢复原来的模拟信号，即：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211103165909706.png" alt="image-20211103165909706" style="zoom:50%;" />

<p>话音信号带宽在0.3~3.4kHz内，采样频率定位8kHz，即采样周期为125μs</p>
<h5 id="量化"><a href="#量化" class="headerlink" title="量化"></a>量化</h5><p>量化：使采样值在取值上离散化<br>    方法：将原始信号的取值范围划分为若干个等级，即每个采样值“取整”到离它最近的一个等级上。<br>    量化后的抽样信号会有所失真，表现为噪声<br>    离散值的个数(等级划分)决定了量化的精度<br>    我国电话信号的PCM机制中，量化等级为256，即8位</p>
<h5 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h5><p>编码：将量化后的采样值用一定位数的二进制数码来表示<br>    编码的位数和量化的级数有关，若量化级数为N，则每个采样值就可以编码成$Log_2N$的二进制码<br>    我国的PCM体制的编码位数是8，即每个脉冲信号为8bit信息，由于每秒8000个脉冲，话音的标准编码速率为64Kb&#x2F;s</p>
<h5 id="脉冲编码调制PCM例子"><a href="#脉冲编码调制PCM例子" class="headerlink" title="脉冲编码调制PCM例子"></a>脉冲编码调制PCM例子</h5> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211103192128540.png" alt="image-20211103192128540" style="zoom:50%;" />

 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211103192254649.png" alt="image-20211103192254649" style="zoom:50%;" />

<h3 id="2-2-4-信道的极限容量"><a href="#2-2-4-信道的极限容量" class="headerlink" title="2.2.4 信道的极限容量"></a>2.2.4 信道的极限容量</h3><p>任何实际的信道都不是理想的，在传输信号时会产生各种失真以及带来多种干扰</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211103192538067.png" alt="image-20211103192538067" style="zoom:50%;" />

<p>使失真严重的因素：码元的传输速率高、信号传输距离远、噪声干扰大、传输媒体质量差</p>
<p>限制码元在信道上传输速率的因素：信道能够通过的频率范围、信噪比</p>
<h4 id="信道能够通过的频率范围"><a href="#信道能够通过的频率范围" class="headerlink" title="信道能够通过的频率范围"></a>信道能够通过的频率范围</h4><p>具体的信道能够通过的频率范围(信道的带宽Hz)是有限的，信号中的许多高频分量往往不能通过信道。</p>
<p><strong>理想低通信道</strong>：信号的所有低频分量，只要频率不超过某个上限，都能够不失真地通过信道。</p>
<p><strong>理想带通信道</strong>：信号的频率在某个范围之间的频率分量能够不失真地通过信道，其他分量不能通过。</p>
<h5 id="奈氏准则"><a href="#奈氏准则" class="headerlink" title="奈氏准则"></a>奈氏准则</h5><p>在假定的理想条件下，为了避免码间串扰，码元的传输速率的上限值</p>
<p>理想低通信道的最高码元传输速率 &#x3D; 2W码元&#x2F;秒 (码元&#x2F;秒 &#x3D; 波特率)<br>    其中W是带宽，单位是赫(Hz)<br>即，每赫带宽的理想低通信道的最高码元传输速率是每秒2个码元</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211103200350325.png" alt="image-20211103200350325" style="zoom:50%;" />

<p>理想带通信道的最高码元传输速率 &#x3D; W码元&#x2F;秒<br>即，每赫带宽的理想低通信道的最高码元传输速率是每秒1个码元</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211103200512329.png" alt="image-20211103200512329" style="zoom:50%;" />

<h5 id="比特率与波特率"><a href="#比特率与波特率" class="headerlink" title="比特率与波特率"></a>比特率与波特率</h5><p>比特率：数据传输速率，单位”比特&#x2F;秒“<br>波特率：码元传输速率，单位”码元&#x2F;秒“</p>
<p>若1码元携带1bit信息量，则比特率 &#x3D; 波特率<br>若1码元携带nbit信息量，则比特率 &#x3D; n *波特率</p>
<p>若码元状态数位N，则n &#x3D; $log_2N$<br>    N &#x3D; 2，一种状态表示1，一种状态表示0<br>    N &#x3D; 4，可表示00，01，11，10</p>
<h5 id="码间串扰"><a href="#码间串扰" class="headerlink" title="码间串扰"></a>码间串扰</h5><p>在任何信道中，码元传输的速率是有上限的，否则就会出现码间串扰的问题，使接收端对码元的判决(即识别)成为不可能</p>
<p>如果信道的频带越宽，也就是能够通过的信号高频分量越多，那么就可以用更高的速率传送码元而不出现码间串扰</p>
<h4 id="信噪比"><a href="#信噪比" class="headerlink" title="信噪比"></a>信噪比</h4><p>噪声存在于所有的电子设备和通信信道中</p>
<p>噪声是随机产生的，它的瞬时值有时会很大。因此噪声会使接收端对码元的判决产生错误。</p>
<p>但噪声的影响是相对的。如果信号相对较强，那么噪声的影响就相对较小</p>
<p>信噪比就是信号的平均功率和噪声的平均功率之比。常记为S&#x2F;N，并用分贝(dB)作为度量单位，即：<br>$$<br>信噪比(dB) &#x3D; 10 log_{10}(S&#x2F;N)	(dB)<br>$$<br>信道的极限信息传输速率C可表示为(香农公式)：<br>$$<br>C &#x3D; Wlog_2(1+S&#x2F;N) (bit&#x2F;s)<br>$$<br>其中，W为信道的带宽(Hz)，S为信道内所传信号的平均功率，N为信道内部的高斯噪声功率</p>
<p>香农公式表明：</p>
<p>信道的带宽或信道中的信噪比越大，则信息的极限传输速率就越高。<br>只要信息传输速率低于信道的极限信息传输速率，就一定可以找到某种办法来实现无差错的传输。<br>若信道带宽 W 或信噪比 S&#x2F;N 没有上限（当然实际信道不可能是这样的），则信道的极限信息传输速率 C 也就没有上限。<br>实际信道上能够达到的信息传输速率要比香农的极限传输速率低不少。</p>
<h4 id="请注意"><a href="#请注意" class="headerlink" title="请注意"></a>请注意</h4><p>对于频带宽度已确定的信道，如果信噪比不能再提高了，并且码元传输速率也达到了上限值，那么还有办法提高信息的传输速率。<br>这就是： 用编码的方法让每一个码元携带更多比特的信息量。<br>通信领域的专家致力于寻找新的信号编码和调制方法</p>
<h2 id="2-3-物理层下面的传输媒体"><a href="#2-3-物理层下面的传输媒体" class="headerlink" title="2.3 物理层下面的传输媒体"></a>2.3 物理层下面的传输媒体</h2><p>传输媒体也称为传输介质或传输媒介， 它就是数据传输系统中在发送器和接收器之间的物理通路。<br>传输媒体可分为两大类，即导引型传输媒体和非导引型传输媒体。<br>在导引型传输媒体中，电磁波被导引沿着固体媒体（铜线或光纤）传播。<br>非导引型传输媒体就是指自由空间。 在非导引型传输媒体中， 电磁波的传输常称为无线传输。</p>
<h3 id="2-3-1-导引型传输媒体"><a href="#2-3-1-导引型传输媒体" class="headerlink" title="2.3.1 导引型传输媒体"></a>2.3.1 导引型传输媒体</h3><h4 id="双绞线"><a href="#双绞线" class="headerlink" title="双绞线"></a>双绞线</h4><p>古老但最常用的传输媒体。<br>电话系统使用的就是双绞线。<br>绞合可减少对相邻双绞线的电磁干扰。<br>模拟传输和数字传输都可以使用双绞线，其通信距离一般为几到十几公里。<br>带宽依赖于线的<strong>粗细</strong>和<strong>传输距离</strong><br>屏蔽双绞线 STP (Shielded Twisted Pair)（带金属屏蔽层）<br>无屏蔽双绞线 UTP (Unshielded Twisted Pair)  </p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211107232131083.png" alt="image-20211107232131083" style="zoom:67%;" />

<p>1991年，美国电子工业协会 EIA 和电信行业协会联合发布了一个用于室内传送数据的无屏蔽双绞线和屏蔽双绞线的标准 EIA&#x2F;TIA-568。<br>1995年将布线标准更新为 EIA&#x2F;TIA-568-A。<br>此标准规定了 5 个种类的 UTP 标准（从 1 类线到 5 类线）。<br>对传送数据来说，现在最常用的 UTP 是5类线（Category 5 或 CAT5） 。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211107232643321.png" alt="image-20211107232643321" style="zoom:50%;" />

<h4 id="同轴电缆"><a href="#同轴电缆" class="headerlink" title="同轴电缆"></a>同轴电缆</h4><p>同轴电缆具有很好的抗干扰特性，被广泛用于传输较高速率的数据。<br>同轴电缆的带宽取决于电缆的质量。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211107232734687.png" alt="image-20211107232734687" style="zoom:50%;" />

<p>基带同轴电缆<br>    50Ω用于数字传输<br>    以10Mb&#x2F;s可将基带数字信号，粗缆传送500米，细缆传送180米<br>    局域网发展初期常用<br>宽带同轴电缆<br>    75Ω用于模拟传输<br>    高质量同轴电缆带宽接近1GHz<br>    有线电视常用  </p>
<h4 id="光缆"><a href="#光缆" class="headerlink" title="光缆"></a>光缆</h4> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108122542880.png" alt="image-20211108122542880" style="zoom:50%;" />

<h5 id="多模光纤"><a href="#多模光纤" class="headerlink" title="多模光纤"></a>多模光纤</h5><p>可以存在多条不同角度入射的光线在一条光纤中传输。这种光纤就称为多模光纤。</p>
<p>传输中光脉冲会逐渐展宽，造成失真，适合短距离传输 </p>
<h5 id="单模光纤"><a href="#单模光纤" class="headerlink" title="单模光纤"></a>单模光纤</h5><p>若光纤的直径减小到只有一个光的波长，则光纤就像一根波导那样，它可使光线一直向前传播，而不会产生多次反射。这样的光纤称为单模光纤  </p>
<p>使用昂贵的半导体激光源，光脉冲的衰耗小，适合长距离传输  </p>
<h5 id="光纤优点"><a href="#光纤优点" class="headerlink" title="光纤优点"></a>光纤优点</h5><p>(1) 通信容量非常大。<br>(2) 传输损耗小，中继距离长。<br>(3) 抗雷电和电磁干扰性能好。<br>(4) 无串音干扰，保密性好。<br>(5) 体积小，重量轻。  </p>
<h3 id="2-3-2-非导引型传输媒体"><a href="#2-3-2-非导引型传输媒体" class="headerlink" title="2.3.2 非导引型传输媒体"></a>2.3.2 非导引型传输媒体</h3><p>将自由空间称为“非导引型传输媒体”。  </p>
<p>短波通信（即高频通信） 主要是靠电离层的反射，但短波信道的通信质量较差，传输速率低。  (波长100米<del>10米之间，频率范围3兆赫</del>30兆赫)</p>
<p>微波通信由于地球表面的弯曲，信号的直线传输有限，需要建微波中继站。<br>    波长为1m至0.1mm， 频率范围是300 MHz~300 GHz<br>    传统微波通信有两种方式：地面微波接力通信、卫星通信</p>
<h4 id="2-3-2-电信领域使用的电磁波的频谱"><a href="#2-3-2-电信领域使用的电磁波的频谱" class="headerlink" title="2.3.2 电信领域使用的电磁波的频谱"></a>2.3.2 电信领域使用的电磁波的频谱</h4> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108124127421.png" alt="image-20211108124127421" style="zoom:50%;" />

<h2 id="2-4-信道复用技术"><a href="#2-4-信道复用技术" class="headerlink" title="2.4 信道复用技术"></a>2.4 信道复用技术</h2><p>复用(multiplexing)是将多路信号组合在一条物理信道上进行传输，在接收端再将各路信号分离开来，提高通信线路的利用率</p>
<h3 id="2-4-1-频分复用FDM-Frequency-Division-Multiplexing"><a href="#2-4-1-频分复用FDM-Frequency-Division-Multiplexing" class="headerlink" title="2.4.1 频分复用FDM(Frequency Division Multiplexing)"></a>2.4.1 频分复用FDM(Frequency Division Multiplexing)</h3><p>频分复用的所有用户在同样的时间占用不同的带宽资源（请注意，这里的“带宽”是频率带宽而不是数据的发送速率）。   <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108124602877.png" alt="image-20211108124602877" style="zoom:50%;" /></p>
<h3 id="2-4-2-时分复用TDM-Time-Division-Multiplexing"><a href="#2-4-2-时分复用TDM-Time-Division-Multiplexing" class="headerlink" title="2.4.2 时分复用TDM(Time Division Multiplexing)"></a>2.4.2 时分复用TDM(Time Division Multiplexing)</h3><p>时分复用则是将时间划分为一段段 等长的时分复用帧（TDM 帧）。每一个时分复用的用户在每一个 TDM帧中占用固定序号的时隙。<br>每一个用户所占用的时隙是周期性地出现（其周期就是 TDM 帧的长度）。<br>TDM 信号也称为等时(isochronous)信号。<br>时分复用的所有用户是在不同的时间占用同样的频带宽度。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108124845056.png" alt="image-20211108124845056" style="zoom:50%;" />

<p>时分复用可能会造成线路资源的浪费</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108124931747.png" alt="image-20211108124931747" style="zoom:50%;" />

<h5 id="统计时分复用STDM-Statistic-TDM"><a href="#统计时分复用STDM-Statistic-TDM" class="headerlink" title="统计时分复用STDM(Statistic TDM)"></a>统计时分复用STDM(Statistic TDM)</h5> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108125107251.png" alt="image-20211108125107251" style="zoom:50%;" />

<h3 id="2-4-3-波分复用WDM-Wavelength-Division-Multiplexing"><a href="#2-4-3-波分复用WDM-Wavelength-Division-Multiplexing" class="headerlink" title="2.4.3 波分复用WDM(Wavelength Division Multiplexing)"></a>2.4.3 波分复用WDM(Wavelength Division Multiplexing)</h3> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108125419584.png" alt="image-20211108125419584" style="zoom:50%;" />

<h3 id="2-4-4-码分复用CDM-Code-Division-Multiplexing"><a href="#2-4-4-码分复用CDM-Code-Division-Multiplexing" class="headerlink" title="2.4.4 码分复用CDM(Code Division Multiplexing)"></a>2.4.4 码分复用CDM(Code Division Multiplexing)</h3><p>常用的名词时码分多址CDMA(Code Division Multiple Access)</p>
<p>每个用户在同样的时间使用同样的频带进行通信。<br>各用户使用经过特殊挑选的不同码型，因此彼此不会造成干扰。<br>这种系统发送的信号有很强的抗干扰能力，其频谱类似于白噪声，不易被敌人发现。<br>特别在无线局域网中，采用CDMA可提高话音质量、数据传输可靠性、增大通信系统容量（是GSM的4～5倍），降低手机的平均发射功率。  </p>
<h4 id="码片序列-chip-sequence"><a href="#码片序列-chip-sequence" class="headerlink" title="码片序列(chip sequence)"></a>码片序列(chip sequence)</h4><p>每一个比特时间划分为 m 个短的间隔，称为码片 (chip)。设m&#x3D;8<br>每个站被指派一个唯一的m bit 码片序列。<br>    如发送比特 1，则发送自己的m bit 码片序列。<br>    如发送比特 0，则发送该码片序列的二进制反码。<br>例如， S 站的 8 bit 码片序列是 00011011。<br>    发送比特 1 时，就发送序列 00011011，<br>    发送比特 0 时，就发送序列 11100100。<br>按惯例，0写成-1，1写成+1，S 站的码片序列：(–1 –1 –1 +1 +1 –1 +1 +1)  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108130522147.png" alt="image-20211108130522147" style="zoom:50%;" />

<h4 id="CDMA的重要特性"><a href="#CDMA的重要特性" class="headerlink" title="CDMA的重要特性"></a>CDMA的重要特性</h4><p>每个站分配的码片序列不仅<strong>必须各不相同</strong>， 并且还<strong>必须互相正交</strong> (orthogonal)。<br>在实用的系统中是使用<strong>伪随机码序列</strong>。<br>令向量 S 表示站 S 的码片向量，令 T 表示其他任何站的码片向量。<br>两个不同站的码片序列正交，就是向量 S 和T的<strong>规格化内积</strong> (inner product) 等于 0：  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108131008264.png" alt="image-20211108131008264" style="zoom:50%;" /></p>
<p>任何一个码片向量和该码片向量自己的规格化内积都是1。<br>一个码片向量和该码片反码的向量的规格化内积值是–1。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108131133767.png" alt="image-20211108131133767" style="zoom:50%;" />

<h4 id="CDMA工作原理"><a href="#CDMA工作原理" class="headerlink" title="CDMA工作原理"></a>CDMA工作原理</h4><p>每个站各自发送扩频信号，在接收端形成叠加的信号。<br>当接收站打算接收S站的信号时，就用S站的码片序列与收到的叠加信号求规格化内积：<br>    若S站有信号发送，则内积结果为1(发送数据1)或-1（发送数据0）。<br>    若S站没有信号发送，则内积结果为0。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108132010426.png" alt="image-20211108132010426"  />

<h2 id="2-5-数字传输系统"><a href="#2-5-数字传输系统" class="headerlink" title="2.5 数字传输系统"></a>2.5 数字传输系统</h2><p>与模拟通信相比，数字通信无论是在传输质量上还是经济上都有明显的优势。  </p>
<p>因此， 目前长途干线大都采用时分复用 PCM 的数字传输方式。 模拟线路只剩下用户电话机到市话交换机之间几公里长的用户线上。<br>光纤成为长途干线最主要的传输媒体。</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108132226743.png" alt="image-20211108132226743" style="zoom:50%;" />

<h3 id="旧的数字传输系统存在许多缺点"><a href="#旧的数字传输系统存在许多缺点" class="headerlink" title="旧的数字传输系统存在许多缺点"></a>旧的数字传输系统存在许多缺点</h3><p>1、速率标准不统一<br>    如果不对数字传输速率进行标准化，国际范围的基于光纤高速数据传输就很难实现。<br>2、不是同步传输<br>    同步通信要求接收端时钟频率和发送端时钟频率一致。发送端发送连续的比特流。<br>    异步通信时不要求接收端时钟和发送端时钟同步。发送端发送完一个字节后，可经过任意长时间间隔再发送下一个字节。<br>    为了节约经费，各国的数字网主要是采用<strong>准同步</strong>方式，给时分复用和分用带来许多麻烦。<br>当数据传输的速率很高时， 收发双方的时钟同步就成为很大的问题。  </p>
<h3 id="同步光纤网SONET"><a href="#同步光纤网SONET" class="headerlink" title="同步光纤网SONET"></a>同步光纤网SONET</h3><p>SONET 为光纤传输系统定义了<strong>同步传输的线路速率</strong>等级结构，其传输基本速率为51.84Mb&#x2F;s<br>    对电信号，第 1 级<strong>同步传送信号</strong> STS-1 (Synchronous Transport Signal)的传输速率是 51.84 Mbit&#x2F;s。<br>    对光信号称为第 1 级<strong>光载波</strong> OC-1 (OC 表示Optical Carrier)。  </p>
<h3 id="同步数字系列SDH"><a href="#同步数字系列SDH" class="headerlink" title="同步数字系列SDH"></a>同步数字系列SDH</h3><p>一般可认为 SDH 与 SONET 是同义词。<br><strong>其主要不同点是</strong>： SDH 的基本速率为 155.52Mbit&#x2F;s，称为第 1 级同步传递模块(Synchronous Transfer Module)，即 STM-1，相当于 SONET 体系中的 OC-3 速率。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108132732899.png" alt="image-20211108132732899" style="zoom:50%;" />

<h3 id="SONET与SDH的关系"><a href="#SONET与SDH的关系" class="headerlink" title="SONET与SDH的关系"></a>SONET与SDH的关系</h3><p>SDH与SONET之间差别很小。<br>SONET的基本速率为51.84Mb&#x2F;s，而 SDH的基本速率为155.52Mb&#x2F;s。<br>SONET&#x2F;SDH，采用TDM技术，是同步系统， 由<strong>主时钟控制</strong>，时钟精度$10^9$。<br>SONET和PCM的采样速率一样，为每秒8000帧；<br>对于SONET的第1级同步传送信号STS-1每帧的长度为810字节，810*8bit。<br>一个STS-n帧的长度是STS-1帧长的n倍。  </p>
<h3 id="SONET-x2F-SDH标准的意义"><a href="#SONET-x2F-SDH标准的意义" class="headerlink" title="SONET&#x2F;SDH标准的意义"></a>SONET&#x2F;SDH标准的意义</h3><p>使不同的数字传输体制在 STM-1 等级上获得了统一。并将此基础上的更高的数字传输速率作为国际标准。<br>第一次真正实现了数字传输体制上的世界性标准。<br>已成为公认的新一代理想的传输网体制。<br>SDH 标准也适合于微波和卫星传输的技术体制。  </p>
<h2 id="2-6-物理层协议举例"><a href="#2-6-物理层协议举例" class="headerlink" title="2.6 物理层协议举例"></a>2.6 物理层协议举例</h2><h3 id="物理层的主要任务"><a href="#物理层的主要任务" class="headerlink" title="物理层的主要任务"></a>物理层的主要任务</h3><p>主要任务：确定与传输媒体的接口的一些特性。  </p>
<p>机械特性 ： 指明接口所用接线器的形状和尺寸、引线数目和排列、固定和锁定装置等。<br>电气特性： 指明在接口电缆的各条线上出现的电压的范围。<br>功能特性： 指明某条线上出现的某一电平的电压表示何种意义。<br>过程特性 ： 指明对于不同功能的各种可能事件的出现顺序。</p>
<h3 id="EIA-232-E接口标准"><a href="#EIA-232-E接口标准" class="headerlink" title="EIA-232-E接口标准"></a>EIA-232-E接口标准</h3> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108133218374.png" alt="image-20211108133218374" style="zoom:50%;" />

 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108133245531.png" alt="image-20211108133245531" style="zoom:50%;" />

 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108133355624.png" alt="image-20211108133355624" style="zoom:50%;" />

<h3 id="RS-449接口标准"><a href="#RS-449接口标准" class="headerlink" title="RS-449接口标准"></a>RS-449接口标准</h3> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108133500236.png" alt="image-20211108133500236" style="zoom:50%;" />

<h1 id="第三章-数据链路层"><a href="#第三章-数据链路层" class="headerlink" title="第三章 数据链路层"></a>第三章 数据链路层</h1><h2 id="数据链路层基本概念"><a href="#数据链路层基本概念" class="headerlink" title="数据链路层基本概念"></a>数据链路层基本概念</h2><p><strong>链路</strong>：(link)是一条无源的结点到相邻结点的物理线路（有线或无线），中间没有任何其他的交换结点。<br>    一条链路只是一条通路的一个组成部分。</p>
<p><strong>数据链路</strong> (data link)：除了物理线路外，还必须有通信协议来控制这些数据的传输。若把实现这些协议的硬件和软件加到链路上，就构成了数据链路。<br>    现在最常用的方法是使用网络适配器（即网卡） 来实现这些协议的硬件和软件。<br>    一般的适配器都包括了数据链路层和物理层这两层的功能。  </p>
<p><strong>物理链路</strong>就是上面所说的链路。</p>
<p><strong>逻辑链路</strong>就是上面的数据链路，是物理链路加上必要的通信协议。</p>
<p>早期的数据通信协议曾叫做<strong>通信规程</strong>(procedure)。因此在数据链路层，规程和协议是同义语  </p>
<p><strong>帧</strong>：常常在两个对等的数据链路层之间画出一个数字管道，而在这条数字管道上传输的数据单位是帧。<br>帧是数据链路层的协议数据单元</p>
  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108134139083.png" alt="image-20211108134139083" style="zoom:50%;" />

 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108134302505.png" alt="image-20211108134302505" style="zoom:50%;" />

<h2 id="数据链路层使用的信道"><a href="#数据链路层使用的信道" class="headerlink" title="数据链路层使用的信道"></a>数据链路层使用的信道</h2><p><strong>点对点信道</strong>： 这种信道使用一对一的点对点通信方式。（PPP协议）<br><strong>广播信道</strong>： 这种信道使用一对多的广播通信方式，因此过程比较复杂。广播信道上连接的主机很多，因此必须使用专用的共享信道协议来协调这些主机的数据发送。 （CSMA&#x2F;CD协议）  </p>
<h2 id="3-1-使用点对点信道的数据链路层"><a href="#3-1-使用点对点信道的数据链路层" class="headerlink" title="3.1 使用点对点信道的数据链路层"></a>3.1 使用点对点信道的数据链路层</h2><p>数据链路层协议有许多种，但有三个基本问题则是共同的。这三个基本问题是：  </p>
<ol>
<li><p>封装成帧：数据的传送以帧为单位(<strong>帧定界</strong>)</p>
</li>
<li><p>透明传输：若所传的数据的比特片段与某一个控制信息相同，要有可靠机制，保证收方能正确识别</p>
</li>
<li><p>差错控制：</p>
</li>
</ol>
<p>   ​	纠错：通过编码技术，接收方自动将差错改正过来<br>   ​	检错：检测出帧有错误，要么忽略或重传  </p>
<h3 id="3-1-1-封装成帧"><a href="#3-1-1-封装成帧" class="headerlink" title="3.1.1 封装成帧"></a>3.1.1 封装成帧</h3><p><strong>封装成帧</strong> (framing) 就是在一段数据的前后分别添加首、部和尾部， 然后就构成了一个帧。 使接收方能确定帧的界限。<br>首部和尾部的一个重要作用就是进行帧定界。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108135613207.png" alt="image-20211108135613207" style="zoom:50%;" />

<p>帧定界(帧同步)的方法<br>    1、字节计数法<br>    2、使用字符填充的首位定界法<br>    3、使用比特填充的首位定界法<br>    4、违法编码法</p>
<h4 id="字节计数法"><a href="#字节计数法" class="headerlink" title="字节计数法"></a>字节计数法</h4><p>思想：<br>    在帧头设置一个长度域，放置该帧的字节数，当收方收到帧后，通过帧的长度，确定帧的开始。</p>
<p>问题：<br>    当帧的长度域出错，帧同步完全丢失；<br>    该方法很少单独使用。  </p>
<h4 id="字符填充法"><a href="#字符填充法" class="headerlink" title="字符填充法"></a>字符填充法</h4><p>当数据是由可打印的ASCII码组成的文本文件时， 帧定界可以使用特殊的ASCII码（不可打印的控制字符） 作为帧定界符。<br>控制字符 SOH (Start Of Header) 放在一帧的最前面， 表示帧的首部 开始 。另一个控制字符EOT (End Of Transmission) 表示帧的结束。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108141656907.png" alt="image-20211108141656907" style="zoom:50%;" />

<h5 id="透明传输问题"><a href="#透明传输问题" class="headerlink" title="透明传输问题"></a>透明传输问题</h5><p>如果数据中的某个字节的二进制代码恰好和 SOH 或 EOT 一样，数据链路层就会错误地“找到帧的边界” 。 </p>
<p>解决方法：<br>发送端的数据链路层在数据中出现控制字符“SOH”或“EOT”的前面插入一个转义字符“ESC” (其十六进制编码是 1B)。<br>接收端的数据链路层在将数据送往网络层之前删除插入的转义字符。<br>如果转义字符也出现在数据当中，那么应在转义字符前面插入一个转义字符 ESC。当接收端收到连续的两个转义字符时，就删除其中前面的一个。  </p>
<h4 id="比特填充法"><a href="#比特填充法" class="headerlink" title="比特填充法"></a>比特填充法</h4><p>使用一个特殊的比特模式01111110作为帧的起始和结束标志。<br><strong>发送方</strong>边发送边检查数据，每连续发送5个“1”后在后面自动插入一个“0”。这样数据中只会连续出现5个“1”，而不会出现定界符。</p>
<p><strong>接收方</strong>在收到5个连续的“1”后将后面的“0”删掉而恢复出原始数据。<br>好处：数据传输的基本单位是比特而不是字符，可用来传输任意长度的二进制比特串，通用性强。  </p>
<h4 id="违法编码法"><a href="#违法编码法" class="headerlink" title="违法编码法"></a>违法编码法</h4><p>前提：物理介质上使用的信号编码有冗余码字时，使用这些冗余的码字来作为帧的定界。</p>
<p>举例：<br>    如曼彻斯特编码或差分曼彻斯特编码中，有效电平是“低－高”或“高－低”，而“低－低”和“高－高”电平没有定义，这种违法编码可以作为帧的边界。  </p>
<h3 id="3-1-2-差错检测"><a href="#3-1-2-差错检测" class="headerlink" title="3.1.2 差错检测"></a>3.1.2 差错检测</h3><p>在传输过程中可能会产生<strong>比特差错</strong>：1可能会变成0而0也可能变成1。  </p>
<p>在一段时间内，传输错误的比特占所传输比特总数的比率称为<strong>误码率</strong> BER (Bit Error Rate)。</p>
<p>误码率与信噪比有很大的关系。</p>
<p>为了保证数据传输的可靠性，在计算机网络传输数据时，必须采用各种差错检测措施。  </p>
<p><strong>差错控制</strong></p>
<p>​	差错编码技术：如何发现差错<br>​		检错码(奇偶校验码、CRC)：能检测出错误，但不能纠正错误<br>​		纠错码(海明码)：能知道错误，且知道错误的位置</p>
<p>​	差错控制技术：发现差错如何处理<br>​		前向纠错：由接收方来检查并纠正错误<br>​		自动重发请求：不能纠正，接收方反馈。若有错误则重发，否则给肯定应答</p>
<h4 id="前向纠错-FEC-Forward-Error-Correct"><a href="#前向纠错-FEC-Forward-Error-Correct" class="headerlink" title="前向纠错(FEC, Forward Error Correct)"></a>前向纠错(FEC, Forward Error Correct)</h4><p>发送方发送能使接收方<strong>检错并纠错</strong>的冗余位，纠错任务由接收方完成，常采用<strong>海明码</strong></p>
<p>主要应用于没有反向信道或反向传输时间很长的场合</p>
<p>缺点：为纠错附加的冗余码较多，传输效率低；<br>优点：实时性好。  </p>
<h4 id="自动重发请求-ARQ-Automatic-Repeat-reQuest"><a href="#自动重发请求-ARQ-Automatic-Repeat-reQuest" class="headerlink" title="自动重发请求(ARQ, Automatic Repeat reQuest)"></a>自动重发请求(ARQ, Automatic Repeat reQuest)</h4><p>即发送方发送能使接收方<strong>检错</strong>的冗余位，若无差错，则接收方回送一个**肯定应答(ACK)<strong>；若有差错，则接收方回送一个</strong>否定应答(NAK)**，要求发送方重发。  </p>
<p>缺点：信息传递连贯性差<br>优点：接收端设备简单，只要请求重发，无需纠正错误。  </p>
<h4 id="检错码"><a href="#检错码" class="headerlink" title="检错码"></a>检错码</h4><p><strong>检错码</strong>(码字、传输帧) ＝ 信息位＋冗余校验位<br><strong>码字长</strong>n &#x3D; K(信息位位数)＋r(校验位位数)<br><strong>编码效率</strong>R ＝ 有效数据位K／ 码字长n  </p>
<p><strong>信息字段</strong>和<strong>校验字段</strong>之间的对应关系<br>校验字段越长，编码的检错能力越强，编码&#x2F;解码越复杂；附加的冗余信息在整个编码中所占的比例越大，传输的有效成分越低，传输的效率下降。<br>检错码一旦形成， 整个检错码将作为一个整体被发往线路，通常的发送顺序是信息字段在前，校验字段在后。  </p>
<h4 id="奇-x2F-偶校验码"><a href="#奇-x2F-偶校验码" class="headerlink" title="奇&#x2F;偶校验码"></a>奇&#x2F;偶校验码</h4><p>奇校验：使码字中“1”的总个数为奇数。<br>偶校验：使码字中“1”的总个数为偶数。<br>奇&#x2F;偶校验码：最常用的一种检验码，包括：<br>    水平奇&#x2F;偶校验码<br>    垂直奇&#x2F;偶校验码<br>    水平垂直奇&#x2F;偶校验码  </p>
<h5 id="水平奇-x2F-偶校验"><a href="#水平奇-x2F-偶校验" class="headerlink" title="水平奇&#x2F;偶校验"></a>水平奇&#x2F;偶校验</h5><p>其信息字段以字符为单位，校验字段仅含一个比特称为校验比特或校验位。</p>
<p>编码效率： Q&#x2F;(Q+1) (信息字段占Q个比特)  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108193430293.png" alt="image-20211108193430293" style="zoom: 50%;" />

<h5 id="垂直奇-x2F-偶校验"><a href="#垂直奇-x2F-偶校验" class="headerlink" title="垂直奇&#x2F;偶校验"></a>垂直奇&#x2F;偶校验</h5><p>被传输的信息进行分组，并排列为若干行和若干列。组中每行的相同列进行奇&#x2F;偶校验，最终产生由校验位形成的校验字符（校验行），并附加在信息分组之后传输</p>
<p>编码效率：PQ&#x2F;P(Q+1)      （假设信息分组占Q行P列）</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108193707197.png" alt="image-20211108193707197" style="zoom:50%;" />

<h5 id="水平垂直奇-x2F-偶校验"><a href="#水平垂直奇-x2F-偶校验" class="headerlink" title="水平垂直奇&#x2F;偶校验"></a>水平垂直奇&#x2F;偶校验</h5><p>编码效率：PQ&#x2F;(P+1)(Q+1) （假设被传信息分组占Q行P列）  </p>
<h4 id="循环冗余码-CRC-Cyclic-Redundancy-Check"><a href="#循环冗余码-CRC-Cyclic-Redundancy-Check" class="headerlink" title="循环冗余码(CRC, Cyclic Redundancy Check)"></a>循环冗余码(CRC, Cyclic Redundancy Check)</h4><h5 id="发送端"><a href="#发送端" class="headerlink" title="发送端"></a>发送端</h5><p>在发送端，先把数据划分为组，假定每组 k 个比特<br>假设待传送的一组数据 M &#x3D; 101001（现在 k &#x3D; 6）。我们在 M 的后面再添加供差错检测用的 n 位冗余码一起发送。  </p>
<p><strong>计算方法</strong>：</p>
<p>1、用二进制的模2运算进行 $2^n$ 乘 M 的运算，这相当于在M 后面添加 n 个 0。<br>2、得到的 (k + n) bit 的数除以事先选定好的长度为 (n + 1) bit 的除数 P，得出商是 Q 而余数是 R，余数 R 比除数 P 少 1 位，即 R 是 n 位。<br>3、将余数 R 作为冗余码（帧检验序列FCS (Frame Check Sequence)） 拼接在数据 M 后面发送出去。</p>
<p>注意：用模2运算进行加法时不进位。减法和加法一样，按加法规则进行运算。<br>    举例: 1111＋1010＝？答案为0101    </p>
<p><strong>计算举例</strong></p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108195130316.png" alt="image-20211108195130316" style="zoom:50%;" />

<p>**帧检验序列FCS(Frame Check Sequence)**：在数据后面添加上的冗余码称为帧检验序列FCS<br>CRC 是一种常用的检错方法，而 FCS 是添加在数据后面的冗余码。<br>FCS 可以用 CRC 这种方法得出，但 CRC 并非用来获得 FCS 的唯一方法。  </p>
<h5 id="接收端"><a href="#接收端" class="headerlink" title="接收端"></a>接收端</h5><p>把收到的每一个帧都除以相同的除数P（模2运算） ， 然后检查得到的余数R<br>    (1) 若得出的余数 R &#x3D; 0， 则判定这个帧没有差错， 就接受 (accept)<br>    (2) 若余数 R ≠ 0， 则判定这个帧有差错， 就丢弃</p>
<p>缺点：无法定位差错的位置</p>
<p>漏检：CRC不能保证检测出所有的传输错误，但只要选择位数足够的P，可以使得差错的概率足够小</p>
<h5 id="生成多项式P"><a href="#生成多项式P" class="headerlink" title="生成多项式P"></a>生成多项式P</h5><p>多项式表示：将k比特的数据用k项多项式表示<br>    例如：代码1010111对应的多项式为x6+x4+x2+x+1  </p>
<p>除数 P 可表示成生成多项式 P(X)<br>例如： P＝110101，即P(X)&#x3D;X5+X4+X2+1(X0)（P为5阶多项式）；<br>生成多项式的最高位和最低位都必须为1；<br>若 P 为 r 阶（ r+1 bit），将产生 r 位冗余位；  </p>
<p>发送端帧检验序列FCS的生成和接收端CRC检验都是用硬件完成的，处理速度很快，不会延误数据的传输  </p>
<p>M(X) ——– 信息多项式<br>R(X) ——– 冗余多项式<br>T(X) ——– 传输帧多项式  </p>
<p>P为生成多项式，已有的国际标准</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108200940773.png" alt="image-20211108200940773" style="zoom:50%;" />

<h5 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h5><p>仅用循环冗余检验 CRC 差错检测技术只能做到<strong>无差错接受</strong> (accept)。<br>“无差错接受” 是指： “凡是接受的帧（即不包括丢弃的帧） ， 我们都能以非常接近于1的概率认为这些帧在传输过程中没有产生差错” 。<br>也就是说： “凡是接收端数据链路层接受的帧都无差错” （有差错的帧就丢弃而不接受） 。<br>区分“<strong>无比特差错</strong>” 与“<strong>无传输差错</strong>” (在运输层实现)<br>要做到“可靠传输” （即发送什么就收到什么） 就必须再加上<strong>确认和重传机制</strong>。  </p>
<p>传输差错 [#1]-[#2]-[#3]<br>    帧丢失 [#1]-[#3]<br>    帧重复 [#1]-[#2]-[#2]-[#3]<br>    帧失序 [#1]-[#3]-[#2]  </p>
<p>可靠传输<br>    帧编号<br>    确认：收到正确帧要发送确认<br>    重传机制：一定期限内，发送端未收到确认，则重传</p>
<p>本章介绍的数据链路层协议都<strong>不是可靠传输</strong>的协议</p>
<p>对于通信质量较差的无线传输链路， 数据链路层协议使用确认和重传机制可以提高通信效率  </p>
<h4 id="海明码"><a href="#海明码" class="headerlink" title="海明码"></a>海明码</h4><p>基本思想：在 k 比特信息上附加 r 比特冗余信息（校验比特），构成 n&#x3D;k+r 比特的码字，其中每个校验比特和某几个特定的信息比特构成<strong>偶校验</strong>关系。</p>
<p>接收端对这 r 个偶校验关系进行校验，即将每个校验比特和与它关联的信息比特进行相加（异或），相加的结果为校正因子<br>    如果没有错，则 r 个校正因子都为0；<br>    若校正因子不全为0，根据校正因子的取值，确定错误发生的位置  </p>
<p><strong>码距</strong>（海明距离Hamming Distance）</p>
<p>​	一个编码系统中任意两个合法编码（码字）之间不同的二进位（bit）数叫这两个码字的码距。<br>​	而整个编码系统中任意两个码字的的最小距离就是该编码系统的码距  </p>
<p>如果要<strong>检测</strong>出d个比特的错，则编码集的海明距离至少为d+1。<br>如果要<strong>纠正</strong> d个比特的错，则编码集的海明距离至少应为2d+1。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108203539720.png" alt="image-20211108203539720" style="zoom:50%;" />

<h5 id="发送方冗余位计算"><a href="#发送方冗余位计算" class="headerlink" title="发送方冗余位计算"></a>发送方冗余位计算</h5><p>1、根据信息位长度(如每帧K位)，计算出所需冗余位位数r：<br>    求海明码时的一项基本考虑是确定所需<strong>最少校验位数 r</strong>，若需纠正1bit错，需满足： <strong>$2^r ≥ K+r+1$</strong><br>    考虑长度为 K 位的信息，若附加了 r 个校验位，则所发送信息的总长度为 K+r<br>    在接收端中要进行 r 个奇偶检查，每个检查结果或是真或是伪。这个奇偶检查的结果确定最多 $2^r$ 种不同状态<br>    这些状态中必有一个是判定信息正确的条件<br>    剩下的（$2^r - 1$）种状态，可以用来判定误码的位置<br>    则导出关系： $2^r-1 ≥ K+r$<br>    例如：如果K＝4，则r&#x3D;3，则n&#x3D;K+r&#x3D;7  </p>
<p>​	公式附加解释：主要判断的是错误的位置</p>
<p>2、确定校验比特和信息比特的位置</p>
<p>​	理论上校验比特可在任何位置，但习惯都是将校验比特放在1、 2、 4、 8、 16…位置上。<br>​	通常是将$2^k$位置上，放校验位，其余位置放信息位。<br>​	例： 7 bit 的二进制数  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108205754522.png" alt="image-20211108205754522" style="zoom:50%;" />

<p>将每个信息比特的位置写成2的次幂之和的形式有：<br>$I_4： 7＝2^2＋2^1 ＋2^0$（说明$I_4$参与$R_2$、$R_1$和$R_0$的生成）<br>$I_3 ： 6＝2^2＋2^1$（说明$I_3$参与$R_2$、$R_1$的生成）</p>
<p>$I_2 ： 5＝2^2＋2^0$（说明$I_2$参与$R_2$、$R_0$的生成）<br>$I_1 ： 3＝2^1 ＋2^0$（说明$I_1$参与$R_1$、$R_0$的生成）  </p>
<p>​	目的：计算每一个信息为与哪些校验位有关联</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108211219654.png" alt="image-20211108211219654" style="zoom:50%;" />

 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108211237552.png" alt="image-20211108211237552" style="zoom:50%;" />

<h5 id="接收方验证"><a href="#接收方验证" class="headerlink" title="接收方验证"></a>接收方验证</h5><p>接收端利用相应的偶关系进行验证：<br>    $S_1＝R_1 ⊕ I_1 ⊕ I_3 ⊕ I_4 ⊕ I_6 ⊕ I_7$<br>    同理可得$S_0、S_2、S_3$<br>这里$S_1$为校正因子，若校正因子为0，则无错；<br>校正因子不为0，有错， 错误位置为$S＝S_3S_2S_1S_0$处。<br>校正方式：将S位置的比特取反<br>    例如：若S＝0101＝5，则将位置5的比特取反<br>最后去掉校验比特即可得到正确的信息。  </p>
<h2 id="3-2-点对点协议PPP-Point-to-Point-Protocol"><a href="#3-2-点对点协议PPP-Point-to-Point-Protocol" class="headerlink" title="3.2 点对点协议PPP(Point-to-Point Protocol)"></a>3.2 点对点协议PPP(Point-to-Point Protocol)</h2><h3 id="3-2-1-PPP协议的特点"><a href="#3-2-1-PPP协议的特点" class="headerlink" title="3.2.1 PPP协议的特点"></a>3.2.1 PPP协议的特点</h3><p>因特网服务提供者(ISP)</p>
<p>用户使用拨号电话线接入互联网时， 用户计算机 和 ISP 进行通信时所使用的数据链路层协议就是 PPP 协议  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108212437180.png" alt="image-20211108212437180" style="zoom:50%;" />

<p><strong>PPP协议的特点</strong></p>
<p>封装成帧<br>    必须规定特殊的字符作为帧定界符。<br>透明性<br>    保证数据传输的透明性。<br>支持多种网络层协议<br>    能够在同一条物理链路上同时支持多种网络层协议。<br>差错检测<br>    能够对接收端收到的帧进行检测，并立即丢弃有差错的帧。<br><strong>允许身份验证</strong><br><strong>允许网络层地址协商</strong><br>    提供一种机制使通信的两个网络层实体能够通过协商知道或能够配置彼此的网络层地址  </p>
<p><strong>PPP协议的组成</strong>：</p>
<ol>
<li>一个将IP数据报封装到串行链路的方法</li>
<li><strong>链路控制协议 LCP (Link Control Protocol)</strong> ： 建立、配置和测试数据链路的协议。</li>
<li><strong>网络控制协议 NCP (Network Control Protocol)</strong> ： 如</li>
</ol>
<h3 id="3-2-2-PPP协议的帧格式"><a href="#3-2-2-PPP协议的帧格式" class="headerlink" title="3.2.2 PPP协议的帧格式"></a>3.2.2 PPP协议的帧格式</h3><p>PPP 帧的首部和尾部分别为 4 个字段和 2 个字段。<br><strong>标志字段</strong> F &#x3D; 0x7E （符号“0x”表示后面的字符是用十六进制表示。十六进制的 7E 的二进制表示是01111110）。<br><strong>地址字段</strong> A 只置为 0xFF。地址字段实际上并不起作用<br><strong>控制字段</strong> C 通常置为 0x03。<br><strong>帧检验序列</strong>FCS采用CRC。<br><strong>PPP帧 是面向字节的，所有的 PPP 帧的长度都是整数字节</strong></p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108213135046.png" alt="image-20211108213135046" style="zoom:50%;" />

<h4 id="透明传输问题-1"><a href="#透明传输问题-1" class="headerlink" title="透明传输问题"></a>透明传输问题</h4><p>异步传输时： <strong>字符填充</strong> （按帧封装）<br>    将信息字段中出现的每一个 0x7E 字节转变成为 2 字节序列 (0x7D, 0x5E)。<br>    若信息字段中出现一个 0x7D 的字节, 则将其转变成为 2 字节序列 (0x7D, 0x5D)。<br>    若信息字段中出现 ASCII 码的控制字符（即数值小于 0x20 的字符），则在该字符前面要加入一个0x7D 字节，同时将该字符的编码加以改变<br>同步传输时： <strong>比特填充</strong> （只传输信息比特位）<br>    在5个连续 1 的后面插入0  </p>
<h4 id="PPP协议不提供序号和确认的可靠传输"><a href="#PPP协议不提供序号和确认的可靠传输" class="headerlink" title="PPP协议不提供序号和确认的可靠传输"></a>PPP协议不提供序号和确认的可靠传输</h4><p>PPP 协议之所以不使用序号和确认机制是出于以下的考虑：<br>① 在数据链路层出现差错的概率不大时，使用比较简单的 PPP 协议较为合理。<br>② 在因特网环境下， PPP 的信息字段放入的数据是 IP 数据报。 数据链路层的可靠传输并不能够保证网络层的传输也是可靠的。<br>③ 帧检验序列 FCS 字段可保证无差错接受。  </p>
<h3 id="3-2-3-PPP协议的工作状态"><a href="#3-2-3-PPP协议的工作状态" class="headerlink" title="3.2.3 PPP协议的工作状态"></a>3.2.3 PPP协议的工作状态</h3><p>当用户拨号接入 ISP 时，路由器的调制解调器对拨号做出确认，并建立一条物理连接。<br>PC 机向路由器发送一系列的 LCP 分组（封装成多个 PPP 帧）。<br>这些分组及其响应选择一些 PPP 参数<br>接着进行网络层配置， NCP 给新接入的 PC 机分配一个临时的 IP 地址，使 PC 机成为因特网上的一个主机。<br>通信完毕时， NCP 释放网络层连接，收回原来分配出去的 IP 地址。接着， LCP 释放数据链路层连接。最后，释放的是物理层的连接。<br>可见， <strong>PPP 协议已不是纯粹的数据链路层的协议，它还包含了物理层和网络层的内容。</strong>  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211108215142192.png" alt="image-20211108215142192" style="zoom:50%;" />

<h3 id="3-2-4-PPP协议的特点"><a href="#3-2-4-PPP协议的特点" class="headerlink" title="3.2.4 PPP协议的特点"></a>3.2.4 PPP协议的特点</h3><p>PPP帧中增加了校验字段， PPP在链路层具有差错检测功能<br>PPP的LCP协议提供通信双方进行参数协商的手段<br>协商参数有：数据帧的最大帧长、身份认证、 NCP 协议、数据压缩方式等。<br>PPP帧中增加了协议字段，使得PPP可以支持多种网络层协议，有IP、 IPX、 OSI、 CLNP等。<br>支持IP的NCP可以在建立连接时动态分配IP地址，解决了家庭用户拨号上网的问题。  </p>
<h2 id="3-3-使用广播信道的数据链路层"><a href="#3-3-使用广播信道的数据链路层" class="headerlink" title="3.3 使用广播信道的数据链路层"></a>3.3 使用广播信道的数据链路层</h2><h3 id="3-3-1-局域网的数据链路层"><a href="#3-3-1-局域网的数据链路层" class="headerlink" title="3.3.1 局域网的数据链路层"></a>3.3.1 局域网的数据链路层</h3><p>局域网的<strong>概念</strong></p>
<p>​	局域网(Local Area Network, 简称LAN)是在一个较小范围(一个办公室、一幢楼、一家工厂等)，利用通信线路将众多计算机(一般为微机)及外围设备连接起来，以达到数据通信和资源共享的目的</p>
<p>局域网的主要<strong>特点</strong></p>
<p>​	网络为一个单位所拥有；地理范围和站点数目有限。<br>​	具有较高的数据量、较低的时延和较小的误码率</p>
<p>局域网的主要<strong>优点</strong></p>
<p>​	具有广播功能，从一个站点可很方便地访问全网。局域网上的主机可共享连接在局域网上的各种硬件和软件资源。<br>​	便于系统的扩展和逐渐地演变，各设备的位置可灵活调整和改变。<br>​	提高了系统的可靠性、可用性和生存性。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211109160201882.png" alt="image-20211109160201882" style="zoom:50%;" />

<h4 id="局域网信道分配策略"><a href="#局域网信道分配策略" class="headerlink" title="局域网信道分配策略"></a>局域网信道分配策略</h4><p>广播网中所有站点共享同一个信道，任一站点发送的信息能被所有其他站点接收到。  </p>
<p>问题：<br>    若有两个或两个以上的站点同时发送数据，则信号在信道中发生碰撞，数据发送失败，为冲突。<br>    广播网中，如何将单一的信道分配各各个不同的用户，是个重要的问题。  </p>
<p>用户使用的信道称为媒体（介质） ，决定由谁来使用信道的协议为“<strong>媒体（介质）访问控制协议</strong>”。  </p>
<h4 id="媒体-介质-共享技术"><a href="#媒体-介质-共享技术" class="headerlink" title="媒体(介质)共享技术"></a>媒体(介质)共享技术</h4><h5 id="静态"><a href="#静态" class="headerlink" title="静态"></a>静态</h5><p><strong>静态划分信道</strong></p>
<p>​	频分复用<br>​	时分复用<br>​	波分复用<br>​	码分复用</p>
<p><strong>静态分配的特点</strong></p>
<p>​	站点数目少且固定，且每个站点有大量数据发送，控制协议简单且传输的效率高。<br>​	对于大部分计算机网络，站点数目多且不固定，数据传输有突发性，信道的利用率低。<br>​	代价较高，不适合于局域网使用  </p>
<h5 id="动态"><a href="#动态" class="headerlink" title="动态"></a>动态</h5><p>动态媒体接入控制</p>
<p>​	信道不是在用户通信时固定分配给用户。</p>
<p>​		例如：异步时分多路复用STDM，各站点仅当有数据发送时，才占用信道发送数据。  </p>
<p>动态接入控制类型</p>
<p>​	随机接入</p>
<p>​		用户发送前不需要取得发送权，有数据就发送，发生冲突（碰撞） 后采取措施解决冲突</p>
<h5 id="代表性媒体访问控制方法"><a href="#代表性媒体访问控制方法" class="headerlink" title="代表性媒体访问控制方法"></a>代表性媒体访问控制方法</h5><p><strong>争用协议</strong></p>
<p>​	ALOHA协议<br>​	CSMA&#x2F;CD协议<br>​	<strong>随机访问</strong>：意味着对任何站都无法预计其发送的时刻<br>​	<strong>竞争发送</strong>：指所有发送的站自由竞争信道的使用权</p>
<h4 id="ALOHA系统"><a href="#ALOHA系统" class="headerlink" title="ALOHA系统"></a>ALOHA系统</h4><p>思想：</p>
<p>​	任何用户有数据发送就可以发送(会带来冲突)<br>​	每个用户通过<strong>监听信道</strong>来获知数据传输是否成功<br>​	发现数据传输失败后，各自<strong>等待一段随机时间</strong>，再重新发送</p>
<p>竞争系统中，一方面不断有新的数据帧发送，另一方面冲突帧需要重发，系统的<strong>吞吐量</strong>是一个重要的指标。<br><strong>吞吐量</strong>：单位时间内系统能够成功发送的新的数据帧的平均数量。<br>结论：<br>    ALOHA系统最大的信道利用率为18.4%；<br>    对ALOHA系统改进的时分ALOHA系统的最大信道利用率为36.8%<br>    ALOHA系统的信道利用率是非常低的。原因主要是各个站自由发送数据，碰撞概率增大。  </p>
<h4 id="CSMA-x2F-CD协议"><a href="#CSMA-x2F-CD协议" class="headerlink" title="CSMA&#x2F;CD协议"></a>CSMA&#x2F;CD协议</h4><p>CSMA&#x2F;CD含义：<strong>载波监听 多点接入&#x2F;碰撞检测</strong></p>
<p>“多点接入”指总线型网络，表示许多计算机以多点接入的方式连接在一根总线上。<br>“载波监听”就是用电子技术检测总线上有没有其他计算机发送的数据信号。  “碰撞检测”就是计算机边发送数据边检测信道上的信号电压大小。  </p>
<p>载波监听：先听后发；碰撞检测：边发边听</p>
<h5 id="检测到碰撞之后"><a href="#检测到碰撞之后" class="headerlink" title="检测到碰撞之后"></a>检测到碰撞之后</h5><p>立即停止发送数据，避免继续浪费资源，等待一段随机时间后再次发送</p>
<p>发生碰撞的根本原因：电磁波在总线上的传播速度有限</p>
<h5 id="CSMA-x2F-CD重要特性"><a href="#CSMA-x2F-CD重要特性" class="headerlink" title="CSMA&#x2F;CD重要特性"></a>CSMA&#x2F;CD重要特性</h5><p>使用CSMA&#x2F;CD协议的以太网不能全双工通信，只能双向交替通信(<strong>半双工通信</strong>)</p>
<p><strong>发送的不确定性</strong>：每个站在发送数据后的一小段时间内，存在着遭遇碰撞的可能性。这种不确定性使整个以太网的平均通信量远小于以太网的最高数据率。</p>
<h5 id="争用期"><a href="#争用期" class="headerlink" title="争用期"></a>争用期</h5><p>最先发送数据帧的站，在发送数据帧后至多经过时间 <strong>2τ （两倍的端到端往返时延）</strong> 就可知道发送的数据帧是否遭受了碰撞。  </p>
<p>以太网的端到端往返时延 2τ 称为<strong>争用期</strong>， 或<strong>碰撞窗口</strong>。  </p>
<h5 id="二进制指数类型退避算法"><a href="#二进制指数类型退避算法" class="headerlink" title="二进制指数类型退避算法"></a>二进制指数类型退避算法</h5><p>发生碰撞的站在停止发送数据后，要推迟（退避）一个<strong>随机时间</strong>才能再发送数据。<br>    基本退避时间取为争用期 2τ。<br>    从整数集合 [0, 1, 2， 3， 4， … , (2k -1)] 中随机地取出一个数，记为 r。重传所需的时延就是 r 倍的基本退避时间。<br>    参数 k 按下面的公式计算：	k &#x3D; Min[重传次数, 10]<br>    当 k ≤ 10 时，参数 k 等于重传次数。<br>    当重传达 16 次仍不能成功时即丢弃该帧，并向高层报告  </p>
<h5 id="争用期的长度"><a href="#争用期的长度" class="headerlink" title="争用期的长度"></a>争用期的长度</h5><p>10 Mbit&#x2F;s 以太网取 <strong>51.2 µs</strong> 为争用期的长度。<br>对于 10 Mbit&#x2F;s 以太网，在争用期内可发送 512 bit，即 <strong>64 字节（最短有效帧长）</strong> 。<br>如果发生冲突，就一定是在发送的前 64 字节之内。<br>由于一检测到冲突就立即中止发送，这时已经发送出去的数据一定小于 64 字节。<br>以太网规定了最短有效帧长为 64 字节，凡长度小于64 字节的帧都是由于冲突而异常中止的<strong>无效帧</strong>。</p>
<h5 id="强化碰撞"><a href="#强化碰撞" class="headerlink" title="强化碰撞"></a>强化碰撞</h5><p>当发送数据的站一旦发现发生了碰撞时：<br> (1) 立即停止发送数据；<br> (2) 再继续发送若干比特的<strong>人为干扰信号</strong>(jamming signal)，以便让所有用户都知道现在已经发生了碰撞。  </p>
<h5 id="CSMA-x2F-CD工作流程图"><a href="#CSMA-x2F-CD工作流程图" class="headerlink" title="CSMA&#x2F;CD工作流程图"></a>CSMA&#x2F;CD工作流程图</h5> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211110082454941.png" alt="image-20211110082454941" style="zoom:50%;" />

<h5 id="CSMA-x2F-CD协议要点"><a href="#CSMA-x2F-CD协议要点" class="headerlink" title="CSMA&#x2F;CD协议要点"></a>CSMA&#x2F;CD协议要点</h5><p>(1) 准备发送。 但在发送之前，必须先检测信道。<br>(2) 检测信道。 若检测到信道忙，则应不停地检测，一直等待信道转为空闲。<br>        若检测到信道空闲，并在 96 比特时间内信道保持空闲（保证了帧间最小间隔 9.6 µs ），就发送这个帧。<br>(3) 检查碰撞。 在发送过程中仍不停地检测信道，即网络适配器要边发送边监听。这里只有两种可能性：<br>    ①发送成功： 在争用期内一直未检测到碰撞。这个帧肯定能够发送成功。发送完毕后，其他什么也不做。然后回到 (1)。<br>    ②发送失败： 在争用期内检测到碰撞。这时立即停止发送数据，并按规定发送人为干扰信号。适配器接着就执行指数退避算法，等待 r 倍 512 比特时间后，返回到步骤 (2)，继续检测信道。但若重传达 16 次仍不能成功，则停止重传而向上报错。  </p>
<h5 id="帧间最小间隔"><a href="#帧间最小间隔" class="headerlink" title="帧间最小间隔"></a>帧间最小间隔</h5><p>帧间最小间隔为 9.6 µs，相当于 96 bit 的发送时间。<br>一个站在检测到总线开始空闲后，还要等待 9.6µs 才能再次发送数据。<br>这样做是为了使刚刚收到数据帧的站的接收缓存来得及清理，做好接收下一帧的准备。  </p>
<h3 id="3-3-3-信道利用率"><a href="#3-3-3-信道利用率" class="headerlink" title="3.3.3 信道利用率"></a>3.3.3 信道利用率</h3><p>多个站在以太网上同时工作就可能会发生碰撞。<br>当发生碰撞时，信道资源实际上是被浪费了。<br>    因此，当扣除碰撞所造成的信道损失后， **以太网总的信道利用率并不能达到 100%**。<br>假设 τ 是以太网单程端到端传播时延。则争用期长度为 2τ，即端到端传播时延的两倍。检测到碰撞后不发送干扰信号。<br>设帧长为 L (bit)， 数据发送速率为 C (bit&#x2F;s)，则帧的发送时间为 $T_0 &#x3D; L&#x2F;C (s)$。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211110083417682.png" alt="image-20211110083417682" style="zoom:50%;" />

<p>成功发送一个帧需要占用信道的时间是$T_0 + τ$</p>
<p>这是因为当一个站发送完最后一个比特时，这个比特还要在以太网上传播  </p>
<p>$T_0$ 指从一个站在无碰撞的情况下发出第一个帧开始到发出最后一个帧的时间，不包括数据到达终点的时间</p>
<h4 id="参数α-与利用率"><a href="#参数α-与利用率" class="headerlink" title="参数α 与利用率"></a>参数α 与利用率</h4><p>$a &#x3D; τ&#x2F;T_0$ </p>
<p> α →0，表示一发生碰撞就立即可以检测出来， 并立即停止发送，因而<strong>信道利用率很高</strong>。<br> α 越大，表明争用期所占的比例增大，每发生一次碰撞就浪费许多信道资源，使得<strong>信道利用率明显降低</strong>。</p>
<h4 id="信道利用率的最大值-S-max"><a href="#信道利用率的最大值-S-max" class="headerlink" title="信道利用率的最大值$S_{max}$"></a>信道利用率的最大值$S_{max}$</h4><p>在<strong>理想化</strong>的情况下， 以太网上的各站发送数据都不会产生碰撞（这显然已经不是 CSMA&#x2F;CD， 而是需要使用一种特殊的调度方法） ， 即总线一旦空闲就有某一个站立即发送数据。<br>发送一帧占用线路的时间是 $T_0 + τ$， 而帧本身的发送时间是 $T_0$。 于是我们可计算出<strong>理想情况下的极限信道利用率 $S_{max}$ 为</strong>：<br>$$<br>S_{max} &#x3D; \dfrac{T_0}{T_0+τ} &#x3D; \dfrac{1}{1+a}<br>$$<br>只有当参数 a 远小于 1 才能得到尽可能高的极限信道利用率。<br>据统计，当以太网的利用率达到 30%时就已经处于重载的情况。很多的网络容量被网上的碰撞消耗掉了。</p>
<h2 id="3-4-以太网"><a href="#3-4-以太网" class="headerlink" title="3.4 以太网"></a>3.4 以太网</h2><h3 id="3-4-1-传统以太网"><a href="#3-4-1-传统以太网" class="headerlink" title="3.4.1 传统以太网"></a>3.4.1 传统以太网</h3><p>**以太网(Ethernet)**指的是由美国施乐(Xerox)公司创建并由Xerox、 Intel和DEC公司联合开发的基带局域网规范，是当今现有局域网采用的最通用的通信协议标准。<br><strong>传统以太网（10Mbits&#x2F;s速率）</strong> 最初是使用粗同轴电缆，后来演进到使用比较便宜的细同轴电缆，最后发展为使用更便宜和更灵活的双绞线。</p>
<p>以太网有四种不同的物理层：  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211110090223247.png" alt="image-20211110090223247" style="zoom:50%;" />

<h4 id="星形以太网-10BASE-T"><a href="#星形以太网-10BASE-T" class="headerlink" title="星形以太网 10BASE-T"></a>星形以太网 10BASE-T</h4><p>1990 年， IEEE 制定出星形以太网 10BASE-T的标准 802.3i</p>
<p>特点：采用双绞线和星型拓扑。中心增加了<strong>集线器(hub)</strong></p>
<p>10BASE-T 的通信距离稍短，每个站到集线器的距离不超过 100 m  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211110132602840.png" alt="image-20211110132602840" style="zoom:50%;" />

<h4 id="集线器"><a href="#集线器" class="headerlink" title="集线器"></a>集线器</h4><p>使用电子器件模拟实际电缆线的工作，因此整个系统仍然像一个传统的以太网那样运行</p>
<p><strong>特点</strong>：</p>
<p>​	使用集线器的以太网在<strong>逻辑上仍是一个总线网</strong>，各工作站使用的还是 CSMA&#x2F;CD 协议，并<strong>共享逻辑上的总线</strong>。</p>
<p>​	集线器很像一个多接口的转发器，<strong>工作在物理层，不进行碰撞检测</strong></p>
<h4 id="以太网-Ethernet-的两个标准"><a href="#以太网-Ethernet-的两个标准" class="headerlink" title="以太网(Ethernet)的两个标准"></a>以太网(Ethernet)的两个标准</h4><p><strong>DIX Ethernet V2</strong>——世界上第一个局域网产品(以太网)的规约——10M&#x2F;s的以太网规约</p>
<p>I<strong>EEE802.3</strong>是抵押给IEEE802委员会指定的局域网标准</p>
<h4 id="IEEE802标准"><a href="#IEEE802标准" class="headerlink" title="IEEE802标准"></a>IEEE802标准</h4><p>IEEE于1980年2月成立一个局域网标准委员会，形成一系列的标准为<strong>IEEE 802 标准</strong>。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211110133144853.png" alt="image-20211110133144853" style="zoom:50%;" />

<h3 id="3-4-2-以太网的层次结构"><a href="#3-4-2-以太网的层次结构" class="headerlink" title="3.4.2 以太网的层次结构"></a>3.4.2 以太网的层次结构</h3><p>IEEE 802委员会提出的局域网参考模型主要定义了物理层和数据链路层的规范</p>
<p><strong>物理层</strong>：物理层负责与传输介质的连接，并在传输介质上传输比特流，因此，它描述和规定了与传输介质接口的特性。  </p>
<p><strong>数据链路层</strong>： OSI模型中数据链路层的功能在IEEE802模型中分成了**两个子层(MAC和LLC)**。</p>
<h4 id="MAC和LLC"><a href="#MAC和LLC" class="headerlink" title="MAC和LLC"></a>MAC和LLC</h4><p><strong>逻辑链路控制 LLC (Logical Link Control)子层</strong>：屏蔽对各种不同物理网络的访问方法的差异，向上提供数据传输服务的统一的逻辑接口</p>
<p><strong>媒体接入控制 MAC (Medium Access Control)子层</strong>：控制对传输介质的访问，并在物理层的基础上实现无差错通信。该子层随不同的物理网络差异较大</p>
<p>好处：</p>
<p>​	与接入到传输媒体有关的内容都放在 MAC子层，而 LLC 子层则与传输媒体无关。<br>​	<strong>不管采用何种协议的局域网，对 LLC 子层来说都是透明的。</strong>  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211110133749001.png" alt="image-20211110133749001" style="zoom:50%;" />

<p>TCP&#x2F;IP一般不考虑LLC子层：该体系经常使用的局域网是DIX Ethernet V2</p>
<h3 id="3-4-3-以太网的MAC层"><a href="#3-4-3-以太网的MAC层" class="headerlink" title="3.4.3 以太网的MAC层"></a>3.4.3 以太网的MAC层</h3><p>计算机要连接到局域网需要依靠网络接口板。<br>网络接口板又称为<strong>适配器</strong> (adapter) 或<strong>网络接口卡</strong> NIC (Network Interface Card)，或“<strong>网卡</strong>”</p>
<p>适配器的重要功能：<br>    进行串行&#x2F;并行转换。<br>    对数据进行缓存。<br>    在计算机的操作系统安装设备驱动程序。<br>    实现以太网协议。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211110134315032.png" alt="image-20211110134315032" style="zoom:50%;" />

<h4 id="1-MAC层的硬件地址"><a href="#1-MAC层的硬件地址" class="headerlink" title="1. MAC层的硬件地址"></a>1. MAC层的硬件地址</h4><p>局域网中，硬件地址又称<strong>物理地址</strong>，或<strong>MAC地址</strong></p>
<p>地址严格来说是每一个站的”名字“或标识符，采用6字节(48位)，固化在网卡ROM中的</p>
<p>前三个字节(高位24位)：组织唯一标识符OUI</p>
<p>后三个字节(低位24位)：扩展唯一标识符EUI，<strong>必须保证生产出的适配器没有重复地址</strong></p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211110135646122.png" alt="image-20211110135646122" style="zoom:50%;" />

<p><strong>I&#x2F;G 位</strong>(Individual&#x2F;Group)：字段的第一字节的最低位<br>    I&#x2F;G 位 &#x3D; 0时，地址字段表示一个<strong>单位地址</strong><br>    I&#x2F;G 位 &#x3D; 1时，地址字段表示一个<strong>组地址</strong>，用来进行多播，此时，IEEE只分配地址字段前3个字节中的23位<br>    当 I&#x2F;G 位分别为 0 和 1 时，一个地址块可分别生成 223个单个站地址和 223 个组地址。<br>    所有 48 位都为 1 时，为广播地址。只能作为目的地址使用  </p>
<p><strong>G&#x2F;L 位</strong>(Global&#x2F;Local)：第一字节的最低第2位<br>    G&#x2F;L 位 &#x3D; 0时，是<strong>全球管理</strong>(保证在全球没有相同的地址)<br>    G&#x2F;L 位 &#x3D; 1时，是<strong>本地管理</strong></p>
<p>适配器检查MAC地址：<br>    如果是<strong>发往本站的帧</strong>则收下，然后再进行其他的处理<br>    否则就将此帧丢掉</p>
<p>发往本站的帧：<br>    <strong>单播</strong>(unicast)帧(一对一)<br>    <strong>广播</strong>(broadcast)帧(一对全体)<br>    <strong>多播</strong>(multicast)帧(一对多)</p>
<p>所有的适配器都至少能够识别前两种帧，即<strong>能够识别单播地址和广播地址</strong>。<br>有的适配器可用编程方法识别多播地址。<br>只有目的地址才能使用广播地址和多播地址。<br>以<strong>混杂方式</strong> (promiscuous mode) 工作的以太网适配器只要“听到”有帧在以太网上传输就都接收下来。  </p>
<h4 id="2-MAC帧的格式"><a href="#2-MAC帧的格式" class="headerlink" title="2.MAC帧的格式"></a>2.MAC帧的格式</h4><p>以太网MAC帧格式标准：**DIX Ethernet V2标准(常用)**、IEEE的802.3标准</p>
<h5 id="DIX-Ethernet-V2标准"><a href="#DIX-Ethernet-V2标准" class="headerlink" title="DIX Ethernet V2标准"></a>DIX Ethernet V2标准</h5> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211112150936823.png" alt="image-20211112150936823" style="zoom:50%;" />

<p>类型字段：用来标识上一层使用的是什么协议，以便把收到的MAC帧交给上一层的协议。</p>
<p>同步码：实际传送的比MAC帧多8个字节；因为当一个站开始接收MAC帧时，没有与到达的比特流同步，因此MAC帧的开始若干比特无法接收，这样使得整个帧无效。这样需要插入同步码。  </p>
<p>数据字段：全称是<strong>MAC客户数据字段</strong>：46~1500字节</p>
<p>​	当数据字段的长度小于46字节时，应在数据字段的后面加入整数字节的<strong>填充字段</strong>，以保证以太网的 MAC 帧长不小于 64 字节。  </p>
<p>无效的MAC帧：<br>    帧的长度不是整数个字节<br>    FCS检查有差错<br>    数据字段不在46~1500字节之间</p>
<p>对于检查出的无效 MAC 帧就简单地丢弃。以太网不负责重传丢弃的帧。  </p>
<h5 id="IEEE802-3MAC标准"><a href="#IEEE802-3MAC标准" class="headerlink" title="IEEE802.3MAC标准"></a>IEEE802.3MAC标准</h5><p>与以太网V2 MAC 帧格式相似， 区别在于：<br>(1) IEEE 802.3 规定的 MAC 帧的第三个字段是“<strong>长度 &#x2F; 类型</strong>”。<br>    当这个字段值大于 0x0600 时（相当于十进制的 1536），就表示“类型”。这样的帧和以太网 V2 MAC 帧完全一样。<br>    当这个字段值小于 0x0600 时才表示“长度” 。</p>
<p>(2) 当“长度&#x2F;类型”字段值小于 0x0600 时，数据字段必须装入上面的逻辑链路控制 LLC 子层的 LLC 帧。</p>
<p>现在市场上流行的都是以太网V2 的 MAC 帧，但大家也常常把它称为 IEEE 802.3 标准的 MAC 帧。  </p>
<h3 id="3-4-4-扩展以太网"><a href="#3-4-4-扩展以太网" class="headerlink" title="3.4.4 扩展以太网"></a>3.4.4 扩展以太网</h3><p>局域网互联的原因：<br>(1) 局域网覆盖的距离有限<br>    单个局域网覆盖的距离往往不能满足应用的需要。<br>(2) 局域网能支持的连网计算机数目有限<br>    单个局域网所能连接的计算机数目往往不能满足应用的需要<br>(3) 局域网上能传输的通信量有限<br>    单个局域网所容许的通信量往往不能满足应用的需要。  </p>
<p>互联的本质：由于网络是分层次实现的，而局域网又各有不同的标准，因此网络互联的本质就是在不同的协议层次上实现协议的彼此转换。  </p>
<p>互联设备：<br>    在物理层上扩展：转发器(Repeater，重发器，中继器)、集线器(Hub)<br>    在数据链路层上扩展：网桥(Bridge)、交换机(Switch)</p>
<h4 id="转发器"><a href="#转发器" class="headerlink" title="转发器"></a>转发器</h4><p>别称：重发器、中继器</p>
<p>工作在物理层上，扩展以太网的物理覆盖范围</p>
<p>功能：<br>    连接两个同轴电缆以太网，将信号放大整形后，延申网络的传输距离<br>    不具有信号通路的选择功能<br>    随着双绞线成为以太网主流，已很少使用转发器</p>
<h4 id="集线器-1"><a href="#集线器-1" class="headerlink" title="集线器"></a>集线器</h4><p>使用多个集线器可连成更大的、 多级星形结构的以太网。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211112154628015.png" alt="image-20211112154628015" style="zoom:50%;" />

<p>(1) 集线器是使用电子器件来模拟实际电缆线的工作，因此整个系统仍然像一个传统的以太网那样运行。</p>
<p>(2) 使用集线器的以太网在<strong>逻辑上仍是一个总线网</strong>，各工作站使用的还是 CSMA&#x2F;CD 协议，并<strong>共享逻辑上的总线</strong>。</p>
<p>(3) 集线器很像一个多接口的转发器， <strong>工作在物理层</strong>。</p>
<p>(4) 集线器采用了专门的芯片，进行自适应串音回波抵消，减少了近端串音。  </p>
<p>优点：<br>    使原来属于不同碰撞域的以太网上的计算机能够进行跨碰撞域的通信。<br>    扩大了以太网覆盖的地理范围。  </p>
<p>缺点<br>    碰撞域增大了，但总的吞吐量并未提高。<br>    如果不同的碰撞域使用不同的数据率，那么就不能用集线器将它们互连起来<br>    集线器是个多接口的转发器，  不能把帧进行缓存</p>
<h4 id="网桥"><a href="#网桥" class="headerlink" title="网桥"></a>网桥</h4><p>网桥工作在数据链路层。</p>
<p>根据 MAC 帧的目的地址对收到的帧进行<strong>转发</strong>和<strong>过滤</strong></p>
<p>网桥的工作原理<br>    网桥从端口接收网段上传送的各种帧；<br>    <strong>每当收到一个帧时，先暂存在缓存中。</strong><br>    若此帧未出错，且欲发送的目的站的MAC地址属于另外一个网段，则通过<strong>查找“转发表”</strong> ，将收到的帧送往对应的端口转发。<br>    若此帧出错，则丢弃该帧。<br>    同一个网段内的帧，不会被网桥转发，不会增加网络负担  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211112155943205.png" alt="image-20211112155943205" style="zoom:50%;" />

<p>网桥使各网段成为隔离开的碰撞域</p>
<p>优点<br>    过滤通信量、扩大了物理范围、提高了可靠性。<br>    可互连不同物理层、不同 MAC 子层和不同速率（如10 Mb&#x2F;s 和 100 Mb&#x2F;s 以太网）的局域网。<br>缺点<br>    存储转发增加了时延。<br>    在 MAC 子层并没有流量控制功能。<br>    具有不同 MAC 子层的网段桥接在一起时时延更大。<br>    网桥只适合于用户数不太多(不超过几百个)和通信量不太大的局域网，否则有时还会因传播过多的广播信息而产生网络拥塞。这就是所谓的广播风暴。  </p>
<p><strong>广播风暴</strong>：</p>
<p>​	广播风暴（broadcast storm） 简单的讲是指当广播数据充斥网络无法处理， 并占用大量网络带宽，导致正常业务不能运行，甚至彻底瘫痪，这就发生了“广播风暴”。<br>​	一个数据帧或包被传输到本地网段 （由广播域定义）上的每个节点就是广播；由于网络拓扑的设计和连接问题，或其他原因导致广播在网段内大量复制，传播数据帧，导致网络性能下降，甚至网络瘫痪，这就是广播风暴。  </p>
<h5 id="网桥和集线器的区别"><a href="#网桥和集线器的区别" class="headerlink" title="网桥和集线器的区别"></a>网桥和集线器的区别</h5><p>集线器在转发帧时，不对传输媒体进行检测。</p>
<p>网桥在转发帧之前必须执行 CSMA&#x2F;CD 算法。<br>    若在发送过程中出现碰撞，就必须停止发送和进行退避。<br>    在这一点上网桥的接口很像一个网卡。但网桥却没有网卡。</p>
<p>由于网桥没有网卡，因此网桥并不改变它转发的帧的源地址。  </p>
<h4 id="多端口网桥——以太网交换机"><a href="#多端口网桥——以太网交换机" class="headerlink" title="多端口网桥——以太网交换机"></a>多端口网桥——以太网交换机</h4><p>以太网交换机的实质是：交换式集线器，是一个多接口的网桥</p>
<p>工作在数据链路层</p>
<h5 id="以太网交换机的特点"><a href="#以太网交换机的特点" class="headerlink" title="以太网交换机的特点"></a>以太网交换机的特点</h5><ol>
<li><p>每个接口都直接与一个单台主机或另一个以太网交换机相连，并且一般都<strong>工作在全双工方式</strong>。</p>
</li>
<li><p>以太网交换机具有<strong>并行性</strong>。<br>能同时连通多对接口， 使每一对相互通信的主机都能像独占通信媒体那样，进行无碰撞地传输数据。</p>
</li>
<li><p>相互通信的主机都是独占传输媒体，无碰撞地传输数据。  </p>
</li>
<li><p>以太网交换机的<strong>接口有存储器</strong>， 能在输出端口繁忙时把到来的帧进行缓存。</p>
</li>
<li><p>以太网交换机是一种即插即用设备，其内部的帧交换表（又称为地址表）是通过<strong>自学习算法</strong>自动地逐渐建立起来</p>
</li>
<li><p>以太网<strong>交换机</strong>使用了<strong>专用的交换结构芯片</strong>，<strong>用硬件转发</strong>，其转发速率要比<strong>使用软件转发的网桥</strong>快很多。</p>
</li>
</ol>
<h5 id="以太网交换机的优点"><a href="#以太网交换机的优点" class="headerlink" title="以太网交换机的优点"></a>以太网交换机的优点</h5><p><strong>用户独享带宽，增加了总容量。</strong></p>
<p>对于普通 10 Mbit&#x2F;s 的共享式以太网，若共有 N 个用户，则每个用户占有的平均带宽只有总带宽 (10 Mbit&#x2F;s)的 N 分之一。<br>使用以太网交换机（交换式以太网）时，虽然在每个接口到主机的带宽还是 10 Mbit&#x2F;s，但由于一个用户在通信时是独占而不是和其他网络用户共享传输媒体的带宽，因此对于拥有 N 个接口的交换机的总容量为 N×10Mbit&#x2F;s</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211112162437485.png" alt="image-20211112162437485" style="zoom:50%;" />

<h5 id="以太网交换机的交换方式"><a href="#以太网交换机的交换方式" class="headerlink" title="以太网交换机的交换方式"></a>以太网交换机的交换方式</h5><p><strong>存储转发方式</strong><br>    把整个数据帧先缓存后再进行处理。<br>直通 (cut-through) 方式<br>    接收数据帧的同时就立即按数据帧的目的 MAC 地址决定该帧的转发接口，因而提高了帧的转发速度。<br>    <strong>缺点</strong>是它<strong>不检查差错</strong>就直接将帧转发出去，因此有可能也将一些无效帧转发给其他的站。</p>
<p>在某些情况下，仍需要采用<strong>基于软件的</strong>存储转发方式进行交换，例如，当需要进行线路速率匹配、协议转换或差错检测时。</p>
<h5 id="以太网交换机的自学习功能"><a href="#以太网交换机的自学习功能" class="headerlink" title="以太网交换机的自学习功能"></a>以太网交换机的自学习功能</h5><p>以太网交换机运行自学习算法自动维护交换表。</p>
<p>开始时，以太网交换机里面的交换表是空的。</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211112162900829.png" alt="image-20211112162900829" style="zoom:50%;" />

<p><strong>自学习算法</strong>：</p>
<p>A 先向 B 发送一帧，从接口 1 进入到交换机。步骤如下：</p>
<ol>
<li>交换机收到帧后，<strong>先查找交换表</strong>，没有查到应从哪个接口转发这个帧。</li>
<li>交换机把这个帧的<strong>源地址 A</strong> 和<strong>接口 1 写入交换表</strong>中，并向除接口1以外的所有的接口<strong>广播这个帧</strong>。</li>
<li>C 和 D 将丢弃这个帧，因为目的地址不对。只 B 才收下这个目的地址正确的帧。这也称为<strong>过滤</strong>。</li>
<li>从新写入交换表的项目 (A, 1) 可以看出，以后不管从哪一个接口收到帧，只要其目的地址是A，就应当把收到的帧从接口1转发出去。</li>
</ol>
<p>B 通过接口 3 向 A 发送一帧。步骤如下：</p>
<ol>
<li>交换机查找交换表， 发现交换表中的 MAC 地址有 A。表明要发送给A的帧（即目的地址为 A 的帧）应从接口1转发。 于是就把这个帧传送到接口 1 转发给 A。 显然，现在已经没有必要再广播收到的帧。</li>
<li>交换表这时新增加的项目 (B, 3)，表明今后如有发送给 B 的帧，就应当从接口 3 转发出去。</li>
<li>经过一段时间后， 只要主机 C 和 D 也向其他主机发送帧， 以太网交换机中的交换表就会把转发到 C 或 D 应当经过的接口号（2 或 4）写入到交换表中。</li>
</ol>
<p><strong>有效时间</strong>：考虑到可能有时要在交换机的接口更换主机，或者主机要更换其网络适配器，这就需要更新交换表中的项目。为此，在交换表中每个项目都设有一定的有效时间（计时器）。过期的项目就自动被删除。</p>
<p>以太网交换机的这种自学习方法使得以太网交换机能够即插即用，不必人工进行配置，因此非常方便。</p>
<h5 id="交换机自学习和转发帧的步骤归纳"><a href="#交换机自学习和转发帧的步骤归纳" class="headerlink" title="交换机自学习和转发帧的步骤归纳"></a>交换机自学习和转发帧的步骤归纳</h5><p>交换机收到一帧后先查找交换表中与收到帧的源地址有无相匹配的项目。<br>    如没有，就在交换表中增加一个项目（源地址、进入的接口和有效时间）。<br>    如有，则把原有的项目进行更新（进入的接口或有效时间）。</p>
<p>转发帧。 查找交换表中与收到帧的目的地址有无相匹配的项目。<br>    如没有，则向所有其他接口（进入的接口除外）转发(Flooding)。<br>    如有，则按交换表中给出的接口进行转发。<br>    若交换表中给出的接口就是该帧进入交换机的接口，则应丢弃这个帧（因为这时不需要经过交换机进行转发）。  </p>
<h4 id="交换机使用了生成树协议"><a href="#交换机使用了生成树协议" class="headerlink" title="交换机使用了生成树协议"></a>交换机使用了生成树协议</h4><p>为了增加网络的可靠性，会增加<strong>冗余链路</strong>。 自学习的过程就可能导致以太网帧在网络的某个环路中无限制地兜圈子。  </p>
<p>如图， 假定开始时， 交换机 #1 和 #2 的交换表都是空的， 主机 A 通过接口交换机 #1 向主机 B 发送一帧。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211112164037058.png" alt="image-20211112164037058" style="zoom:50%;" />

<p>按交换机自学习和转发方法，该帧的某个走向如下：离开交换机 #1 的接口 3 → 交换机 #2 的接口 1 → 接口 2 → 交换机 #1 的接口 4 → 接口 3 → 交换机 #2 的接口 1 →……。这样就无限制地循环兜圈子下去，白白消耗了网络资源  </p>
<p>IEEE 802.1D 标准制定了一个<strong>生成树协议 STP</strong> (Spanning Tree Protocol)。<br>    其要点是： 不改变网络的实际拓扑，但在逻辑上则切断某些链路，使得从一台主机到所有其他主机的路径是<strong>无环路的树状结构</strong>，从而消除了兜圈子现象。</p>
<p>基本原理：选择一个交换机作为生成树的根，然后以最短路径为依据，找到树上的每一个结点，使整个连通的网络中不存在回路  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211112164701562.png" alt="image-20211112164701562" style="zoom:50%;" />

<h5 id="总线以太网和星形以太网比较"><a href="#总线以太网和星形以太网比较" class="headerlink" title="总线以太网和星形以太网比较"></a>总线以太网和星形以太网比较</h5><p>早期， 以太网采用无源的总线结构。</p>
<p>现在， 采用以太网交换机的星形结构成为以太网的首选拓扑。</p>
<p>总线以太网使用 CSMA&#x2F;CD 协议，以半双工方式工作。</p>
<p>以太网交换机不使用共享总线，没有碰撞问题，因此不使用 CSMA&#x2F;CD 协议，而是以全双工方式工作。 但<strong>仍然采用以太网的帧结构</strong>。  </p>
<h3 id="3-4-5-虚拟局域网"><a href="#3-4-5-虚拟局域网" class="headerlink" title="3.4.5 虚拟局域网"></a>3.4.5 虚拟局域网</h3><p>利用以太网交换机可以很方便地实现虚拟局域网 VLAN (Virtual LAN)。</p>
<p><strong>虚拟局域网 VLAN</strong> 是由一些局域网网段构成的与物理位置无关的逻辑组， 这些网段具有某些共同的需求。</p>
<p>每一个 VLAN 的帧都有一个明确的标识符，指明发送这个帧的计算机是属于哪一个 VLAN。</p>
<p><strong>虚拟局域网其实只是局域网给用户提供的一种服务，而并不是一种新型局域网。</strong>  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211112165411719.png" alt="image-20211112165411719" style="zoom:50%;" />

<p>10台计算机划分为三个虚拟局域网：$VLAN_1, VLAN_2, VLAN_3$</p>
<p>当$B_1$向$VLAN_2$工作组内成员发送数据时，工作站$B_2$和$B_3$将会收到广播的信息。</p>
<p>$B_1$发送数据时，工作站$A_1$，$A_2$和$C_1$都不会收到$B_1$发出的广播信息。  </p>
<p>虚拟局域网限制了接收广播信息的工作站数，使得网络不会因传播过多的广播信息(即<strong>广播风暴</strong>)而引起性能恶化。  </p>
<h4 id="虚拟局域网使用的以太网帧格式"><a href="#虚拟局域网使用的以太网帧格式" class="headerlink" title="虚拟局域网使用的以太网帧格式"></a>虚拟局域网使用的以太网帧格式</h4><p>IEEE 批准了 802.3ac 标准， 该标准定义了以太网的帧格式的扩展， 以支持虚拟局域网。<br>虚拟局域网协议允许在以太网的帧格式中插入一个4字节的标识符，称为 **VLAN 标记 (tag)**，用来指明发送该帧的计算机属于哪一个虚拟局域网。<br>插入 VLAN 标记得出的帧称为 802.1Q 帧或带标记的以太网帧。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211112165836744.png" alt="image-20211112165836744" style="zoom:50%;" />

<h4 id="冲突域-x2F-碰撞域与广播域"><a href="#冲突域-x2F-碰撞域与广播域" class="headerlink" title="冲突域&#x2F;碰撞域与广播域"></a>冲突域&#x2F;碰撞域与广播域</h4><p>连接在同一个网桥或交换机端口的计算机构成一个冲突域，即处于同一个端口的计算机在某一个时刻只能有一台计算机发送数据，其他处于监听状态，如果出现两台或两台以上的计算机同时发送数据，便会冲突。</p>
<p>网桥或交换机的本质是通过将网络分割成多个冲突域来增强网络服务。</p>
<p>因为网桥会向所有端口转发未知目的端口的数据帧，所以网桥&#x2F;交换网络会产生广播风暴。  </p>
<h4 id="虚拟局域网的优点"><a href="#虚拟局域网的优点" class="headerlink" title="虚拟局域网的优点"></a>虚拟局域网的优点</h4><ol>
<li><p>安全性好</p>
<p>没有路由的情况下，不同虚拟局域网间不能相互通信</p>
</li>
<li><p>网络分段</p>
<p>可将物理网络按逻辑分段，而不是按物理分段。</p>
<p>可将不同地点、不同部门的计算机划分在一个虚拟局域网上</p>
</li>
<li><p>提供较好的灵活性</p>
<p>方便地将一个站点加入或从一个VLAN中删除。</p>
</li>
</ol>
<h3 id="3-4-6-高速以太网"><a href="#3-4-6-高速以太网" class="headerlink" title="3.4.6 高速以太网"></a>3.4.6 高速以太网</h3><h4 id="100BASE-T以太网"><a href="#100BASE-T以太网" class="headerlink" title="100BASE-T以太网"></a>100BASE-T以太网</h4><p>速率达到或超过 100 Mbit&#x2F;s 的以太网称为<strong>高速以太网</strong>  </p>
<p>100BASE-T 在双绞线上传送 100 Mbit&#x2F;s 基带信号的星形拓扑以太网，仍使用 IEEE 802.3 的CSMA&#x2F;CD 协议，工作方式为<strong>半双工</strong>。</p>
<p>100BASE-T 以太网又称为<strong>快速以太网</strong> (Fast Ethernet)。</p>
<p>用户使用100Mbit的适配器或100Mbit&#x2F;s的集线器或交换机，可以升级到100Mbit&#x2F;s</p>
<p>1995 年IEEE已把 100BASE-T 的快速以太网定为正式标准，其代号为 <strong>IEEE 802.3u</strong>。  </p>
<h5 id="100BASE-T-以太网的特点"><a href="#100BASE-T-以太网的特点" class="headerlink" title="100BASE-T 以太网的特点"></a>100BASE-T 以太网的特点</h5><p>可在全双工方式下工作而无冲突发生。 <strong>在全双工方式下工作时，不使用 CSMA&#x2F;CD 协议。</strong></p>
<p><strong>MAC 帧格式仍然是 802.3 标准规定的。</strong></p>
<p>保持最短帧长不变，仍为64字节</p>
<p>一个网段的最大电缆长度为 100 m</p>
<p>争用期使5.12 µs</p>
<p>帧间时间间隔从原来的 9.6 µs 改为现在的 0.96µs。  </p>
<h5 id="100-Mbit-x2F-s-以太网的三种不同的物理层标准"><a href="#100-Mbit-x2F-s-以太网的三种不同的物理层标准" class="headerlink" title="100 Mbit&#x2F;s 以太网的三种不同的物理层标准"></a>100 Mbit&#x2F;s 以太网的三种不同的物理层标准</h5> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211112171216816.png" alt="image-20211112171216816" style="zoom:50%;" />

<h4 id="吉比特以太网"><a href="#吉比特以太网" class="headerlink" title="吉比特以太网"></a>吉比特以太网</h4><p>允许在 1 Gbit&#x2F;s 下以全双工和半双工两种方式工作。</p>
<p>使用 IEEE 802.3 协议规定的帧格式。</p>
<p><strong>在半双工方式下使用 CSMA&#x2F;CD 协议，全双工方式不使用 CSMA&#x2F;CD 协议。</strong></p>
<p>与 10BASE-T 和 100BASE-T 技术向后兼容。</p>
<p>吉比特以太网可用作现有网络的主干网，也可在高带宽（高速率）的应用场合中。  </p>
<h5 id="吉比特以太网的物理层"><a href="#吉比特以太网的物理层" class="headerlink" title="吉比特以太网的物理层"></a>吉比特以太网的物理层</h5><p>使用两种成熟的技术： 一种来自现有的以太网，另一种则是美国国家标准协会 ANSI 制定的光纤通道 FC (Fiber Channel)  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211112171441345.png" alt="image-20211112171441345" style="zoom:50%;" />

<h5 id="半双工方式工作的吉比特以太网"><a href="#半双工方式工作的吉比特以太网" class="headerlink" title="半双工方式工作的吉比特以太网"></a>半双工方式工作的吉比特以太网</h5><p>吉比特以太网工作在半双工方式时，就必须进行碰撞检测。</p>
<p>由于数据率提高了，因此只有减小最大电缆长度或增大帧的最小长度。<br>为保持 64 字节最小帧长度，以及 100 米的网段的最大长度，吉比特以太网增加了两个功能：<br>    <strong>载波延伸</strong> (carrier extension)<br>    <strong>分组突发</strong> (packet bursting)<br>当吉比特以太网工作在全双工方式时， <strong>不使用</strong>载波延伸和分组突发  </p>
<h5 id="载波延伸"><a href="#载波延伸" class="headerlink" title="载波延伸"></a>载波延伸</h5><p>使最短帧长仍为 64 字节（这样可以保持兼容性），同时<strong>将争用时间增大为 512 字节</strong>。<br>凡发送的 MAC 帧长不足 512 字节时，就用一些特殊字符填充在帧的后面，使MAC 帧的发送长度增大到 512 字节。接收端在收到以太网的 MAC 帧后，要将所填充的特殊字符删除后才向高层交付。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211112171845591.png" alt="image-20211112171845591" style="zoom:50%;" />

<h5 id="分组突发"><a href="#分组突发" class="headerlink" title="分组突发"></a>分组突发</h5><p>当很多短帧要发送时，第一个短帧要采用载波延伸方法进行填充，随后的一些短帧则可一个接一个地发送，只需留有必要的帧间最小间隔即可。这样就形成可一串分组的突发，直到达到1500 字节或稍多一些为止。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211112171922961.png" alt="image-20211112171922961" style="zoom:50%;" />

<h5 id="吉比特以太网配置举例"><a href="#吉比特以太网配置举例" class="headerlink" title="吉比特以太网配置举例"></a>吉比特以太网配置举例</h5> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211112172006666.png" alt="image-20211112172006666" style="zoom:50%;" />

<h4 id="10吉比特以太网和更快的以太网"><a href="#10吉比特以太网和更快的以太网" class="headerlink" title="10吉比特以太网和更快的以太网"></a>10吉比特以太网和更快的以太网</h4><p>10 吉比特以太网（10GE） 并非把吉比特以太网的速率简单地提高到 10 倍，其主要特点有：<br>    与 10 Mbit&#x2F;s、 100 Mbit&#x2F;s 和 1 Gbit&#x2F;s 以太网的帧格式完全相同。<br>    保留了 802.3 标准规定的以太网最小和最大帧长，便于升级。<br>    <strong>只工作在全双工方式</strong>， 因此没有争用问题，也不使用 CSMA&#x2F;CD 协议。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211112172053589.png" alt="image-20211112172053589" style="zoom:50%;" />

<h5 id="更快的以太网"><a href="#更快的以太网" class="headerlink" title="更快的以太网"></a>更快的以太网</h5><p>以太网的技术发展得很快。</p>
<p>在 10GE 之后又制订了 40GE&#x2F;100GE（即 40 吉比特以太网和 100 吉比特以太网）的标准 IEEE 802.3ba-2010 和802.3bm-2015。</p>
<p>40GE&#x2F;100GE 只工作在全双工的传输方式（因而不使用CSMA&#x2F;CD 协议），并仍保持了以太网的帧格式以及 802.3标准规定的以太网最小和最大帧长。</p>
<p>100GE 在使用单模光纤传输时，仍然可以达到 40 km 的传输距离，但这是需要波分复用（使用 4 个波长复用一根光纤，每一个波长的有效传输速率是 25 Gbit&#x2F;s）。</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211112172157244.png" alt="image-20211112172157244" style="zoom:50%;" />

<h5 id="端到端的以太网传输"><a href="#端到端的以太网传输" class="headerlink" title="端到端的以太网传输"></a>端到端的以太网传输</h5><p>以太网的工作范围已经从局域网（校园网、企业网）扩大到城域网和广域网，从而实现了<strong>端到端的以太网传输</strong>。</p>
<p>这种工作方式的好处有：<br>    技术成熟；<br>    互操作性很好， 不同厂商生产的以太网都能可靠地进行互操作；<br>    在广域网中使用以太网时价格便宜；<br>    采用统一的以太网帧格式，简化了操作和管理， 不需要在进行帧的格式转换。  </p>
<h5 id="以太网从-10-Mbit-x2F-s-到100-Gbit-x2F-s-的演进"><a href="#以太网从-10-Mbit-x2F-s-到100-Gbit-x2F-s-的演进" class="headerlink" title="以太网从 10 Mbit&#x2F;s 到100 Gbit&#x2F;s 的演进"></a>以太网从 10 Mbit&#x2F;s 到100 Gbit&#x2F;s 的演进</h5><p>以太网从 10 Mbit&#x2F;s 到 100 Gbit&#x2F;s 的演进证明了以太网是：<br>    可扩展的（从 10 Mbit&#x2F;s 到 100 Gbit&#x2F;s）；<br>    灵活的（多种传输媒体、全&#x2F;半双工、共享&#x2F;交换）；<br>    易于安装；<br>    稳健性好。  </p>
<h4 id="使用以太网进行宽带接入"><a href="#使用以太网进行宽带接入" class="headerlink" title="使用以太网进行宽带接入"></a>使用以太网进行宽带接入</h4><p>IEEE 在 2001 年初成立了 802.3 EFM 工作组，专门研究高速以太网的宽带接入技术问题。</p>
<p>以太网宽带接入具有以下特点：<br>    可以提供<strong>双向</strong>的宽带通信。<br>    可以根据用户对带宽的需求灵活地进行带宽<strong>升级</strong>。<br>    可以实现端到端的以太网传输，<strong>中间不需要再进行帧格式的转换</strong>。 这就提高了数据的传输效率且降低了传输的成本。<br>    <strong>但是不支持用户身份鉴别。</strong></p>
<h5 id="PPPoE"><a href="#PPPoE" class="headerlink" title="PPPoE"></a>PPPoE</h5><p>PPPoE (PPP over Ethernet) 的意思是“在以太网上运行 PPP” ，它把 PPP 协议与以太网协议结合起来 —— 将 PPP 帧再封装到以太网中来传输。</p>
<p>现在的光纤宽带接入 FTTx 都要使用 PPPoE 的方式进行接入，不需要使用调制解调器，只有一个RJ-45插口。</p>
<p>在 PPPoE 弹出的窗口中键入在网络运营商购买的用户名和密码，就可以进行宽带上网了。</p>
<p>利用 ADSL 进行宽带上网时，从用户个人电脑到家中的 ADSL调制解调器之间，也是使用 RJ-45 和 5 类线（即以太网使用的网线）进行连接的，并且也是使用 PPPoE 弹出的窗口进行拨号连接的。 ADSL调制解调器将以太网帧转换成PPP帧。  </p>
<h1 id="第四章-网络层"><a href="#第四章-网络层" class="headerlink" title="第四章 网络层"></a>第四章 网络层</h1><h2 id="4-1-网络层提供的两种服务"><a href="#4-1-网络层提供的两种服务" class="headerlink" title="4.1 网络层提供的两种服务"></a>4.1 网络层提供的两种服务</h2><h3 id="面向连接的服务"><a href="#面向连接的服务" class="headerlink" title="面向连接的服务"></a>面向连接的服务</h3><p>可靠交付由<strong>网络</strong>负责</p>
<p>通信之前先建立<strong>虚电路</strong> (Virtual Circuit)，以保证双方通信所需的一切网络资源。  </p>
<p>再使用<strong>可靠传输</strong>的网络协议，就可使所发送的分组无差错按序到达终点，不丢失、不重复  </p>
<p>可靠传输采用应答来实现，即可靠&#x2F;不可靠可用有&#x2F;无应答来区分  </p>
<p>面向连接</p>
<p>​	本质是保证数据的<strong>顺序传送</strong>；<br>​	特征是数据传送必须经过建立连接、传送数据和拆除连接三个阶段。  </p>
<p><strong>可靠性与是否连接没有关系</strong></p>
<p>虚电路服务：主机1给主机2发送的所有分组都沿着同一条虚电路传送<br>    虚电路表示这只是一条<strong>逻辑上的连接</strong>，分组都沿着这条逻辑连接<strong>按照存储转发方式传送</strong>， 而并不是真正建立了一条物理连接。  </p>
<p>数据链路：相邻两节点间的数据传输通道。<br>逻辑信道：相邻两点间的一条数据链路可支持多条逻辑信道，为多对通信服务<br>                    大白话就是两节点之间的其中一条数据链路</p>
<h3 id="无连接"><a href="#无连接" class="headerlink" title="无连接"></a>无连接</h3><p>网络提供数据报服务</p>
<p>即网络层向上只提供简单灵活的、 **无连接的、尽最大努力交付(不可靠)**的数据报服务，对源主机没有任何承诺。  </p>
<p>网络在发送分组时不需要先建立连接。每一个分组（即 IP数据报）携带完整的地址信息， <strong>独立传输，独立寻址</strong>，彼此之间不需要保持任何的顺序关系（不进行编号）。  </p>
<p><strong>网络层不提供服务质量的承诺。</strong>  所传送的分组可能出错、丢失、重复和失序（不按序到达终点），当然也不保证分组传送的时限。  </p>
<p>好处：网络的造价大大降低，运行方式灵活，能够适应多种应用  </p>
<h3 id="虚电路服务与数据报服务的优缺点"><a href="#虚电路服务与数据报服务的优缺点" class="headerlink" title="虚电路服务与数据报服务的优缺点"></a>虚电路服务与数据报服务的优缺点</h3><h4 id="传送代价方面"><a href="#传送代价方面" class="headerlink" title="传送代价方面"></a>传送代价方面</h4><p>网络上传送的报文长度，在很多情况下都很短。</p>
<p>用数据报既迅速又经济。</p>
<p>若用虚电路，为了传送一个分组而建立虚电路和释放虚电路就显得太浪费网络资源了。  </p>
<h4 id="交换节点存储转发方面"><a href="#交换节点存储转发方面" class="headerlink" title="交换节点存储转发方面"></a>交换节点存储转发方面</h4><p>在使用数据报时，每个分组必须携带完整的地址信息。</p>
<p>在使用虚电路的情况下，每个分组不需要携带完整的目的地址，而仅需要有个很简单的虚电路号码的标志。</p>
<p>这就使分组的控制信息部分的比特数减少，因而减少了额外开销。  </p>
<h4 id="差错和流量控制方面"><a href="#差错和流量控制方面" class="headerlink" title="差错和流量控制方面"></a>差错和流量控制方面</h4><p>在使用数据报时，主机承担端到端的差错控制和流量控制。</p>
<p>在使用虚电路时，分组按顺序交付，网络可以负责差错控制和流量控制。  </p>
<h4 id="使用场合"><a href="#使用场合" class="headerlink" title="使用场合"></a>使用场合</h4><p>数据报服务对军事通信有其特殊的意义。当某个结点发生故障时，后续的分组就可另选路由，因而提高了可靠性。</p>
<p>但在使用虚电路时，结点发生故障就必须重新建立另一条虚电路。</p>
<p>数据报服务还很适合于将一个分组发送到多个地址(即广播或多播)。  </p>
<table>
<thead>
<tr>
<th>对比的方面</th>
<th>虚电路服务</th>
<th>数据报服务</th>
</tr>
</thead>
<tbody><tr>
<td>思路</td>
<td>可靠通信应当由网络来保证</td>
<td>可靠通信应当由用户主机来保证</td>
</tr>
<tr>
<td>连接的建立</td>
<td>必须有</td>
<td>不需要</td>
</tr>
<tr>
<td>终点地址</td>
<td>仅在连接建立阶段使用，每个分组使用短的虚电路号</td>
<td>每个分组都有终点的完整地址</td>
</tr>
<tr>
<td>分组的转发</td>
<td>属于同一条虚电路的分组均按照同一路由进行转发</td>
<td>每个分组独立选择路由进行转发</td>
</tr>
<tr>
<td>当结点出故障时</td>
<td>所有通过出故障的结点的虚 电路均不能工作</td>
<td>出故障的结点可能会丢失分组，一些路由可能会发生变化</td>
</tr>
<tr>
<td>分组的顺序</td>
<td>总是按发送顺序到达终点</td>
<td>到达终点时不一定按发送顺序</td>
</tr>
<tr>
<td>端到端的差错处 理和流量控制</td>
<td>可以由网络负责，也可以由 用户主机负责</td>
<td>由用户主机负责</td>
</tr>
</tbody></table>
<h2 id="4-2-网际协议IP-Internet-Protocol"><a href="#4-2-网际协议IP-Internet-Protocol" class="headerlink" title="4.2 网际协议IP(Internet Protocol)"></a>4.2 网际协议IP(Internet Protocol)</h2><p>与 IP 协议配套使用的还有三个协议：<br>    地址解析协议 ARP(Address Resolution Protocol)<br>    网际控制报文协议 ICMP(Internet Control Message Protocol)<br>    网际组管理协议 IGMP(Internet Group Management Protocol)  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211113133725077.png" alt="image-20211113133725077" style="zoom:50%;" />

<h3 id="4-2-1-虚拟互连网络"><a href="#4-2-1-虚拟互连网络" class="headerlink" title="4.2.1 虚拟互连网络"></a>4.2.1 虚拟互连网络</h3><p>将网络互相连接起来要使用一些中间设备，中间设备又称为<strong>中间系统</strong>或<strong>中继 (relay)系统</strong>。有以下五种不同的中间设备：<br>    物理层中继系统： <strong>转发器</strong> (repeater)。<br>    数据链路层中继系统： <strong>网桥</strong> 或 <strong>交换机</strong>。<br>    网络层中继系统： <strong>路由器</strong> (router)。<br>    网络层以上的中继系统： <strong>网关</strong> (gateway)。  </p>
<p>转发器或网桥知识把一个网络扩大，仍然是一个网络</p>
<p>网络互连都是指用<strong>路由器</strong>进行网络互连和路由选择。   </p>
<p><strong>虚拟互连网络</strong>也就是逻辑互连网络，它的意思就是互连起来的各种<strong>物理网络的异构性</strong>本来是客观存在的，但是我们利用 <strong>IP 协议</strong>就可以使这些性能各异的网<br>络在网络层上看起来好像是一个<strong>统一的网络</strong>。  </p>
<p>使用 IP 协议的虚拟互连网络可简称为 <strong>IP 网</strong>。</p>
<p><strong>如果在这种覆盖全球的 IP 网的上层使用 TCP 协议，那么就是现在的互联网 (Internet)。</strong>  </p>
<h3 id="路由器"><a href="#路由器" class="headerlink" title="路由器"></a>路由器</h3><p><strong>路由器</strong>在网际互连中的作用：主机 A 向主机 B 发送数据报  ，先要检查目的主机 B 是否与源主机 A 连接在同一个网络上，是则将数据报<strong>直接交付</strong>给目的主机B，否则通过路由器转发则是间接交付</p>
<p>路由器是一种<strong>网络层设备</strong></p>
<p>主要作用：<strong>连通不同的网络</strong>、<strong>选择信息传送的线路</strong>。</p>
<h4 id="路由器的结构"><a href="#路由器的结构" class="headerlink" title="路由器的结构"></a>路由器的结构</h4><p>路由器是一种具有多个输入端口和多个输出端口的<strong>专用计算机</strong>，其任务是<strong>转发分组</strong>。</p>
<p><strong>路由器的转发分组正是网络层的主要工作。</strong>  </p>
<h5 id="典型的路由器结构"><a href="#典型的路由器结构" class="headerlink" title="典型的路由器结构"></a>典型的路由器结构</h5><p>整个的路由器结构可划分为两大部分：路由选择部分、分组转发部分</p>
<p><strong>路由选择部分</strong><br>    也叫做控制部分，其核心构件是路由选择处理机。<br>    路由选择处理机的任务是根据所选定的路由选择协议构造出<strong>路由表</strong>，同时经常或定期地和相邻路由器交换路由信息而不断地更新和维护路由表。  </p>
<p><strong>分组转发部分</strong>由三部分组成：<br>    <strong>交换结构</strong> (switching fabric)：又称为交换组织，其作用是根据转发表  (forwarding table) 对分组进行处理。<br>    <strong>一组输入端口</strong><br>    <strong>一组输出端口</strong><br>（请注意：这里的端口就是硬件接口）  </p>
<p>“<strong>转发</strong>”(forwarding) 就是路由器根据转发表将用户的 IP 数据报从合适的端口转发出去。<br>“<strong>路由选择</strong>”(routing) 则是按照分布式算法，根据从各相邻路由器得到的关于网络拓扑的变化情况，动态地改变所选择的路由。<br>路由表是根据路由选择算法得出的。而转发表是从路由表得出的。</p>
<p>输入端口中的<strong>查找和转发功能</strong>：</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211113141844717.png" alt="image-20211113141844717" style="zoom:50%;" />

<p>输出端口：</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211113142007591.png" alt="image-20211113142007591" style="zoom:50%;" />

<h5 id="分组丢弃"><a href="#分组丢弃" class="headerlink" title="分组丢弃"></a>分组丢弃</h5><p>​	若路由器处理分组的速率赶不上分组进入队列的速率，则队列的存储空间最终必定减少到零，这就使后面再进入队列的分组由于没有存储空间而只能被丢弃。</p>
<p>​	<strong>路由器中的输入或输出队列产生溢出是造成分组丢失的重要原因。</strong></p>
<h4 id="交换结构"><a href="#交换结构" class="headerlink" title="交换结构"></a>交换结构</h4><p><strong>交换结构把分组从一个输入端口转移到某个合适的输出端口。</strong></p>
<p>实现交换有多种方法。常用交换方法有三种：通过存储器、通过总线、通过纵横交换结构</p>
<h5 id="通过存储器"><a href="#通过存储器" class="headerlink" title="通过存储器"></a>通过存储器</h5><p>最早使用的路由器就是利用普通的计算机，用计算机的CPU作为路由器的路由选择处理机，路由器的输入和输出端口和操作系统中的I&#x2F;O设备一样。  </p>
<p>输入端口收到分组时，用中断方式通知路由选择处理机</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211113142940712.png" alt="image-20211113142940712" style="zoom:50%;" />

<h5 id="通过总线"><a href="#通过总线" class="headerlink" title="通过总线"></a>通过总线</h5><p>数据报从输入端口通过<strong>共享的总线</strong>直接传送到合适的输出端口，而<strong>不需要路由选择处理机的干预。</strong></p>
<p>现代技术将总线的带宽提高到<strong>每秒吉比特</strong>的速度</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211113143052686.png" alt="image-20211113143052686" style="zoom:50%;" />

<h5 id="通过纵横交换结构"><a href="#通过纵横交换结构" class="headerlink" title="通过纵横交换结构"></a>通过纵横交换结构</h5><p>这种交换结构常称为<strong>互连网络</strong></p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211113143120198.png" alt="image-20211113143120198" style="zoom:50%;" />

<h3 id="4-2-2-分类的IP地址"><a href="#4-2-2-分类的IP地址" class="headerlink" title="4.2.2 分类的IP地址"></a>4.2.2 分类的IP地址</h3><h4 id="IP地址及其表示方法"><a href="#IP地址及其表示方法" class="headerlink" title="IP地址及其表示方法"></a>IP地址及其表示方法</h4><p>IP 地址就是给每个连接在互联网上的主机（或路由器）分配一个在全世界范围是<strong>唯一的 32 位的标识符</strong>。  </p>
<p>IP地址的编址方法：分类的IP地址、子网的划分、构成超网</p>
<h5 id="分类IP地址"><a href="#分类IP地址" class="headerlink" title="分类IP地址"></a>分类IP地址</h5><p>将IP地址划分为若干个固定类（A - E类）。</p>
<p>每一类地址都由两个固定长度的<strong>字段</strong>组成，其中一个字段是<strong>网络号 net-id</strong>，它标志主机（或路由器）所连接到的网络，而另一个字段则是<strong>主机号 host-id</strong>，它标志该主机（或路由器）。</p>
<p><strong>主机号在它前面的网络号所指明的网络范围内必须是唯一的。</strong></p>
<p>由此可见， <strong>一个 IP 地址在整个互联网范围内是唯一的</strong>。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211113145223287.png" alt="image-20211113145223287" style="zoom:50%;" />

<p>这种两级的IP地址可以记为：IP地址 ::&#x3D;{&lt;网络号&gt;, &lt;主机号&gt;}  </p>
<p>​	::&#x3D; 代表 “定义为”</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211113145344804.png" alt="image-20211113145344804" style="zoom:50%;" />

<p>好处：</p>
<p>​	各种网络差异很大，有的网络拥有很多主机，而有的网络拥有的主机数目很少。</p>
<p>​	将IP地址划分成不同类别A、 B、 C可以满足不同用户的需求。</p>
<p>​	当一个单位申请到一个IP地址时，只是申请了一个网络号Net-id，具体的主机号由各个单位自行分配。  </p>
<h5 id="点分十进制记法"><a href="#点分十进制记法" class="headerlink" title="点分十进制记法"></a>点分十进制记法</h5> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211113145706059.png" alt="image-20211113145706059" style="zoom:50%;" />

<h4 id="常用的三种类别的IP地址"><a href="#常用的三种类别的IP地址" class="headerlink" title="常用的三种类别的IP地址"></a>常用的三种类别的IP地址</h4><table>
<thead>
<tr>
<th>网络类别</th>
<th>最大可指派的网络数</th>
<th>第一个可指派的网络号</th>
<th>最后一个可指派的网络号</th>
<th>每个网络中最大主机数</th>
</tr>
</thead>
<tbody><tr>
<td>A</td>
<td>$126 (2^7 – 2) $</td>
<td>1</td>
<td>126</td>
<td>$16777214 (2^{24}-2)$</td>
</tr>
<tr>
<td>B</td>
<td>$16383 (2^{14} – 1)$</td>
<td>128.1</td>
<td>191.255</td>
<td>$65534 (2^{16}-2)$</td>
</tr>
<tr>
<td>C</td>
<td>$2097151 (2^{21} – 1)$</td>
<td>192.0.1</td>
<td>223.255.255</td>
<td>$254 (2^8-2)$</td>
</tr>
</tbody></table>
<h5 id="2个特殊的host-id"><a href="#2个特殊的host-id" class="headerlink" title="2个特殊的host-id"></a>2个特殊的host-id</h5><p>​	<strong>全“0”</strong>的Host-id表示该IP地址是“本主机”所连接的单个网络地址。<br>​		如IP地址为 5.6.7.8，则网络地址为 5.0.0.0；<br>​	<strong>全“1”</strong>的Host-id表示“所有(all)”，即该网络上的所有主机。  </p>
<h5 id="特殊的net-id"><a href="#特殊的net-id" class="headerlink" title="特殊的net-id"></a>特殊的net-id</h5><p>A类地址<br>    (1) IP地址的全“0”表示“这个（This）” 。 0.0.0.0<br>    (2) Net-id为全“0”，是保留地址，表示“本网络”。<br>    (3) Net-id为127，为本地软件的环路测试，本主机使用。<br>B类地址<br>    Net-id全为“0”不使用 10000000 00000000 &#x3D; 128.0<br>C类地址 11000000 00000000 00000000<br>    Net-id全为“0”不使用 &#x3D; 192.0.0  </p>
<h5 id="一般不使用的特殊的-IP-地址"><a href="#一般不使用的特殊的-IP-地址" class="headerlink" title="一般不使用的特殊的 IP 地址"></a>一般不使用的特殊的 IP 地址</h5><table>
<thead>
<tr>
<th>网络号</th>
<th>主机号</th>
<th>源地址使用</th>
<th>目的地址使用</th>
<th>代表的意思</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>0</td>
<td>可以</td>
<td>不可</td>
<td>在本网络上的本主机（见 6.6 节 DHCP 协议）</td>
</tr>
<tr>
<td>0</td>
<td>host-id</td>
<td>可以</td>
<td>不可</td>
<td>在本网络上的某台主机 host-id</td>
</tr>
<tr>
<td>全 1</td>
<td>全 1</td>
<td>不可</td>
<td>可以</td>
<td>只在本网络上进行广播（各路由器均不转发）</td>
</tr>
<tr>
<td>net-id</td>
<td>全 1</td>
<td>不可</td>
<td>可以</td>
<td>对 net-id 上的所有主机进行广播</td>
</tr>
<tr>
<td>127</td>
<td>非全 0 或全 1 的任何数</td>
<td>可以</td>
<td>可以</td>
<td>用作本地软件环回测试之用</td>
</tr>
</tbody></table>
<h5 id="IP地址的重要特点"><a href="#IP地址的重要特点" class="headerlink" title="IP地址的重要特点"></a>IP地址的重要特点</h5><p>(1) IP 地址是一种分等级的地址结构。   </p>
<p>(2) 实际上 IP 地址是标志一个主机（或路由器）和一条链路的接口。  </p>
<p>​	当一个主机同时连接到两个网络上时，该主机就必须同时具有两个相应的 IP 地址，其网络号 net-id 必须是不同的。这种主机称为<strong>多归属主机</strong>  </p>
<p>(3) 用转发器或网桥连接起来的若干个局域网仍为一个网络，因此这些局域网都具有同样的网络号 net-id。  </p>
<p>(4) 所有分配到网络号 net-id 的网络，无论是范围很小的局域网，还是可能覆盖很大地理范围的广域网，都是平等的。  </p>
<h3 id="4-2-3-IP地址与硬件地址"><a href="#4-2-3-IP地址与硬件地址" class="headerlink" title="4.2.3 IP地址与硬件地址"></a>4.2.3 IP地址与硬件地址</h3><p>IP 地址与硬件地址是不同的地址。  </p>
<p>从层次的角度看，<br>    <strong>硬件地址（或物理地址）</strong> 是数据链路层和物理层使用的地址。<br>    <strong>IP 地址</strong>是网络层和以上各层使用的地址，是一种逻辑地址（称 IP 地址是逻辑地址是<strong>因为 IP 地址是用软件实现的）</strong>。  </p>
<p>IP 地址放在 IP 数据报的首部，而硬件地址则放在 MAC帧的首部。  </p>
<p>IP 层抽象的互联网屏蔽了下层很复杂的细节</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211113155427815.png" alt="image-20211113155427815" style="zoom:50%;" />

 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211113155646602.png" alt="image-20211113155646602" style="zoom:50%;" />

<h3 id="4-2-4-地址解析协议ARP-Address-Resolution-Protocol"><a href="#4-2-4-地址解析协议ARP-Address-Resolution-Protocol" class="headerlink" title="4.2.4 地址解析协议ARP(Address Resolution Protocol)"></a>4.2.4 地址解析协议ARP(Address Resolution Protocol)</h3><p>通信时使用了两个地址：<br>    IP 地址（网络层地址）<br>    MAC 地址（数据链路层地址）  </p>
<p>APR的作用：从网络层使用的 IP 地址，解析出在数据链路层使用的硬件地址。  </p>
<p><strong>只作用在同一个局域网中</strong></p>
<p>每一个主机都设有一个 <strong>ARP 高速缓存</strong> (ARP cache)，里面有所在的局域网上的各主机和路由器的 IP 地址到硬件地址的<strong>映射表</strong>，动态更新（新增或超时删除）。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211113162338905.png" alt="image-20211113162338905" style="zoom:50%;" />

<p>主机A向本局域网上的主机B发送IP数据报，先在ARP告诉缓存种查看有无主机B的IP地址</p>
<p>​	如有，则查出对应IP地址<br>​	如没有，ARP在本局域网广播发送ARP请求分组，主机B发送ARP相应分组，写入自己的硬件地址，A收到后，更新ARP高速缓存</p>
<h4 id="ARP要点"><a href="#ARP要点" class="headerlink" title="ARP要点"></a>ARP要点</h4><p><strong>ARP请求分组</strong>的内容是发送方硬件地址 &#x2F; 发送方 IP 地址 &#x2F; 目标方硬件地址(未知时填 0) &#x2F; 目标方 IP 地址。</p>
<p>本地广播 ARP 请求（<strong>路由器不转发ARP请求</strong>），本局域网上所有主机都收到此ARP请求分组。</p>
<p><strong>ARP 响应分组</strong>的内容是发送方硬件地址 &#x2F; 发送方 IP地址 &#x2F; 目标方硬件地址 &#x2F; 目标方 IP 地址。</p>
<p><strong>ARP 分组封装在帧中传输</strong>。</p>
<p>ARP请求分组是 <strong>广播</strong>， ARP响应分组是<strong>单播</strong>  </p>
<h4 id="ARP高速缓存的作用"><a href="#ARP高速缓存的作用" class="headerlink" title="ARP高速缓存的作用"></a>ARP高速缓存的作用</h4><p><strong>存放最近获得的 IP 地址到 MAC 地址的绑定，以减少ARP 广播的数量。</strong></p>
<p>对每一个映射地址项目都设置<strong>生存时间</strong>。  </p>
<h4 id="应当注意的问题"><a href="#应当注意的问题" class="headerlink" title="应当注意的问题"></a>应当注意的问题</h4><p>ARP 是解决<strong>同一个局域网</strong>上的主机或路由器的 IP 地址和硬件地址的映射问题。</p>
<p>从 IP 地址到硬件地址的<strong>解析是自动进行</strong>的，主机的用户对这种地址解析过程是不知道的。</p>
<p>只要主机或路由器要和<strong>本网络上</strong>的另一个已知 IP 地址的主机或路由器进行通信， ARP 协议就会自动地将该 IP 地址解析为链路层所需要的硬件地址。</p>
<p>如果所要找的主机和源主机不在同一个局域网上，那么<strong>就要通过 ARP 找到一个位于本局域网上的某个路由器的硬件地址</strong>， 然后把分组发送给这个路由器，让这个路由器把分组转发给下一个网络。 剩下的工作就由下一个网络来做  </p>
<p>不直接使用硬件地址进行通信的原因：由于全世界存在着各式各样的网络， 它们<strong>使用不同的硬件地址</strong>  </p>
<h3 id="4-2-5-IP-数据报的格式"><a href="#4-2-5-IP-数据报的格式" class="headerlink" title="4.2.5 IP 数据报的格式"></a>4.2.5 IP 数据报的格式</h3><p>IP 数据报由<strong>首部</strong>和<strong>数据</strong>两部分组成  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211113163554611.png" alt="image-20211113163554611" style="zoom:50%;" />

<p>固定部分固定长度，共20字节，所有IP数据报必须具有的</p>
<p>可选字段长度可变</p>
<h4 id="IP-数据报首部的固定部分中的各字段"><a href="#IP-数据报首部的固定部分中的各字段" class="headerlink" title="IP 数据报首部的固定部分中的各字段"></a>IP 数据报首部的固定部分中的各字段</h4><p>版本——占 4 位，指 IP 协议的版本。目前的 IP 协议版本号为 4 (即 IPv4)。  </p>
<p>首部长度——占 4 位，可表示的最大数值是 15 个单位(一个单位为 4 字节)，因此 IP 的首部长度的最大值是 60 字节。  </p>
<p>区分服务——占 8 位，用来获得更好的服务。在旧标准中叫做服务类型，但实际上一直未被使用过。1998 年这个字段改名为区分服务。只有在使用区分服务（DiffServ）时，这个字段才起作用。在一般的情况下都不使用这个字段  </p>
<p>总长度——占 16 位，指首部和数据之和的长度，单位为字节，因此数据报的最大长度为 65535 字节。<strong>总长度必须不超过最大传送单元 MTU。</strong>  </p>
<p>标识(identification) ——占 16 位，它是一个计数器，用来产生 <strong>IP 数据报的标识</strong>  </p>
<p>标志(flag) ——占 3 位，目前只有前两位有意义。<strong>标志字段的最低位是 MF (More Fragment)<strong>。MF &#x3D; 1 表示后面“还有分片”。 MF &#x3D; 0 表示最后一个分片。</strong>标志字段中间的一位是 DF (Don’t Fragment)</strong> 。只有当 DF &#x3D; 0 时才允许分片  </p>
<p>片偏移——占13 位，指出：较长的分组在分片后某片在原分组中的相对位置。<strong>片偏移以 8 个字节为偏移单位。</strong>  </p>
<h6 id="例4-1"><a href="#例4-1" class="headerlink" title="例4.1"></a>例4.1</h6> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211113165003512.png" alt="image-20211113165003512" style="zoom:50%;" />

 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211113165017324.png" alt="image-20211113165017324" style="zoom:50%;" />

 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211113165042142.png" alt="image-20211113165042142" style="zoom:50%;" />

<p>生存时间——占8 位，记为 TTL (Time To Live)，指示数据报在网络中可通过的路由器数的最大值。  </p>
<p>协议——占8 位，指出此数据报携带的数据使用何种协议，以便目的主机的 IP 层将数据部分上交给那个处理过程  </p>
<p>首部检验和——占16 位， <strong>只检验数据报的首部</strong>， 不检验数据部分。这里不采用 CRC 检验码而采用简单的计算方法。  </p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../images/计算机网络.assets/image-20211113165300341.png" alt="image-20211113165300341" style="zoom:50%;" />

<h4 id="IP-数据报首部的可变部分"><a href="#IP-数据报首部的可变部分" class="headerlink" title="IP 数据报首部的可变部分"></a>IP 数据报首部的可变部分</h4><p>IP首部的可变部分就是一个选项字段， 用来支持排错、 测量以及安全等措施， 内容很丰富。</p>
<p>选项字段的长度可变， 从 1 个字节到 40 个字节不等， 取决于所选择的项目。</p>
<p>增加首部的可变部分是为了增加 IP 数据报的功能， 但这同时也使得 IP 数据报的首部长度成为可变的。 这就增加了每一个路由器处理数据报的开销。</p>
<p>实际上这些选项很少被使用。  </p>
<h3 id="4-2-6-分组转发的流程"><a href="#4-2-6-分组转发的流程" class="headerlink" title="4.2.6 分组转发的流程"></a>4.2.6 分组转发的流程</h3><p><strong>按主机所在的网络地址来制作路由表</strong>  </p>
<p><strong>路由表指出，到某个网络应当先到某个路由器（即下一跳路由器） 。</strong>  </p>
<p>分组转发大都是<strong>基于目的主机所在的网络</strong>， 但也有特例。  </p>
<p>特定主机路由，<strong>这种路由是为特定的目的主机指明一个路由</strong>。  </p>
<p>路由器还可采用<strong>默认路由</strong>以<strong>减少路由表所占用的空间和搜索路由表所用的时间</strong>  </p>
<p><strong>路由器分组转发算法</strong><br>(1) 从数据报的首部提取<strong>目的主机的 IP 地址 D</strong>, 得出<strong>目的网络地址为 N</strong>。<br>(2) 若网络 N 与此路由器直接相连， 则把数据报<strong>直接交付</strong>目的主机 D；否则是<strong>间接交付</strong>， 执行 (3)。<br>(3) 若路由表中有目的地址为 D 的<strong>特定主机路由</strong>， 则把数据报传送给路由表中所指明的下一跳路由器；否则， 执行 (4)。<br>(4) 若路由表中有<strong>到达网络 N 的路由</strong>， 则把数据报传送给路由表指明的下一跳路由器；否则， 执行 (5)。<br>(5) 若路由表中有一个<strong>默认路由</strong>， 则把数据报传送给路由表中所指明的默认路由器；否则， 执行 (6)。<br>(6) 报告转发分组出错。  </p>
<h2 id="4-3-划分子网和构造超网"><a href="#4-3-划分子网和构造超网" class="headerlink" title="4.3 划分子网和构造超网"></a>4.3 划分子网和构造超网</h2></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://aoitoly.github.io">Aoi Toly</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://aoitoly.github.io/posts/e255a10a/">http://aoitoly.github.io/posts/e255a10a/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://aoitoly.github.io" target="_blank">Aoi Toly</a>！</span></div></div><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"></div></div><div class="post_share"><div class="social-share" data-image="/img/default_cover.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://npm.elemecdn.com/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://npm.elemecdn.com/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/coin/coin.min.css" media="defer" onload="this.media='all'"/><div class="post-reward"><button class="tip-button reward-button"><span class="tip-button__text">不给糖果就捣蛋</span><div class="coin-wrapper"><div class="coin"><div class="coin__middle"></div><div class="coin__back"></div><div class="coin__front"></div></div></div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></button></div><audio id="coinAudio" src="https://npm.elemecdn.com/akilar-candyassets@1.0.36/audio/aowu.m4a"></audio><script defer="defer" src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/coin/coin.js"></script><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/2f9873dc/"><img class="prev-cover" src="/img/default_cover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">计算机图形学</div></div></a></div><div class="next-post pull-right"><a href="/posts/3274548c/"><img class="next-cover" src="/img/default_cover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">算法设计与分析</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a></div><div class="comment-tips" id="comment-tips"><span>你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div><div class="comment-barrage"></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="author-info-top"> <div class="card-info-avatar"></div></div><div class="author-info__sayhi" id="author-info__sayhi"></div><h1 class="author-info__name">Aoi Toly</h1><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这有关于<b style="color:#fff">产品、设计、开发</b>相关的问题和看法，还有<b style="color:#fff">文章翻译</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="banner-button-group"><a class="banner-button" onclick="pjax.loadUrl(&quot;/about/&quot;)"><span class="banner-button-text">了解更多</span><i class="fas fa-circle-right"></i></a></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://img02.anzhiy.cn/adminuploads/1/2022/09/11/631ddb7c9b250.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://img02.anzhiy.cn/adminuploads/1/2022/09/11/631ddeb0900b7.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">第一章 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 计算机网络概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E4%BA%92%E8%81%94%E7%BD%91%E6%A6%82%E8%BF%B0"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 互联网概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%92%E8%81%94%E7%BD%91%E5%9F%BA%E7%A1%80%E7%BB%93%E6%9E%84%E5%8F%91%E5%B1%95%E7%9A%84%E4%B8%89%E4%B8%AA%E9%98%B6%E6%AE%B5"><span class="toc-number">1.2.1.</span> <span class="toc-text">互联网基础结构发展的三个阶段</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-number">1.3.</span> <span class="toc-text">1.3 互联网的组成</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-1-%E8%BE%B9%E7%BC%98%E9%83%A8%E5%88%86"><span class="toc-number">1.3.1.</span> <span class="toc-text">1.3.1 边缘部分</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AB%AF%E7%B3%BB%E7%BB%9F%E4%B9%8B%E9%97%B4%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">端系统之间通信方式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%96%B9%E5%BC%8F%EF%BC%88C-x2F-S-%E6%96%B9%E5%BC%8F%EF%BC%89"><span class="toc-number">1.3.1.1.1.</span> <span class="toc-text">客户-服务器方式（C&#x2F;S 方式）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%B9%E7%AD%89%E6%96%B9%E5%BC%8F%EF%BC%88P2P-%E6%96%B9%E5%BC%8F%EF%BC%89"><span class="toc-number">1.3.1.1.2.</span> <span class="toc-text">对等方式（P2P 方式）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-2-%E6%A0%B8%E5%BF%83%E9%83%A8%E5%88%86"><span class="toc-number">1.3.2.</span> <span class="toc-text">1.3.2 核心部分</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">电路交换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">分组交换</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E7%B1%BB%E5%88%AB"><span class="toc-number">1.4.</span> <span class="toc-text">1.4 计算机网络的类别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E7%B1%BB%E5%88%AB"><span class="toc-number">1.5.</span> <span class="toc-text">1.5 计算机网络的类别</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%89%E7%85%A7%E7%BD%91%E7%BB%9C%E4%BD%9C%E7%94%A8%E8%8C%83%E5%9B%B4%E5%88%86%E7%B1%BB"><span class="toc-number">1.5.1.</span> <span class="toc-text">按照网络作用范围分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%89%E7%85%A7%E7%BD%91%E7%BB%9C%E7%9A%84%E4%BD%BF%E7%94%A8%E8%80%85%E5%88%86%E7%B1%BB"><span class="toc-number">1.5.2.</span> <span class="toc-text">按照网络的使用者分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%9D%A5%E6%8A%8A%E7%94%A8%E6%88%B7%E6%8E%A5%E5%85%A5%E5%88%B0%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E7%BD%91%E7%BB%9C"><span class="toc-number">1.5.3.</span> <span class="toc-text">用来把用户接入到互联网的网络</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-6-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E6%80%A7%E8%83%BD"><span class="toc-number">1.6.</span> <span class="toc-text">1.6 计算机网络的性能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-1-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-number">1.6.1.</span> <span class="toc-text">1.6.1 计算机网络的性能指标</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9F%E7%8E%87"><span class="toc-number">1.6.1.1.</span> <span class="toc-text">速率</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%A6%E5%AE%BD"><span class="toc-number">1.6.1.2.</span> <span class="toc-text">带宽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%9E%E5%90%90%E9%87%8F"><span class="toc-number">1.6.1.3.</span> <span class="toc-text">吞吐量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E5%BB%B6"><span class="toc-number">1.6.1.4.</span> <span class="toc-text">时延</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E6%97%B6%E5%BB%B6"><span class="toc-number">1.6.1.4.1.</span> <span class="toc-text">发送时延</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%A0%E6%92%AD%E6%97%B6%E5%BB%B6"><span class="toc-number">1.6.1.4.2.</span> <span class="toc-text">传播时延</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E6%97%B6%E5%BB%B6"><span class="toc-number">1.6.1.4.3.</span> <span class="toc-text">处理时延</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8E%92%E9%98%9F%E6%97%B6%E5%BB%B6"><span class="toc-number">1.6.1.4.4.</span> <span class="toc-text">排队时延</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%80%BB%E6%97%B6%E5%BB%B6"><span class="toc-number">1.6.1.4.5.</span> <span class="toc-text">总时延</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E5%BB%B6%E5%B8%A6%E5%AE%BD%E7%A7%AF"><span class="toc-number">1.6.1.5.</span> <span class="toc-text">时延带宽积</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BE%80%E8%BF%94%E6%97%B6%E9%97%B4-RTT-Round-Trip-Time"><span class="toc-number">1.6.1.6.</span> <span class="toc-text">往返时间 RTT(Round-Trip Time)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E7%8E%87"><span class="toc-number">1.6.1.7.</span> <span class="toc-text">利用率</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%B6%E5%BB%B6%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%88%A9%E7%94%A8%E7%8E%87%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">1.6.1.7.1.</span> <span class="toc-text">时延与网络利用率的关系</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-2-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E9%9D%9E%E6%80%A7%E8%83%BD%E7%89%B9%E5%BE%81"><span class="toc-number">1.6.2.</span> <span class="toc-text">1.6.2 计算机网络的非性能特征</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-7-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">1.7.</span> <span class="toc-text">1.7 计算机网络的体系结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BD%E9%99%85%E6%A0%87%E5%87%86"><span class="toc-number">1.7.1.</span> <span class="toc-text">国际标准</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%E4%B8%8E%E5%88%92%E5%88%86%E5%B1%82%E6%AC%A1"><span class="toc-number">1.7.2.</span> <span class="toc-text">协议与划分层次</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E7%9A%84%E4%B8%89%E4%B8%AA%E7%BB%84%E6%88%90%E8%A6%81%E7%B4%A0"><span class="toc-number">1.7.2.1.</span> <span class="toc-text">网络协议的三个组成要素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%BD%A2%E5%BC%8F"><span class="toc-number">1.7.2.2.</span> <span class="toc-text">协议的两种形式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E5%90%84%E5%B1%82%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD"><span class="toc-number">1.7.2.3.</span> <span class="toc-text">网络协议各层主要功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">1.7.2.4.</span> <span class="toc-text">计算机网络的体系结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-3-%E5%85%B7%E6%9C%89%E4%BA%94%E5%B1%82%E5%8D%8F%E8%AE%AE%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">1.7.3.</span> <span class="toc-text">1.7.3 具有五层协议的体系结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%94%E5%B1%82%E5%8D%8F%E8%AE%AE%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">1.7.3.1.</span> <span class="toc-text">五层协议的体系结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#OSI%E4%B8%83%E5%B1%82%E5%8D%8F%E8%AE%AE%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">1.7.3.2.</span> <span class="toc-text">OSI七层协议的体系结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E6%9C%BA1%E5%90%91%E4%B8%BB%E6%9C%BA2%E5%8F%91%E9%80%81%E6%95%B0%E6%8D%AE"><span class="toc-number">1.7.3.3.</span> <span class="toc-text">主机1向主机2发送数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-4-%E5%AE%9E%E4%BD%93%E3%80%81%E5%8D%8F%E8%AE%AE%E3%80%81%E6%9C%8D%E5%8A%A1%E5%92%8C%E6%9C%8D%E5%8A%A1%E8%AE%BF%E9%97%AE%E7%82%B9"><span class="toc-number">1.7.4.</span> <span class="toc-text">1.7.4 实体、协议、服务和服务访问点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E4%BD%93-entity-%E8%A1%A8%E7%A4%BA%E4%BB%BB%E4%BD%95%E5%8F%AF%E5%8F%91%E9%80%81%E6%88%96%E6%8E%A5%E5%8F%97%E4%BF%A1%E6%81%AF%E7%9A%84%E7%A1%AC%E4%BB%B6%E6%88%96%E8%BD%AF%E4%BB%B6%E8%BF%9B%E7%A8%8B"><span class="toc-number">1.7.4.1.</span> <span class="toc-text">实体(entity)表示任何可发送或接受信息的硬件或软件进程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%E6%98%AF%E6%8E%A7%E5%88%B6%E4%B8%A4%E4%B8%AA%E5%AF%B9%E7%AD%89%E5%AE%9E%E4%BD%93%E8%BF%9B%E8%A1%8C%E9%80%9A%E4%BF%A1%E7%9A%84%E8%A7%84%E5%88%99%E7%9A%84%E9%9B%86%E5%90%88"><span class="toc-number">1.7.4.2.</span> <span class="toc-text">协议是控制两个对等实体进行通信的规则的集合</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A6%81%E5%AE%9E%E7%8E%B0%E6%9C%AC%E5%B1%82%E5%8D%8F%E8%AE%AE%EF%BC%8C%E8%BF%98%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8%E4%B8%8B%E5%B1%82%E6%89%80%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1%E3%80%82"><span class="toc-number">1.7.4.3.</span> <span class="toc-text">要实现本层协议，还需要使用下层所提供的服务。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E8%AE%BF%E9%97%AE%E7%82%B9"><span class="toc-number">1.7.4.4.</span> <span class="toc-text">服务访问点</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E7%89%A9%E7%90%86%E5%B1%82"><span class="toc-number">2.</span> <span class="toc-text">第二章 物理层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E7%89%A9%E7%90%86%E5%B1%82%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 物理层的基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 数据通信的基础知识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">2.2.1.</span> <span class="toc-text">2.2.1 数据通信的基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%A1%E9%81%93"><span class="toc-number">2.2.1.1.</span> <span class="toc-text">信道</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F"><span class="toc-number">2.2.1.2.</span> <span class="toc-text">数据通信系统</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%BA%90%E7%B3%BB%E7%BB%9F"><span class="toc-number">2.2.1.2.1.</span> <span class="toc-text">源系统</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E7%B3%BB%E7%BB%9F"><span class="toc-number">2.2.1.2.2.</span> <span class="toc-text">传输系统</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%9B%AE%E7%9A%84%E7%B3%BB%E7%BB%9F"><span class="toc-number">2.2.1.2.3.</span> <span class="toc-text">目的系统</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.2.1.3.</span> <span class="toc-text">数据通信系统的模型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%9C%AF%E8%AF%AD"><span class="toc-number">2.2.1.4.</span> <span class="toc-text">常用术语</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E6%8B%9F%E7%9A%84%E5%92%8C%E6%95%B0%E5%AD%97%E7%9A%84%E6%95%B0%E6%8D%AE%E3%80%81%E4%BF%A1%E5%8F%B7"><span class="toc-number">2.2.1.5.</span> <span class="toc-text">模拟的和数字的数据、信号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E5%85%B3%E4%BF%A1%E9%81%93%E7%9A%84%E5%87%A0%E4%B8%AA%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">2.2.1.6.</span> <span class="toc-text">有关信道的几个基本概念</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E7%BC%96%E7%A0%81"><span class="toc-number">2.2.2.</span> <span class="toc-text">2.2.2 数字信号编码</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%BC%96%E7%A0%81%E6%96%B9%E5%BC%8F"><span class="toc-number">2.2.2.1.</span> <span class="toc-text">常用编码方式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8D%E5%BD%92%E9%9B%B6%E7%A0%81"><span class="toc-number">2.2.2.1.1.</span> <span class="toc-text">不归零码</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BD%92%E9%9B%B6%E7%A0%81"><span class="toc-number">2.2.2.1.2.</span> <span class="toc-text">归零码</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9B%BC%E5%BD%BB%E6%96%AF%E7%89%B9%E7%BC%96%E7%A0%81"><span class="toc-number">2.2.2.1.3.</span> <span class="toc-text">曼彻斯特编码</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B7%AE%E5%88%86%E6%9B%BC%E5%BD%BB%E6%96%AF%E7%89%B9%E7%BC%96%E7%A0%81"><span class="toc-number">2.2.2.1.4.</span> <span class="toc-text">差分曼彻斯特编码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-3-%E6%95%B0%E5%AD%97%E8%B0%83%E5%88%B6%E6%8A%80%E6%9C%AF"><span class="toc-number">2.2.3.</span> <span class="toc-text">2.2.3 数字调制技术</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%9A%84%E4%B8%89%E7%A7%8D%E4%BA%8C%E5%85%83%E5%88%B6%E8%B0%83%E5%88%B6%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="toc-number">2.2.3.1.</span> <span class="toc-text">基本的三种二元制调制方法：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E4%BA%A4%E6%8C%AF%E5%B9%85%E8%B0%83%E5%88%B6QAM-Quadrature-Amplitude-Modulation"><span class="toc-number">2.2.3.2.</span> <span class="toc-text">正交振幅调制QAM(Quadrature Amplitude Modulation)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%84%89%E5%86%B2%E7%BC%96%E7%A0%81%E8%B0%83%E5%88%B6PCM-Pulse-Code-Modulation"><span class="toc-number">2.2.3.3.</span> <span class="toc-text">脉冲编码调制PCM(Pulse Code Modulation)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%87%87%E6%A0%B7"><span class="toc-number">2.2.3.3.1.</span> <span class="toc-text">采样</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%87%8F%E5%8C%96"><span class="toc-number">2.2.3.3.2.</span> <span class="toc-text">量化</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%96%E7%A0%81"><span class="toc-number">2.2.3.3.3.</span> <span class="toc-text">编码</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%84%89%E5%86%B2%E7%BC%96%E7%A0%81%E8%B0%83%E5%88%B6PCM%E4%BE%8B%E5%AD%90"><span class="toc-number">2.2.3.3.4.</span> <span class="toc-text">脉冲编码调制PCM例子</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-4-%E4%BF%A1%E9%81%93%E7%9A%84%E6%9E%81%E9%99%90%E5%AE%B9%E9%87%8F"><span class="toc-number">2.2.4.</span> <span class="toc-text">2.2.4 信道的极限容量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%A1%E9%81%93%E8%83%BD%E5%A4%9F%E9%80%9A%E8%BF%87%E7%9A%84%E9%A2%91%E7%8E%87%E8%8C%83%E5%9B%B4"><span class="toc-number">2.2.4.1.</span> <span class="toc-text">信道能够通过的频率范围</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A5%88%E6%B0%8F%E5%87%86%E5%88%99"><span class="toc-number">2.2.4.1.1.</span> <span class="toc-text">奈氏准则</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%AF%94%E7%89%B9%E7%8E%87%E4%B8%8E%E6%B3%A2%E7%89%B9%E7%8E%87"><span class="toc-number">2.2.4.1.2.</span> <span class="toc-text">比特率与波特率</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A0%81%E9%97%B4%E4%B8%B2%E6%89%B0"><span class="toc-number">2.2.4.1.3.</span> <span class="toc-text">码间串扰</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%A1%E5%99%AA%E6%AF%94"><span class="toc-number">2.2.4.2.</span> <span class="toc-text">信噪比</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%B7%E6%B3%A8%E6%84%8F"><span class="toc-number">2.2.4.3.</span> <span class="toc-text">请注意</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E7%89%A9%E7%90%86%E5%B1%82%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 物理层下面的传输媒体</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-1-%E5%AF%BC%E5%BC%95%E5%9E%8B%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93"><span class="toc-number">2.3.1.</span> <span class="toc-text">2.3.1 导引型传输媒体</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8C%E7%BB%9E%E7%BA%BF"><span class="toc-number">2.3.1.1.</span> <span class="toc-text">双绞线</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%8C%E8%BD%B4%E7%94%B5%E7%BC%86"><span class="toc-number">2.3.1.2.</span> <span class="toc-text">同轴电缆</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%89%E7%BC%86"><span class="toc-number">2.3.1.3.</span> <span class="toc-text">光缆</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%9A%E6%A8%A1%E5%85%89%E7%BA%A4"><span class="toc-number">2.3.1.3.1.</span> <span class="toc-text">多模光纤</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%95%E6%A8%A1%E5%85%89%E7%BA%A4"><span class="toc-number">2.3.1.3.2.</span> <span class="toc-text">单模光纤</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%89%E7%BA%A4%E4%BC%98%E7%82%B9"><span class="toc-number">2.3.1.3.3.</span> <span class="toc-text">光纤优点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-2-%E9%9D%9E%E5%AF%BC%E5%BC%95%E5%9E%8B%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93"><span class="toc-number">2.3.2.</span> <span class="toc-text">2.3.2 非导引型传输媒体</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-2-%E7%94%B5%E4%BF%A1%E9%A2%86%E5%9F%9F%E4%BD%BF%E7%94%A8%E7%9A%84%E7%94%B5%E7%A3%81%E6%B3%A2%E7%9A%84%E9%A2%91%E8%B0%B1"><span class="toc-number">2.3.2.1.</span> <span class="toc-text">2.3.2 电信领域使用的电磁波的频谱</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E4%BF%A1%E9%81%93%E5%A4%8D%E7%94%A8%E6%8A%80%E6%9C%AF"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 信道复用技术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-1-%E9%A2%91%E5%88%86%E5%A4%8D%E7%94%A8FDM-Frequency-Division-Multiplexing"><span class="toc-number">2.4.1.</span> <span class="toc-text">2.4.1 频分复用FDM(Frequency Division Multiplexing)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-2-%E6%97%B6%E5%88%86%E5%A4%8D%E7%94%A8TDM-Time-Division-Multiplexing"><span class="toc-number">2.4.2.</span> <span class="toc-text">2.4.2 时分复用TDM(Time Division Multiplexing)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%9F%E8%AE%A1%E6%97%B6%E5%88%86%E5%A4%8D%E7%94%A8STDM-Statistic-TDM"><span class="toc-number">2.4.2.0.1.</span> <span class="toc-text">统计时分复用STDM(Statistic TDM)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-3-%E6%B3%A2%E5%88%86%E5%A4%8D%E7%94%A8WDM-Wavelength-Division-Multiplexing"><span class="toc-number">2.4.3.</span> <span class="toc-text">2.4.3 波分复用WDM(Wavelength Division Multiplexing)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-4-%E7%A0%81%E5%88%86%E5%A4%8D%E7%94%A8CDM-Code-Division-Multiplexing"><span class="toc-number">2.4.4.</span> <span class="toc-text">2.4.4 码分复用CDM(Code Division Multiplexing)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A0%81%E7%89%87%E5%BA%8F%E5%88%97-chip-sequence"><span class="toc-number">2.4.4.1.</span> <span class="toc-text">码片序列(chip sequence)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CDMA%E7%9A%84%E9%87%8D%E8%A6%81%E7%89%B9%E6%80%A7"><span class="toc-number">2.4.4.2.</span> <span class="toc-text">CDMA的重要特性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CDMA%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">2.4.4.3.</span> <span class="toc-text">CDMA工作原理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-%E6%95%B0%E5%AD%97%E4%BC%A0%E8%BE%93%E7%B3%BB%E7%BB%9F"><span class="toc-number">2.5.</span> <span class="toc-text">2.5 数字传输系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A7%E7%9A%84%E6%95%B0%E5%AD%97%E4%BC%A0%E8%BE%93%E7%B3%BB%E7%BB%9F%E5%AD%98%E5%9C%A8%E8%AE%B8%E5%A4%9A%E7%BC%BA%E7%82%B9"><span class="toc-number">2.5.1.</span> <span class="toc-text">旧的数字传输系统存在许多缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5%E5%85%89%E7%BA%A4%E7%BD%91SONET"><span class="toc-number">2.5.2.</span> <span class="toc-text">同步光纤网SONET</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E5%88%97SDH"><span class="toc-number">2.5.3.</span> <span class="toc-text">同步数字系列SDH</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SONET%E4%B8%8ESDH%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">2.5.4.</span> <span class="toc-text">SONET与SDH的关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SONET-x2F-SDH%E6%A0%87%E5%87%86%E7%9A%84%E6%84%8F%E4%B9%89"><span class="toc-number">2.5.5.</span> <span class="toc-text">SONET&#x2F;SDH标准的意义</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-%E7%89%A9%E7%90%86%E5%B1%82%E5%8D%8F%E8%AE%AE%E4%B8%BE%E4%BE%8B"><span class="toc-number">2.6.</span> <span class="toc-text">2.6 物理层协议举例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82%E7%9A%84%E4%B8%BB%E8%A6%81%E4%BB%BB%E5%8A%A1"><span class="toc-number">2.6.1.</span> <span class="toc-text">物理层的主要任务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EIA-232-E%E6%8E%A5%E5%8F%A3%E6%A0%87%E5%87%86"><span class="toc-number">2.6.2.</span> <span class="toc-text">EIA-232-E接口标准</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RS-449%E6%8E%A5%E5%8F%A3%E6%A0%87%E5%87%86"><span class="toc-number">2.6.3.</span> <span class="toc-text">RS-449接口标准</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">3.</span> <span class="toc-text">第三章 数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">3.1.</span> <span class="toc-text">数据链路层基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E4%BD%BF%E7%94%A8%E7%9A%84%E4%BF%A1%E9%81%93"><span class="toc-number">3.2.</span> <span class="toc-text">数据链路层使用的信道</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E4%BD%BF%E7%94%A8%E7%82%B9%E5%AF%B9%E7%82%B9%E4%BF%A1%E9%81%93%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">3.3.</span> <span class="toc-text">3.1 使用点对点信道的数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1-%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7"><span class="toc-number">3.3.1.</span> <span class="toc-text">3.1.1 封装成帧</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E8%AE%A1%E6%95%B0%E6%B3%95"><span class="toc-number">3.3.1.1.</span> <span class="toc-text">字节计数法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E5%A1%AB%E5%85%85%E6%B3%95"><span class="toc-number">3.3.1.2.</span> <span class="toc-text">字符填充法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%8F%E6%98%8E%E4%BC%A0%E8%BE%93%E9%97%AE%E9%A2%98"><span class="toc-number">3.3.1.2.1.</span> <span class="toc-text">透明传输问题</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AF%94%E7%89%B9%E5%A1%AB%E5%85%85%E6%B3%95"><span class="toc-number">3.3.1.3.</span> <span class="toc-text">比特填充法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9D%E6%B3%95%E7%BC%96%E7%A0%81%E6%B3%95"><span class="toc-number">3.3.1.4.</span> <span class="toc-text">违法编码法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-2-%E5%B7%AE%E9%94%99%E6%A3%80%E6%B5%8B"><span class="toc-number">3.3.2.</span> <span class="toc-text">3.1.2 差错检测</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E5%90%91%E7%BA%A0%E9%94%99-FEC-Forward-Error-Correct"><span class="toc-number">3.3.2.1.</span> <span class="toc-text">前向纠错(FEC, Forward Error Correct)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E9%87%8D%E5%8F%91%E8%AF%B7%E6%B1%82-ARQ-Automatic-Repeat-reQuest"><span class="toc-number">3.3.2.2.</span> <span class="toc-text">自动重发请求(ARQ, Automatic Repeat reQuest)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E9%94%99%E7%A0%81"><span class="toc-number">3.3.2.3.</span> <span class="toc-text">检错码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A5%87-x2F-%E5%81%B6%E6%A0%A1%E9%AA%8C%E7%A0%81"><span class="toc-number">3.3.2.4.</span> <span class="toc-text">奇&#x2F;偶校验码</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B0%B4%E5%B9%B3%E5%A5%87-x2F-%E5%81%B6%E6%A0%A1%E9%AA%8C"><span class="toc-number">3.3.2.4.1.</span> <span class="toc-text">水平奇&#x2F;偶校验</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9E%82%E7%9B%B4%E5%A5%87-x2F-%E5%81%B6%E6%A0%A1%E9%AA%8C"><span class="toc-number">3.3.2.4.2.</span> <span class="toc-text">垂直奇&#x2F;偶校验</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B0%B4%E5%B9%B3%E5%9E%82%E7%9B%B4%E5%A5%87-x2F-%E5%81%B6%E6%A0%A1%E9%AA%8C"><span class="toc-number">3.3.2.4.3.</span> <span class="toc-text">水平垂直奇&#x2F;偶校验</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E5%86%97%E4%BD%99%E7%A0%81-CRC-Cyclic-Redundancy-Check"><span class="toc-number">3.3.2.5.</span> <span class="toc-text">循环冗余码(CRC, Cyclic Redundancy Check)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E7%AB%AF"><span class="toc-number">3.3.2.5.1.</span> <span class="toc-text">发送端</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8E%A5%E6%94%B6%E7%AB%AF"><span class="toc-number">3.3.2.5.2.</span> <span class="toc-text">接收端</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%A4%9A%E9%A1%B9%E5%BC%8FP"><span class="toc-number">3.3.2.5.3.</span> <span class="toc-text">生成多项式P</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F"><span class="toc-number">3.3.2.5.4.</span> <span class="toc-text">注意</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%B7%E6%98%8E%E7%A0%81"><span class="toc-number">3.3.2.6.</span> <span class="toc-text">海明码</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E6%96%B9%E5%86%97%E4%BD%99%E4%BD%8D%E8%AE%A1%E7%AE%97"><span class="toc-number">3.3.2.6.1.</span> <span class="toc-text">发送方冗余位计算</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8E%A5%E6%94%B6%E6%96%B9%E9%AA%8C%E8%AF%81"><span class="toc-number">3.3.2.6.2.</span> <span class="toc-text">接收方验证</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AEPPP-Point-to-Point-Protocol"><span class="toc-number">3.4.</span> <span class="toc-text">3.2 点对点协议PPP(Point-to-Point Protocol)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1-PPP%E5%8D%8F%E8%AE%AE%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">3.4.1.</span> <span class="toc-text">3.2.1 PPP协议的特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2-PPP%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%B8%A7%E6%A0%BC%E5%BC%8F"><span class="toc-number">3.4.2.</span> <span class="toc-text">3.2.2 PPP协议的帧格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%8F%E6%98%8E%E4%BC%A0%E8%BE%93%E9%97%AE%E9%A2%98-1"><span class="toc-number">3.4.2.1.</span> <span class="toc-text">透明传输问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PPP%E5%8D%8F%E8%AE%AE%E4%B8%8D%E6%8F%90%E4%BE%9B%E5%BA%8F%E5%8F%B7%E5%92%8C%E7%A1%AE%E8%AE%A4%E7%9A%84%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93"><span class="toc-number">3.4.2.2.</span> <span class="toc-text">PPP协议不提供序号和确认的可靠传输</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-3-PPP%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%B7%A5%E4%BD%9C%E7%8A%B6%E6%80%81"><span class="toc-number">3.4.3.</span> <span class="toc-text">3.2.3 PPP协议的工作状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-4-PPP%E5%8D%8F%E8%AE%AE%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">3.4.4.</span> <span class="toc-text">3.2.4 PPP协议的特点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E4%BD%BF%E7%94%A8%E5%B9%BF%E6%92%AD%E4%BF%A1%E9%81%93%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">3.5.</span> <span class="toc-text">3.3 使用广播信道的数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-1-%E5%B1%80%E5%9F%9F%E7%BD%91%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">3.5.1.</span> <span class="toc-text">3.3.1 局域网的数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BF%A1%E9%81%93%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5"><span class="toc-number">3.5.1.1.</span> <span class="toc-text">局域网信道分配策略</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AA%92%E4%BD%93-%E4%BB%8B%E8%B4%A8-%E5%85%B1%E4%BA%AB%E6%8A%80%E6%9C%AF"><span class="toc-number">3.5.1.2.</span> <span class="toc-text">媒体(介质)共享技术</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9D%99%E6%80%81"><span class="toc-number">3.5.1.2.1.</span> <span class="toc-text">静态</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8A%A8%E6%80%81"><span class="toc-number">3.5.1.2.2.</span> <span class="toc-text">动态</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E8%A1%A8%E6%80%A7%E5%AA%92%E4%BD%93%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E6%96%B9%E6%B3%95"><span class="toc-number">3.5.1.2.3.</span> <span class="toc-text">代表性媒体访问控制方法</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ALOHA%E7%B3%BB%E7%BB%9F"><span class="toc-number">3.5.1.3.</span> <span class="toc-text">ALOHA系统</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CSMA-x2F-CD%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.5.1.4.</span> <span class="toc-text">CSMA&#x2F;CD协议</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A3%80%E6%B5%8B%E5%88%B0%E7%A2%B0%E6%92%9E%E4%B9%8B%E5%90%8E"><span class="toc-number">3.5.1.4.1.</span> <span class="toc-text">检测到碰撞之后</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CSMA-x2F-CD%E9%87%8D%E8%A6%81%E7%89%B9%E6%80%A7"><span class="toc-number">3.5.1.4.2.</span> <span class="toc-text">CSMA&#x2F;CD重要特性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%89%E7%94%A8%E6%9C%9F"><span class="toc-number">3.5.1.4.3.</span> <span class="toc-text">争用期</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%8C%87%E6%95%B0%E7%B1%BB%E5%9E%8B%E9%80%80%E9%81%BF%E7%AE%97%E6%B3%95"><span class="toc-number">3.5.1.4.4.</span> <span class="toc-text">二进制指数类型退避算法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%89%E7%94%A8%E6%9C%9F%E7%9A%84%E9%95%BF%E5%BA%A6"><span class="toc-number">3.5.1.4.5.</span> <span class="toc-text">争用期的长度</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BC%BA%E5%8C%96%E7%A2%B0%E6%92%9E"><span class="toc-number">3.5.1.4.6.</span> <span class="toc-text">强化碰撞</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CSMA-x2F-CD%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%9B%BE"><span class="toc-number">3.5.1.4.7.</span> <span class="toc-text">CSMA&#x2F;CD工作流程图</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CSMA-x2F-CD%E5%8D%8F%E8%AE%AE%E8%A6%81%E7%82%B9"><span class="toc-number">3.5.1.4.8.</span> <span class="toc-text">CSMA&#x2F;CD协议要点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%A7%E9%97%B4%E6%9C%80%E5%B0%8F%E9%97%B4%E9%9A%94"><span class="toc-number">3.5.1.4.9.</span> <span class="toc-text">帧间最小间隔</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-3-%E4%BF%A1%E9%81%93%E5%88%A9%E7%94%A8%E7%8E%87"><span class="toc-number">3.5.2.</span> <span class="toc-text">3.3.3 信道利用率</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%CE%B1-%E4%B8%8E%E5%88%A9%E7%94%A8%E7%8E%87"><span class="toc-number">3.5.2.1.</span> <span class="toc-text">参数α 与利用率</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%A1%E9%81%93%E5%88%A9%E7%94%A8%E7%8E%87%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC-S-max"><span class="toc-number">3.5.2.2.</span> <span class="toc-text">信道利用率的最大值$S_{max}$</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">3.6.</span> <span class="toc-text">3.4 以太网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-1-%E4%BC%A0%E7%BB%9F%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">3.6.1.</span> <span class="toc-text">3.4.1 传统以太网</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%98%9F%E5%BD%A2%E4%BB%A5%E5%A4%AA%E7%BD%91-10BASE-T"><span class="toc-number">3.6.1.1.</span> <span class="toc-text">星形以太网 10BASE-T</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9B%86%E7%BA%BF%E5%99%A8"><span class="toc-number">3.6.1.2.</span> <span class="toc-text">集线器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91-Ethernet-%E7%9A%84%E4%B8%A4%E4%B8%AA%E6%A0%87%E5%87%86"><span class="toc-number">3.6.1.3.</span> <span class="toc-text">以太网(Ethernet)的两个标准</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IEEE802%E6%A0%87%E5%87%86"><span class="toc-number">3.6.1.4.</span> <span class="toc-text">IEEE802标准</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-2-%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84"><span class="toc-number">3.6.2.</span> <span class="toc-text">3.4.2 以太网的层次结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#MAC%E5%92%8CLLC"><span class="toc-number">3.6.2.1.</span> <span class="toc-text">MAC和LLC</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-3-%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84MAC%E5%B1%82"><span class="toc-number">3.6.3.</span> <span class="toc-text">3.4.3 以太网的MAC层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-MAC%E5%B1%82%E7%9A%84%E7%A1%AC%E4%BB%B6%E5%9C%B0%E5%9D%80"><span class="toc-number">3.6.3.1.</span> <span class="toc-text">1. MAC层的硬件地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-MAC%E5%B8%A7%E7%9A%84%E6%A0%BC%E5%BC%8F"><span class="toc-number">3.6.3.2.</span> <span class="toc-text">2.MAC帧的格式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#DIX-Ethernet-V2%E6%A0%87%E5%87%86"><span class="toc-number">3.6.3.2.1.</span> <span class="toc-text">DIX Ethernet V2标准</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#IEEE802-3MAC%E6%A0%87%E5%87%86"><span class="toc-number">3.6.3.2.2.</span> <span class="toc-text">IEEE802.3MAC标准</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-4-%E6%89%A9%E5%B1%95%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">3.6.4.</span> <span class="toc-text">3.4.4 扩展以太网</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AC%E5%8F%91%E5%99%A8"><span class="toc-number">3.6.4.1.</span> <span class="toc-text">转发器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9B%86%E7%BA%BF%E5%99%A8-1"><span class="toc-number">3.6.4.2.</span> <span class="toc-text">集线器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E6%A1%A5"><span class="toc-number">3.6.4.3.</span> <span class="toc-text">网桥</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E6%A1%A5%E5%92%8C%E9%9B%86%E7%BA%BF%E5%99%A8%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">3.6.4.3.1.</span> <span class="toc-text">网桥和集线器的区别</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E7%AB%AF%E5%8F%A3%E7%BD%91%E6%A1%A5%E2%80%94%E2%80%94%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">3.6.4.4.</span> <span class="toc-text">多端口网桥——以太网交换机</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">3.6.4.4.1.</span> <span class="toc-text">以太网交换机的特点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E4%BC%98%E7%82%B9"><span class="toc-number">3.6.4.4.2.</span> <span class="toc-text">以太网交换机的优点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F"><span class="toc-number">3.6.4.4.3.</span> <span class="toc-text">以太网交换机的交换方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E8%87%AA%E5%AD%A6%E4%B9%A0%E5%8A%9F%E8%83%BD"><span class="toc-number">3.6.4.4.4.</span> <span class="toc-text">以太网交换机的自学习功能</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA%E8%87%AA%E5%AD%A6%E4%B9%A0%E5%92%8C%E8%BD%AC%E5%8F%91%E5%B8%A7%E7%9A%84%E6%AD%A5%E9%AA%A4%E5%BD%92%E7%BA%B3"><span class="toc-number">3.6.4.4.5.</span> <span class="toc-text">交换机自学习和转发帧的步骤归纳</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA%E4%BD%BF%E7%94%A8%E4%BA%86%E7%94%9F%E6%88%90%E6%A0%91%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.6.4.5.</span> <span class="toc-text">交换机使用了生成树协议</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%80%BB%E7%BA%BF%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%92%8C%E6%98%9F%E5%BD%A2%E4%BB%A5%E5%A4%AA%E7%BD%91%E6%AF%94%E8%BE%83"><span class="toc-number">3.6.4.5.1.</span> <span class="toc-text">总线以太网和星形以太网比较</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-5-%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">3.6.5.</span> <span class="toc-text">3.4.5 虚拟局域网</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BD%BF%E7%94%A8%E7%9A%84%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%B8%A7%E6%A0%BC%E5%BC%8F"><span class="toc-number">3.6.5.1.</span> <span class="toc-text">虚拟局域网使用的以太网帧格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%B2%E7%AA%81%E5%9F%9F-x2F-%E7%A2%B0%E6%92%9E%E5%9F%9F%E4%B8%8E%E5%B9%BF%E6%92%AD%E5%9F%9F"><span class="toc-number">3.6.5.2.</span> <span class="toc-text">冲突域&#x2F;碰撞域与广播域</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91%E7%9A%84%E4%BC%98%E7%82%B9"><span class="toc-number">3.6.5.3.</span> <span class="toc-text">虚拟局域网的优点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-6-%E9%AB%98%E9%80%9F%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">3.6.6.</span> <span class="toc-text">3.4.6 高速以太网</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#100BASE-T%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">3.6.6.1.</span> <span class="toc-text">100BASE-T以太网</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#100BASE-T-%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">3.6.6.1.1.</span> <span class="toc-text">100BASE-T 以太网的特点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#100-Mbit-x2F-s-%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84%E4%B8%89%E7%A7%8D%E4%B8%8D%E5%90%8C%E7%9A%84%E7%89%A9%E7%90%86%E5%B1%82%E6%A0%87%E5%87%86"><span class="toc-number">3.6.6.1.2.</span> <span class="toc-text">100 Mbit&#x2F;s 以太网的三种不同的物理层标准</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%89%E6%AF%94%E7%89%B9%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">3.6.6.2.</span> <span class="toc-text">吉比特以太网</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%90%89%E6%AF%94%E7%89%B9%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84%E7%89%A9%E7%90%86%E5%B1%82"><span class="toc-number">3.6.6.2.1.</span> <span class="toc-text">吉比特以太网的物理层</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%8A%E5%8F%8C%E5%B7%A5%E6%96%B9%E5%BC%8F%E5%B7%A5%E4%BD%9C%E7%9A%84%E5%90%89%E6%AF%94%E7%89%B9%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">3.6.6.2.2.</span> <span class="toc-text">半双工方式工作的吉比特以太网</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BD%BD%E6%B3%A2%E5%BB%B6%E4%BC%B8"><span class="toc-number">3.6.6.2.3.</span> <span class="toc-text">载波延伸</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E7%AA%81%E5%8F%91"><span class="toc-number">3.6.6.2.4.</span> <span class="toc-text">分组突发</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%90%89%E6%AF%94%E7%89%B9%E4%BB%A5%E5%A4%AA%E7%BD%91%E9%85%8D%E7%BD%AE%E4%B8%BE%E4%BE%8B"><span class="toc-number">3.6.6.2.5.</span> <span class="toc-text">吉比特以太网配置举例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10%E5%90%89%E6%AF%94%E7%89%B9%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%92%8C%E6%9B%B4%E5%BF%AB%E7%9A%84%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">3.6.6.3.</span> <span class="toc-text">10吉比特以太网和更快的以太网</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9B%B4%E5%BF%AB%E7%9A%84%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">3.6.6.3.1.</span> <span class="toc-text">更快的以太网</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AB%AF%E5%88%B0%E7%AB%AF%E7%9A%84%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BC%A0%E8%BE%93"><span class="toc-number">3.6.6.3.2.</span> <span class="toc-text">端到端的以太网传输</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BB%8E-10-Mbit-x2F-s-%E5%88%B0100-Gbit-x2F-s-%E7%9A%84%E6%BC%94%E8%BF%9B"><span class="toc-number">3.6.6.3.3.</span> <span class="toc-text">以太网从 10 Mbit&#x2F;s 到100 Gbit&#x2F;s 的演进</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E4%BB%A5%E5%A4%AA%E7%BD%91%E8%BF%9B%E8%A1%8C%E5%AE%BD%E5%B8%A6%E6%8E%A5%E5%85%A5"><span class="toc-number">3.6.6.4.</span> <span class="toc-text">使用以太网进行宽带接入</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#PPPoE"><span class="toc-number">3.6.6.4.1.</span> <span class="toc-text">PPPoE</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="toc-number">4.</span> <span class="toc-text">第四章 网络层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E7%BD%91%E7%BB%9C%E5%B1%82%E6%8F%90%E4%BE%9B%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%9C%8D%E5%8A%A1"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 网络层提供的两种服务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%A2%E5%90%91%E8%BF%9E%E6%8E%A5%E7%9A%84%E6%9C%8D%E5%8A%A1"><span class="toc-number">4.1.1.</span> <span class="toc-text">面向连接的服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A0%E8%BF%9E%E6%8E%A5"><span class="toc-number">4.1.2.</span> <span class="toc-text">无连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E7%94%B5%E8%B7%AF%E6%9C%8D%E5%8A%A1%E4%B8%8E%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%9C%8D%E5%8A%A1%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">4.1.3.</span> <span class="toc-text">虚电路服务与数据报服务的优缺点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%A0%E9%80%81%E4%BB%A3%E4%BB%B7%E6%96%B9%E9%9D%A2"><span class="toc-number">4.1.3.1.</span> <span class="toc-text">传送代价方面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E8%8A%82%E7%82%B9%E5%AD%98%E5%82%A8%E8%BD%AC%E5%8F%91%E6%96%B9%E9%9D%A2"><span class="toc-number">4.1.3.2.</span> <span class="toc-text">交换节点存储转发方面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%AE%E9%94%99%E5%92%8C%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6%E6%96%B9%E9%9D%A2"><span class="toc-number">4.1.3.3.</span> <span class="toc-text">差错和流量控制方面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E5%90%88"><span class="toc-number">4.1.3.4.</span> <span class="toc-text">使用场合</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AEIP-Internet-Protocol"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 网际协议IP(Internet Protocol)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1-%E8%99%9A%E6%8B%9F%E4%BA%92%E8%BF%9E%E7%BD%91%E7%BB%9C"><span class="toc-number">4.2.1.</span> <span class="toc-text">4.2.1 虚拟互连网络</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8"><span class="toc-number">4.2.2.</span> <span class="toc-text">路由器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-number">4.2.2.1.</span> <span class="toc-text">路由器的结构</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B8%E5%9E%8B%E7%9A%84%E8%B7%AF%E7%94%B1%E5%99%A8%E7%BB%93%E6%9E%84"><span class="toc-number">4.2.2.1.1.</span> <span class="toc-text">典型的路由器结构</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%B8%A2%E5%BC%83"><span class="toc-number">4.2.2.1.2.</span> <span class="toc-text">分组丢弃</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E7%BB%93%E6%9E%84"><span class="toc-number">4.2.2.2.</span> <span class="toc-text">交换结构</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E5%AD%98%E5%82%A8%E5%99%A8"><span class="toc-number">4.2.2.2.1.</span> <span class="toc-text">通过存储器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E6%80%BB%E7%BA%BF"><span class="toc-number">4.2.2.2.2.</span> <span class="toc-text">通过总线</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E7%BA%B5%E6%A8%AA%E4%BA%A4%E6%8D%A2%E7%BB%93%E6%9E%84"><span class="toc-number">4.2.2.2.3.</span> <span class="toc-text">通过纵横交换结构</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-2-%E5%88%86%E7%B1%BB%E7%9A%84IP%E5%9C%B0%E5%9D%80"><span class="toc-number">4.2.3.</span> <span class="toc-text">4.2.2 分类的IP地址</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#IP%E5%9C%B0%E5%9D%80%E5%8F%8A%E5%85%B6%E8%A1%A8%E7%A4%BA%E6%96%B9%E6%B3%95"><span class="toc-number">4.2.3.1.</span> <span class="toc-text">IP地址及其表示方法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E7%B1%BBIP%E5%9C%B0%E5%9D%80"><span class="toc-number">4.2.3.1.1.</span> <span class="toc-text">分类IP地址</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%82%B9%E5%88%86%E5%8D%81%E8%BF%9B%E5%88%B6%E8%AE%B0%E6%B3%95"><span class="toc-number">4.2.3.1.2.</span> <span class="toc-text">点分十进制记法</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E4%B8%89%E7%A7%8D%E7%B1%BB%E5%88%AB%E7%9A%84IP%E5%9C%B0%E5%9D%80"><span class="toc-number">4.2.3.2.</span> <span class="toc-text">常用的三种类别的IP地址</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E4%B8%AA%E7%89%B9%E6%AE%8A%E7%9A%84host-id"><span class="toc-number">4.2.3.2.1.</span> <span class="toc-text">2个特殊的host-id</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E7%9A%84net-id"><span class="toc-number">4.2.3.2.2.</span> <span class="toc-text">特殊的net-id</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%80%E8%88%AC%E4%B8%8D%E4%BD%BF%E7%94%A8%E7%9A%84%E7%89%B9%E6%AE%8A%E7%9A%84-IP-%E5%9C%B0%E5%9D%80"><span class="toc-number">4.2.3.2.3.</span> <span class="toc-text">一般不使用的特殊的 IP 地址</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#IP%E5%9C%B0%E5%9D%80%E7%9A%84%E9%87%8D%E8%A6%81%E7%89%B9%E7%82%B9"><span class="toc-number">4.2.3.2.4.</span> <span class="toc-text">IP地址的重要特点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-3-IP%E5%9C%B0%E5%9D%80%E4%B8%8E%E7%A1%AC%E4%BB%B6%E5%9C%B0%E5%9D%80"><span class="toc-number">4.2.4.</span> <span class="toc-text">4.2.3 IP地址与硬件地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-4-%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AEARP-Address-Resolution-Protocol"><span class="toc-number">4.2.5.</span> <span class="toc-text">4.2.4 地址解析协议ARP(Address Resolution Protocol)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ARP%E8%A6%81%E7%82%B9"><span class="toc-number">4.2.5.1.</span> <span class="toc-text">ARP要点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ARP%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">4.2.5.2.</span> <span class="toc-text">ARP高速缓存的作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%94%E5%BD%93%E6%B3%A8%E6%84%8F%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">4.2.5.3.</span> <span class="toc-text">应当注意的问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-5-IP-%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%9A%84%E6%A0%BC%E5%BC%8F"><span class="toc-number">4.2.6.</span> <span class="toc-text">4.2.5 IP 数据报的格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#IP-%E6%95%B0%E6%8D%AE%E6%8A%A5%E9%A6%96%E9%83%A8%E7%9A%84%E5%9B%BA%E5%AE%9A%E9%83%A8%E5%88%86%E4%B8%AD%E7%9A%84%E5%90%84%E5%AD%97%E6%AE%B5"><span class="toc-number">4.2.6.1.</span> <span class="toc-text">IP 数据报首部的固定部分中的各字段</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BE%8B4-1"><span class="toc-number">4.2.6.1.0.1.</span> <span class="toc-text">例4.1</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IP-%E6%95%B0%E6%8D%AE%E6%8A%A5%E9%A6%96%E9%83%A8%E7%9A%84%E5%8F%AF%E5%8F%98%E9%83%A8%E5%88%86"><span class="toc-number">4.2.6.2.</span> <span class="toc-text">IP 数据报首部的可变部分</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-6-%E5%88%86%E7%BB%84%E8%BD%AC%E5%8F%91%E7%9A%84%E6%B5%81%E7%A8%8B"><span class="toc-number">4.2.7.</span> <span class="toc-text">4.2.6 分组转发的流程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-%E5%88%92%E5%88%86%E5%AD%90%E7%BD%91%E5%92%8C%E6%9E%84%E9%80%A0%E8%B6%85%E7%BD%91"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 划分子网和构造超网</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/5d1a6067/" title="使用github action对博客进行自动部署"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用github action对博客进行自动部署"/></a><div class="content"><a class="title" href="/posts/5d1a6067/" title="使用github action对博客进行自动部署">使用github action对博客进行自动部署</a><time datetime="2023-04-09T08:38:09.000Z" title="发表于 2023-04-09 16:38:09">2023-04-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/7d157aaa/" title=".gitignore文件使用总结"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt=".gitignore文件使用总结"/></a><div class="content"><a class="title" href="/posts/7d157aaa/" title=".gitignore文件使用总结">.gitignore文件使用总结</a><time datetime="2023-04-09T08:05:56.000Z" title="发表于 2023-04-09 16:05:56">2023-04-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/0/" title="无题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/posts/0/" title="无题">无题</a><time datetime="2023-04-08T06:11:06.802Z" title="发表于 2023-04-08 14:11:06">2023-04-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/0/" title="无题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/posts/0/" title="无题">无题</a><time datetime="2023-03-31T15:35:32.568Z" title="发表于 2023-03-31 23:35:32">2023-03-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/1d89cda/" title="UnityLearning"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="UnityLearning"/></a><div class="content"><a class="title" href="/posts/1d89cda/" title="UnityLearning">UnityLearning</a><time datetime="2023-03-29T08:02:07.000Z" title="发表于 2023-03-29 16:02:07">2023-03-29</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Aoi Toly</div><div id="workboard"><img class="workSituationImg boardsign" src="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-上班摸鱼中.svg" alt="距离月入25k也就还差一个大佬带我~" title="距离月入25k也就还差一个大佬带我~"/><div id="runtimeTextTip"></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://www.dogecloud.com/" style="margin-inline:5px" data-title="本站使用多吉云为静态资源提供CDN加速" title="本站使用多吉云为静态资源提供CDN加速"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/CDN-多吉云-3693F3.svg" alt="本站使用多吉云为静态资源提供CDN加速"/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"/></a></p></div></footer></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" src="data:image/jpeg;base64,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"/><div class="loading-image-dot"></div><div id="loading-percentage">0%</div></div></div><script>const loadingPercentage = document.getElementById("loading-percentage");
let loadingPercentageTimer = setInterval(function() {
  var progressBar = document.querySelector(".pace-progress");
  if (!progressBar) return
  var currentValue = progressBar.getAttribute("data-progress-text");
  if (currentValue !== loadingPercentage.textContent) {
    loadingPercentage.textContent = currentValue;
    if (currentValue === "100%") {
      clearInterval(loadingPercentageTimer);
    }
  }
}, 100);
const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/progress_bar/progress_bar.css"/><script async="async" src="https://npm.elemecdn.com/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img02.anzhiy.cn/adminuploads/1/2022/09/15/63232b7d91d22.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">21</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">1</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><a id="switch_commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><svg class="icon" aria-hidden="true"><use href="#icon-danmu"></use></svg></a><button id="center-console" type="button" title="中控台"><i class="fas fa-fish-fins"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="nav-music"><div id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()">播放音乐</div><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="console"><div class="close-btn" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"><i class="fas fa-circle-xmark"></i></div><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="wechat" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="alipay" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments" onclick="anzhiyu.hideConsole()"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> <span>最新评论</span></span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags" onclick="anzhiyu.hideConsole()"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Hexo-github-action/" style="font-size: 1.15em; color: rgb(57, 116, 66)">Hexo, github action<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history" onclick="anzhiyu.hideConsole()"><div class="item-headline"><i class="fas fa-archive"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">四月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/03/"><span class="card-archive-list-date">三月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">18</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" onclick="rm.switchDarkMode()" title="显示模式切换" href="javascript:void(0);"><i class="fas fa-moon" style="font-size: 1rem;"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="fas fa-arrows-alt-h"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="fa-solid fa-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="fas fa-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="fa-solid fa-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="fa-solid fa-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="fa-solid fa-arrow-rotate-right"></i></div><div class="rightMenu-item" id="menu-top"><i class="fa-solid fa-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="fas fa-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="fas fa-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="fas fa-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="fas fa-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="fas fa-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="fas fa-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="fas fa-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="fas fa-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="fa-solid fa-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="fa-solid fa-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="fa-solid fa-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="fas fa-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="fas fa-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="fas fa-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="fas fa-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="fas fa-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="fas fa-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="fas fa-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="fas fa-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="fa-solid fa-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="fa-solid fa-moon"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="fas fa-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script><div><script src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script src="https://npm.elemecdn.com/hexo-theme-anzhiyu@1.1.0/source/js/utils.js"></script><script src="https://npm.elemecdn.com/hexo-theme-anzhiyu@1.1.0/source/js/main.js"></script><script src="https://npm.elemecdn.com/hexo-theme-anzhiyu@1.1.0/source/js/tw_cn.js"></script><script src="https://npm.elemecdn.com/@fancyapps/ui@4.0.31/dist/fancybox.umd.js"></script><script src="https://npm.elemecdn.com/instant.page@5.1.1/instantpage.js" type="module"></script><script src="https://npm.elemecdn.com/vanilla-lazyload@17.3.1/dist/lazyload.iife.min.js"></script><script src="https://npm.elemecdn.com/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  console.log(1)
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Aoi Toly 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("04/01/2021 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    let currentTimeHtml = "";
    if (hnum < 18 && hnum >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='fas fa-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      img.src = "https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-下班啦.svg";
      img.title = "下班了就该开开心心的玩耍，嘿嘿~";
      img.alt = "下班了就该开开心心的玩耍，嘿嘿~";

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='fas fa-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><div class="js-pjax"><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: '',
      region: '',
      onCommentLoaded: function () {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: '',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://npm.elemecdn.com/twikoo@1.6.11/dist/twikoo.all.min.js').then(runFn)
  }
  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: '',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://npm.elemecdn.com/twikoo@1.6.11/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick}</span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/bubble/bubble.js"></script><script>var visitorMail = "visitor@anzhiy.cn";</script><script>//动态标题
let leaveTitle = 'w(ﾟДﾟ)w 不要走！再看看嘛！';
let backTitle = '♪(^∇^*)欢迎肥来！';
let OriginTitile = document.title
let titleTime
document.addEventListener('visibilitychange', function () {
  if (document.hidden) {
    //离开当前页面时标签显示内容
    document.title = leaveTitle
    clearTimeout(titleTime)
  } else {
    //返回当前页面时标签显示内容
    document.title = backTitle + OriginTitile
    //两秒后变回正常标题
    titleTime = setTimeout(function () {
      document.title = OriginTitile
    }, 2000)
  }
})</script><script data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/catalog-bar/catalog-bar.js"></script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/categoryBar/categoryBar.js"></script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script async="async">// 初始化函数
let rm = {};

//禁止图片拖拽
let imgElements = document.getElementsByTagName("img");
for (let i = 0; i < imgElements.length; i++) {
  imgElements[i].addEventListener("dragstart", function (event) {
    event.preventDefault();
  });
}

// 显示菜单
rm.showRightMenu = function (isTrue, x = 0, y = 0) {
  let rightMenu = document.getElementById("rightMenu");
  rightMenu.style.top = x + "px";
  rightMenu.style.left = y + "px";
  if (isTrue) {
    rightMenu.style.display = "block";
    stopMaskScroll();
  } else {
    rightMenu.style.display = "none";
  }
};

// 隐藏菜单
rm.hideRightMenu = function () {
  rm.showRightMenu(false);
  let rightMenuMask = document.querySelector("#rightmenu-mask");
  rightMenuMask.style.display = "none";
};

// 尺寸
let rmWidth = $("#rightMenu").width();
let rmHeight = $("#rightMenu").height();

// 重新定义尺寸
rm.reloadrmSize = function () {
  rmWidth = $("#rightMenu").width();
  rmHeight = $("#rightMenu").height();
};

// 获取点击的href
let domhref = "";
let domImgSrc = "";
let globalEvent = null;

// 监听右键初始化
window.oncontextmenu = function (event) {
  if (document.body.clientWidth > 768) {
    let pageX = event.clientX + 10; //加10是为了防止显示时鼠标遮在菜单上
    let pageY = event.clientY;

    //其他额外菜单
    let $rightMenuOther = $(".rightMenuOther");
    let $rightMenuPlugin = $(".rightMenuPlugin");
    let $rightMenuCopyText = $("#menu-copytext");
    let $rightMenuPasteText = $("#menu-pastetext");
    let $rightMenuCommentText = $("#menu-commenttext");
    let $rightMenuNewWindow = $("#menu-newwindow");
    let $rightMenuNewWindowImg = $("#menu-newwindowimg");
    let $rightMenuCopyLink = $("#menu-copylink");
    let $rightMenuCopyImg = $("#menu-copyimg");
    let $rightMenuDownloadImg = $("#menu-downloadimg");
    let $rightMenuSearch = $("#menu-search");
    let $rightMenuSearchBaidu = $("#menu-searchBaidu");
    let $rightMenuMusicToggle = $("#menu-music-toggle");
    let $rightMenuMusicBack = $("#menu-music-back");
    let $rightMenuMusicForward = $("#menu-music-forward");
    let $rightMenuMusicPlaylist = $("#menu-music-playlist");
    let $rightMenuMusicCopyMusicName = $("#menu-music-copyMusicName");
    let href = event.target.href;
    let imgsrc = event.target.currentSrc;

    // 判断模式 扩展模式为有事件
    let pluginMode = false;
    $rightMenuOther.show();
    globalEvent = event;

    // 检查是否需要复制 是否有选中文本
    if (selectTextNow && window.getSelection()) {
      pluginMode = true;
      $rightMenuCopyText.show();
      $rightMenuCommentText.show();
      $rightMenuSearch.show();
      $rightMenuSearchBaidu.show();
    } else {
      $rightMenuCopyText.hide();
      $rightMenuCommentText.hide();
      $rightMenuSearchBaidu.hide();
      $rightMenuSearch.hide();
    }

    //检查是否右键点击了链接a标签
    if (href) {
      pluginMode = true;
      $rightMenuNewWindow.show();
      $rightMenuCopyLink.show();
      domhref = href;
    } else {
      $rightMenuNewWindow.hide();
      $rightMenuCopyLink.hide();
    }

    //检查是否需要复制图片
    if (imgsrc) {
      pluginMode = true;
      $rightMenuCopyImg.show();
      $rightMenuDownloadImg.show();
      $rightMenuNewWindowImg.show();
      domImgSrc = imgsrc;
    } else {
      $rightMenuCopyImg.hide();
      $rightMenuDownloadImg.hide();
      $rightMenuNewWindowImg.hide();
    }

    // 判断是否为输入框
    if (event.target.tagName.toLowerCase() === "input" || event.target.tagName.toLowerCase() === "textarea") {
      console.log("这是一个输入框");
      pluginMode = true;
      $rightMenuPasteText.show();
    } else {
      $rightMenuPasteText.hide();
    }
    const navMusicEl = document.querySelector("#nav-music");
    //判断是否是音乐
    if (navMusicEl && navMusicEl.contains(event.target)) {
      pluginMode = true;
      $rightMenuMusicToggle.show();
      $rightMenuMusicBack.show();
      $rightMenuMusicForward.show();
      $rightMenuMusicPlaylist.show();
      $rightMenuMusicCopyMusicName.show();
    } else {
      $rightMenuMusicToggle.hide();
      $rightMenuMusicBack.hide();
      $rightMenuMusicForward.hide();
      $rightMenuMusicPlaylist.hide();
      $rightMenuMusicCopyMusicName.hide();
    }

    // 如果不是扩展模式则隐藏扩展模块
    if (pluginMode) {
      $rightMenuOther.hide();
      $rightMenuPlugin.show();
    } else {
      $rightMenuPlugin.hide();
    }

    rm.reloadrmSize();

    // 鼠标默认显示在鼠标右下方，当鼠标靠右或考下时，将菜单显示在鼠标左方\上方
    if (pageX + rmWidth > window.innerWidth) {
      pageX -= rmWidth + 10;
    }
    if (pageY + rmHeight > window.innerHeight) {
      pageY -= pageY + rmHeight - window.innerHeight;
    }

    rm.showRightMenu(true, pageY, pageX);
    $("#rightmenu-mask").attr("style", "display: flex");
    return false;
  }
};

// 下载图片状态
rm.downloadimging = false;

// 复制图片到剪贴板
rm.writeClipImg = function (imgsrc) {
  console.log("按下复制");
  rm.hideRightMenu();
  anzhiyu.snackbarShow("正在下载中，请稍后", false, 10000);
  if (rm.downloadimging == false) {
    rm.downloadimging = true;
    setTimeout(function () {
      copyImage(imgsrc);
      anzhiyu.snackbarShow("复制成功！图片已添加盲水印，请遵守版权协议");
      rm.downloadimging = false;
    }, "10000");
  }
};

function imageToBlob(imageURL) {
  const img = new Image();
  const c = document.createElement("canvas");
  const ctx = c.getContext("2d");
  img.crossOrigin = "";
  img.src = imageURL;
  return new Promise(resolve => {
    img.onload = function () {
      c.width = this.naturalWidth;
      c.height = this.naturalHeight;
      ctx.drawImage(this, 0, 0);
      c.toBlob(
        blob => {
          // here the image is a blob
          resolve(blob);
        },
        "image/png",
        0.75
      );
    };
  });
}

async function copyImage(imageURL) {
  const blob = await imageToBlob(imageURL);
  const item = new ClipboardItem({ "image/png": blob });
  navigator.clipboard.write([item]);
}

rm.switchDarkMode = function () {
  // Switch Between Light And Dark Mode
  const nowMode = document.documentElement.getAttribute("data-theme") === "dark" ? "dark" : "light";
  if (nowMode === "light") {
    activateDarkMode();
    saveToLocal.set("theme", "dark", 2);
    GLOBAL_CONFIG.Snackbar !== undefined && anzhiyu.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night);
  } else {
    activateLightMode();
    saveToLocal.set("theme", "light", 2);
    GLOBAL_CONFIG.Snackbar !== undefined && anzhiyu.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day);
  }
  // handle some cases
  typeof runMermaid === "function" && window.runMermaid();
  rm.hideRightMenu();
  anzhiyu.darkModeStatus();
};

rm.copyUrl = function (id) {
  $("body").after("<input id='copyVal'></input>");
  var text = id;
  var input = document.getElementById("copyVal");
  input.value = text;
  input.select();
  input.setSelectionRange(0, input.value.length);
  document.execCommand("copy");
  $("#copyVal").remove();
};

function stopMaskScroll() {
  if (document.getElementById("rightmenu-mask")) {
    let xscroll = document.getElementById("rightmenu-mask");
    xscroll.addEventListener(
      "mousewheel",
      function (e) {
        //阻止浏览器默认方法
        rm.hideRightMenu();
        // e.preventDefault();
      },
      false
    );
  }
  if (document.getElementById("rightMenu")) {
    let xscroll = document.getElementById("rightMenu");
    xscroll.addEventListener(
      "mousewheel",
      function (e) {
        //阻止浏览器默认方法
        rm.hideRightMenu();
        // e.preventDefault();
      },
      false
    );
  }
}

rm.rightmenuCopyText = function (txt) {
  if (navigator.clipboard) {
    navigator.clipboard.writeText(txt);
  }
  rm.hideRightMenu();
};

rm.copyPageUrl = function () {
  var url = window.location.href;
  rm.copyUrl(url);
  anzhiyu.snackbarShow("复制本页链接地址成功", false, 2000);
  rm.hideRightMenu();
};

rm.sharePage = function () {
  var content = window.location.href;
  rm.copyUrl(url);
  anzhiyu.snackbarShow("复制本页链接地址成功", false, 2000);
  rm.hideRightMenu();
};

// 复制当前选中文本
var selectTextNow = "";
document.onmouseup = document.ondblclick = selceText;

function selceText() {
  var txt;
  if (document.selection) {
    txt = document.selection.createRange().text;
  } else {
    txt = window.getSelection().toString();
  }
  selectTextNow = txt !== "" ? txt : "";
}

// 读取剪切板
rm.readClipboard = function () {
  if (navigator.clipboard) {
    navigator.clipboard.readText().then(clipText => rm.insertAtCaret(globalEvent.target, clipText));
  }
};

// 粘贴文本到焦点
rm.insertAtCaret = function (elemt, value) {
  const startPos = elemt.selectionStart,
    endPos = elemt.selectionEnd;
  if (document.selection) {
    elemt.focus();
    var sel = document.selection.createRange();
    sel.text = value;
    elemt.focus();
  } else {
    if (startPos || startPos == "0") {
      var scrollTop = elemt.scrollTop;
      elemt.value = elemt.value.substring(0, startPos) + value + elemt.value.substring(endPos, elemt.value.length);
      elemt.focus();
      elemt.selectionStart = startPos + value.length;
      elemt.selectionEnd = startPos + value.length;
      elemt.scrollTop = scrollTop;
    } else {
      elemt.value += value;
      elemt.focus();
    }
  }
};

//粘贴文本
rm.pasteText = function () {
  const result = rm.readClipboard() || "";
  rm.hideRightMenu();
};

//引用到评论
rm.rightMenuCommentText = function (txt) {
  rm.hideRightMenu();
  const postCommentDom = document.querySelector("#post-comment");
  var domTop = postCommentDom.offsetTop;
  window.scrollTo(0, domTop - 80);
  if (txt == "undefined" || txt == "null") txt = "好棒！";
  function setText() {
    setTimeout(() => {
      var input = document.getElementsByClassName("el-textarea__inner")[0];
      if (!input) setText();
      let evt = document.createEvent("HTMLEvents");
      evt.initEvent("input", true, true);
      let inputValue = replaceAll(txt, "\n", "\n> ");
      input.value = "> " + inputValue + "\n\n";
      input.dispatchEvent(evt);
      input.focus();
      input.setSelectionRange(-1, -1);
      if (document.getElementById("comment-tips")) {
        document.getElementById("comment-tips").classList.add("show");
      }
    }, 100);
  }
  setText();
};

//替换所有内容
function replaceAll(string, search, replace) {
  return string.split(search).join(replace);
}

// 百度搜索
rm.searchBaidu = function () {
  anzhiyu.snackbarShow("即将跳转到百度搜索", false, 2000);
  setTimeout(function () {
    window.open("https://www.baidu.com/s?wd=" + selectTextNow);
  }, "2000");
  rm.hideRightMenu();
};

//分享链接
rm.copyLink = function () {
  rm.rightmenuCopyText(domhref);
  anzhiyu.snackbarShow("已复制链接地址");
};

function addRightMenuClickEvent() {
  // 添加点击事件
  $("#menu-backward").on("click", function () {
    window.history.back();
    rm.hideRightMenu();
  });
  $("#menu-forward").on("click", function () {
    window.history.forward();
    rm.hideRightMenu();
  });
  $("#menu-refresh").on("click", function () {
    window.location.reload();
  });
  $("#menu-top").on("click", function () {
    anzhiyu.scrollToDest(0, 500);
    rm.hideRightMenu();
  });
  $(".menu-link").on("click", rm.hideRightMenu);
  $("#menu-darkmode").on("click", rm.switchDarkMode);
  $("#menu-home").on("click", function () {
    window.location.href = window.location.origin;
  });
  $("#menu-randomPost").on("click", function () {
    toRandomPost();
  });
  $("#menu-commentBarrage").on("click", anzhiyu.switchCommentBarrage);
  $("#rightmenu-mask").on("click", rm.hideRightMenu);
  $("#rightmenu-mask").contextmenu(function () {
    rm.hideRightMenu();
    return false;
  });
  $("#menu-copy").on("click", rm.copyPageUrl);
  $("#menu-pastetext").on("click", rm.pasteText);
  $("#menu-copytext").on("click", function () {
    rm.rightmenuCopyText(selectTextNow);
    anzhiyu.snackbarShow("复制成功，复制和转载请标注本文地址");
  });
  $("#menu-commenttext").on("click", function () {
    rm.rightMenuCommentText(selectTextNow);
  });
  $("#menu-newwindow").on("click", function () {
    window.open(domhref);
    rm.hideRightMenu();
  });
  $("#menu-copylink").on("click", rm.copyLink);
  $("#menu-downloadimg").on("click", function () {
    anzhiyu.downloadImage(domImgSrc, "anzhiyu");
  });
  $("#menu-newwindowimg").on("click", function () {
    window.open(domImgSrc);
    rm.hideRightMenu();
  });
  $("#menu-copyimg").on("click", function () {
    rm.writeClipImg(domImgSrc);
  });
  $("#menu-searchBaidu").on("click", rm.searchBaidu);
  //音乐
  $("#menu-music-toggle").on("click", anzhiyu.musicToggle);
  $("#menu-music-back").on("click", anzhiyu.musicSkipBack);
  $("#menu-music-forward").on("click", anzhiyu.musicSkipForward);
  $("#menu-music-copyMusicName").on("click", function () {
    rm.rightmenuCopyText(anzhiyu.musicGetName());
    anzhiyu.snackbarShow("复制歌曲名称成功", false, 3000);
  });
}

addRightMenuClickEvent();</script><script data-pjax>var themeColorMeta = document.querySelector('meta[name="theme-color"]');
var pageHeaderEl = document.getElementById("page-header");
var navMusicEl = document.getElementById("nav-music");
var consoleEl = document.getElementById("console");
// 已随机的歌曲
var selectRandomSong = [];
// 音乐默认声音大小
var musicVolume = 0.8;
// 是否切换了周杰伦音乐列表
var changeMusicListFlag = false;
// 当前默认播放列表
var defaultPlayMusicList = [];

document.getElementById("page-name").innerText = document.title.split(" | 安知鱼")[0];
anzhiyu.initIndexEssay();
anzhiyu.changeTimeInEssay();
anzhiyu.removeBodyPaceClass();
anzhiyu.changeTimeInAlbumDetail();
anzhiyu.reflashEssayWaterFall();
anzhiyu.sayhi();
anzhiyu.stopImgRightDrag();
anzhiyu.addNavBackgroundInit();
anzhiyu.setValueToBodyType();

anzhiyu.getCustomPlayList();
anzhiyu.addEventListenerConsoleMusicList(false);</script><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/ali_font.js"></script><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://npm.elemecdn.com/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://npm.elemecdn.com/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)
  window.anzhiyuScrollFnToDo && window.removeEventListener('scroll', anzhiyuScrollFnToDo)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>